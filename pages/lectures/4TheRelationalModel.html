<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Relational Model - CSCI 5603</title>
    
    <!-- Database Design Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <!-- Import Courier Prime for analog feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lecture-Specific Styles -->
    <style>
        /* Override font for analog feel */
        body, .slide, h1, h2, h3, p, li {
            font-family: 'Courier Prime', 'IBM Plex Mono', 'Courier New', monospace !important;
        }
        
        /* Database-specific styling */
        .erd-diagram {
            background: var(--bg-accent);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier Prime', monospace;
        }

        /* SQL syntax highlighting classes now in presentation.css */

        .table-schema {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-family: 'IBM Plex Mono', monospace;
        }
        
        .table-schema th {
            background: var(--ocu-true-blue);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .table-schema td {
            border: 1px solid var(--border-color);
            padding: 10px;
            background: var(--bg-secondary);
        }
        
        .table-schema tr:nth-child(even) td {
            background: var(--bg-accent);
        }

        .relation-example {
            margin: 20px 0;
            overflow-x: auto;
        }

        .relation-table {
            border-collapse: collapse;
            width: 100%;
            font-family: 'IBM Plex Mono', monospace;
            font-size: 0.9em;
        }

        .relation-table th {
            background: var(--ocu-dark-blue);
            color: white;
            padding: 10px;
            border: 1px solid var(--border-color);
            font-weight: 600;
        }

        .relation-table td {
            border: 1px solid var(--border-color);
            padding: 8px;
            background: var(--bg-secondary);
        }

        .key-highlight {
            background: var(--ocu-yellow) !important;
            color: var(--ocu-dark-blue);
            font-weight: bold;
        }

        .foreign-key-highlight {
            background: var(--ocu-light-blue) !important;
            color: var(--ocu-dark-blue);
        }

        .concept-box {
            background: var(--bg-accent);
            border-left: 5px solid var(--ocu-green);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        /* JSON and XML syntax highlighting classes now in presentation.css */
    </style>
</head>
<body>
    <!-- Theme toggle will be automatically added by JavaScript -->
    
    <div class="presentation-container">
        <!-- Timer display for activities -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">The Relational Model
                 <button class="home"><a href="../../index.html">Home</a></button>
            </span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide active">
            <h1>The Relational Model</h1>
            <h2>Foundation of Modern Databases <span class="emoji">üóÑÔ∏è</span></h2>
            <p style="font-size: 1.5em; margin-top: 40px;">CSCI 5603 - Database Design</p>
            <p style="font-size: 1.3em;">Week 1, Lecture 2</p>
            <p style="margin-top: auto; font-style: italic;">Understanding the mathematical foundation of relational databases!</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Learning Objectives</h1>
            <ul style="font-size: 1.4em; line-height: 2;">
                <li>üéØ Understand the fundamental terminology of the relational model</li>
                <li>üéØ Master the concept of relations, attributes, tuples, and domains</li>
                <li>üéØ Learn about different types of keys and their importance</li>
                <li>üéØ Apply integrity constraints to ensure data quality</li>
                <li>üéØ Explore the mathematical foundation of databases</li>
            </ul>
        </div>

        <!-- Slide 3: Historical Context -->
        <div class="slide">
            <h1>Historical Context <span class="emoji">üìú</span></h1>
            <h2>The Relational Revolution</h2>

            <div class="concept-box">
                <h3>IBM's System R (1970s)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">IBM researchers, including Don Chamberlin and Raymond Boyce, built System R‚Äîan experimental prototype that demonstrated the feasibility of E.F. Codd's relational model. This groundbreaking project not only validated the theoretical concepts but also led to the development of SQL, which would become the standard query language for relational databases.</p>
            </div>

            <div class="concept-box">
                <h3>The "Relational Wars" (Early 1980s)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">The relational model faced initial resistance from companies heavily invested in older hierarchical and network systems. Oracle, founded in 1977 and shipping Version 2 in 1979, was one of the first to commercially embrace the relational model‚Äîand succeeded spectacularly, helping to establish relational databases as the industry standard.</p>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> System R's proof-of-concept and Oracle's commercial success together transformed theoretical research into a multi-billion dollar industry.
            </div>
        </div>

        <!-- Slide 4: What is the Relational Model? -->
        <div class="slide">
            <h1>What is the Relational Model?</h1>
            <p>Proposed by E.F. Codd in 1970, the relational model revolutionized database management.</p>
            
            <div class="concept-box">
                <h3>Core Principle</h3>
                <p>All data is represented as mathematical <strong>relations</strong> - essentially tables with rows and columns.</p>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> The relational model provides a mathematical foundation for databases, enabling formal reasoning about data operations and integrity.
            </div>
        </div>

        <!-- Slide 4: Basic Terminology Part 1 -->
        <div class="slide">
            <h1>Relational Model Terminology (Part 1)</h1>
            
            <div class="concept-box">
                <h3>üìä Relation</h3>
                <p>A table with columns and rows. Only applies to the logical structure, not physical storage.</p>
            </div>

            <div class="concept-box">
                <h3>üìù Attribute</h3>
                <p>A named column of a relation (e.g., StudentID, Name, Email).</p>
            </div>

            <div class="concept-box">
                <h3>üéØ Domain</h3>
                <p>The set of allowable values for one or more attributes (e.g., integers, strings, dates).</p>
            </div>
        </div>

        <!-- Slide 5: Basic Terminology Part 2 -->
        <div class="slide">
            <h1>Relational Model Terminology (Part 2)</h1>
            
            <div class="concept-box">
                <h3>üìã Tuple</h3>
                <p>A row of a relation representing a single entity instance.</p>
            </div>

            <div class="concept-box">
                <h3>üî¢ Degree</h3>
                <p>The number of attributes in a relation (number of columns).</p>
            </div>

            <div class="concept-box">
                <h3>üìà Cardinality</h3>
                <p>The number of tuples in a relation (number of rows).</p>
            </div>

            <div class="concept-box">
                <h3>üóÑÔ∏è Relational Database</h3>
                <p>A collection of normalized relations with distinct relation names.</p>
            </div>
        </div>

        <!-- Slide 6: Alternative Terminology -->
        <div class="slide">
            <h1>Alternative Terminology</h1>
            <p>Different communities use different terms for the same concepts:</p>

            <table class="table-schema">
                <thead>
                    <tr>
                        <th>Formal Terms</th>
                        <th>Alternative 1</th>
                        <th>Alternative 2</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Relation</strong></td>
                        <td>Table</td>
                        <td>File</td>
                    </tr>
                    <tr>
                        <td><strong>Tuple</strong></td>
                        <td>Row</td>
                        <td>Record</td>
                    </tr>
                    <tr>
                        <td><strong>Attribute</strong></td>
                        <td>Column</td>
                        <td>Field</td>
                    </tr>
                </tbody>
            </table>

            <div class="tip-box">
                <strong>Note:</strong> While terminology varies, we'll primarily use the formal terms in this course to maintain precision.
            </div>
        </div>

        <!-- Slide 7: Example Relations - Branch -->
        <div class="slide">
            <h1>Example: Branch Relation</h1>
            <p>Let's examine a concrete example of a relation:</p>

            <div class="relation-example">
                <table class="relation-table">
                    <thead>
                        <tr>
                            <th class="key-highlight">branchNo</th>
                            <th>street</th>
                            <th>city</th>
                            <th>postcode</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="key-highlight">B005</td>
                            <td>22 Deer Rd</td>
                            <td>London</td>
                            <td>SW1 4EH</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">B007</td>
                            <td>16 Argyll St</td>
                            <td>Aberdeen</td>
                            <td>AB2 3SU</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">B003</td>
                            <td>163 Main St</td>
                            <td>Glasgow</td>
                            <td>G11 9QX</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">B004</td>
                            <td>32 Manse Rd</td>
                            <td>Bristol</td>
                            <td>BS99 1NZ</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">B002</td>
                            <td>56 Clover Dr</td>
                            <td>London</td>
                            <td>NW10 6EU</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p><strong>Degree:</strong> 4 (four attributes) | <strong>Cardinality:</strong> 5 (five tuples)</p>
        </div>

        <!-- Slide 8: Example Relations - Staff -->
        <div class="slide">
            <h1>Example: Staff Relation</h1>
            <p>A more complex relation with a foreign key reference:</p>

            <div class="relation-example" style="font-size: 0.85em;">
                <table class="relation-table">
                    <thead>
                        <tr>
                            <th class="key-highlight">staffNo</th>
                            <th>fName</th>
                            <th>lName</th>
                            <th>position</th>
                            <th>sex</th>
                            <th>DOB</th>
                            <th>salary</th>
                            <th class="foreign-key-highlight">branchNo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="key-highlight">SL21</td>
                            <td>John</td>
                            <td>White</td>
                            <td>Manager</td>
                            <td>M</td>
                            <td>1-Oct-45</td>
                            <td>30000</td>
                            <td class="foreign-key-highlight">B005</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">SG37</td>
                            <td>Ann</td>
                            <td>Beech</td>
                            <td>Assistant</td>
                            <td>F</td>
                            <td>10-Nov-60</td>
                            <td>12000</td>
                            <td class="foreign-key-highlight">B003</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">SG14</td>
                            <td>David</td>
                            <td>Ford</td>
                            <td>Supervisor</td>
                            <td>M</td>
                            <td>24-Mar-58</td>
                            <td>18000</td>
                            <td class="foreign-key-highlight">B003</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">SA9</td>
                            <td>Mary</td>
                            <td>Howe</td>
                            <td>Assistant</td>
                            <td>F</td>
                            <td>19-Feb-70</td>
                            <td>9000</td>
                            <td class="foreign-key-highlight">B007</td>
                        </tr>
                        <tr>
                            <td class="key-highlight">SG5</td>
                            <td>Susan</td>
                            <td>Brand</td>
                            <td>Manager</td>
                            <td>F</td>
                            <td>3-Jun-40</td>
                            <td>24000</td>
                            <td class="foreign-key-highlight">B003</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>üîë <strong>Primary Key:</strong> staffNo | üîó <strong>Foreign Key:</strong> branchNo (references Branch relation)</p>
        </div>

        <!-- Slide 9: Properties of Relations -->
        <div class="slide">
            <h1>Properties of Relations</h1>
            <p>Relations have specific properties that distinguish them from general tables:</p>

            <ul style="font-size: 1.3em; line-height: 1.8;">
                <li>‚úÖ <strong>Unique relation name</strong> within the database schema</li>
                <li>‚úÖ <strong>Atomic values</strong> - each cell contains exactly one value</li>
                <li>‚úÖ <strong>Distinct attribute names</strong> within a relation</li>
                <li>‚úÖ <strong>Homogeneous columns</strong> - all values in a column from same domain</li>
                <li>‚úÖ <strong>No duplicate tuples</strong> - each row is unique</li>
                <li>‚úÖ <strong>Order independence</strong> - order of rows and columns doesn't matter</li>
            </ul>

            <div class="tip-box">
                <strong>Important:</strong> These properties ensure mathematical consistency and enable formal query operations.
            </div>
        </div>

        <!-- Slide 10: Mathematical Foundation -->
        <div class="slide">
            <h1>Mathematical Definition of Relations</h1>
            <p>Relations are based on the mathematical concept of Cartesian products:</p>

            <div class="code-example">
                <p><strong>Given sets:</strong></p>
                <p>D‚ÇÅ = {2, 4}</p>
                <p>D‚ÇÇ = {1, 3, 5}</p>
                <br>
                <p><strong>Cartesian Product D‚ÇÅ √ó D‚ÇÇ:</strong></p>
                <p>{(2,1), (2,3), (2,5), (4,1), (4,3), (4,5)}</p>
                <br>
                <p><strong>A relation R is a subset of the Cartesian product</strong></p>
                <p>R ‚äÜ D‚ÇÅ √ó D‚ÇÇ √ó ... √ó D‚Çô</p>
            </div>

            <div class="concept-box">
                <p>This mathematical foundation allows us to use set theory and predicate logic to reason about database operations.</p>
            </div>
        </div>

        <!-- Slide 11a: Car Rental Database Challenge -->
        <div class="slide">
            <h1>Skills Check: Build car_rental_db <span class="emoji">üöó</span></h1>
            <h2>30-Minute Database Challenge</h2>

            <div class="warning-box">
                <h3>Your Mission:</h3>
                <p style="font-size: 1.15em;">Create a <strong>complete working database</strong> from scratch for a car rental company. Design the schema, create tables with relationships, populate with data, and run queries‚Äîall in 30 minutes!</p>
            </div>

            <div class="demo-box">
                <h3>What You'll Build:</h3>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li>üöó <strong>Vehicles:</strong> Track rental cars (make, model, year, VIN, category, daily rate)</li>
                    <li>üë§ <strong>Customers:</strong> Manage customer information (name, license number, contact info)</li>
                    <li>üìã <strong>Rentals:</strong> Record rental transactions (dates, pickup/return locations, total cost)</li>
                    <li>üìç <strong>Locations:</strong> Rental branch offices (address, phone, manager)</li>
                </ul>
            </div>

            <div class="success-box">
                <h3>üéØ Goals:</h3>
                <p>By the end of 30 minutes, you'll demonstrate mastery of relational model concepts: entities, attributes, keys, relationships, integrity constraints, and SQL DDL/DML.</p>
            </div>

            <button data-timer="30">Start 30-Minute Timer</button>
        </div>

        <!-- Slide 11b: SQL Syntax Cheat Sheet -->
        <div class="slide">
            <h1>SQL Syntax Cheat Sheet <span class="emoji">üìã</span></h1>
            <h2>Keep This Slide Up During The Exercise!</h2>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; font-size: 0.8em;">
                <div class="demo-box">
                    <h3>CREATE TABLE</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-keyword">CREATE TABLE</span> Vehicles (<br>
&nbsp;&nbsp;vehicle_id <span class="sql-keyword">SERIAL PRIMARY KEY</span>,<br>
&nbsp;&nbsp;make <span class="sql-keyword">VARCHAR</span>(50) <span class="sql-keyword">NOT NULL</span>,<br>
&nbsp;&nbsp;model <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;year <span class="sql-keyword">INTEGER</span>,<br>
&nbsp;&nbsp;daily_rate <span class="sql-keyword">DECIMAL</span>(6,2),<br>
&nbsp;&nbsp;location_id <span class="sql-keyword">INTEGER</span>,<br>
&nbsp;&nbsp;<span class="sql-keyword">FOREIGN KEY</span> (location_id)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">REFERENCES</span> Locations(location_id)<br>
);
                    </div>
                </div>

                <div class="demo-box">
                    <h3>INSERT DATA</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-keyword">INSERT INTO</span> Vehicles<br>
&nbsp;&nbsp;(make, model, year, daily_rate)<br>
<span class="sql-keyword">VALUES</span><br>
&nbsp;&nbsp;(<span class="sql-string">'Toyota'</span>, <span class="sql-string">'Camry'</span>, 2023, 45.00),<br>
&nbsp;&nbsp;(<span class="sql-string">'Honda'</span>, <span class="sql-string">'Civic'</span>, 2022, 40.00);
                    </div>
                </div>

                <div class="demo-box">
                    <h3>SELECT with JOIN</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-keyword">SELECT</span> v.make, v.model, r.rental_date<br>
<span class="sql-keyword">FROM</span> Vehicles v<br>
<span class="sql-keyword">JOIN</span> Rentals r<br>
&nbsp;&nbsp;<span class="sql-keyword">ON</span> v.vehicle_id = r.vehicle_id<br>
<span class="sql-keyword">WHERE</span> r.return_date <span class="sql-keyword">IS NULL</span>;
                    </div>
                </div>

                <div class="demo-box">
                    <h3>ALTER TABLE</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-comment">-- Add column</span><br>
<span class="sql-keyword">ALTER TABLE</span> Vehicles<br>
<span class="sql-keyword">ADD COLUMN</span> mileage <span class="sql-keyword">INTEGER</span>;<br><br>

<span class="sql-comment">-- Add constraint</span><br>
<span class="sql-keyword">ALTER TABLE</span> Rentals<br>
<span class="sql-keyword">ADD CONSTRAINT</span> fk_customer<br>
<span class="sql-keyword">FOREIGN KEY</span> (customer_id)<br>
<span class="sql-keyword">REFERENCES</span> Customers(customer_id);
                    </div>
                </div>

                <div class="demo-box">
                    <h3>AGGREGATE Functions</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-keyword">SELECT</span><br>
&nbsp;&nbsp;<span class="sql-keyword">COUNT</span>(*) <span class="sql-keyword">AS</span> total_rentals,<br>
&nbsp;&nbsp;<span class="sql-keyword">SUM</span>(total_cost) <span class="sql-keyword">AS</span> revenue,<br>
&nbsp;&nbsp;<span class="sql-keyword">AVG</span>(daily_rate) <span class="sql-keyword">AS</span> avg_rate<br>
<span class="sql-keyword">FROM</span> Rentals r<br>
<span class="sql-keyword">JOIN</span> Vehicles v<br>
&nbsp;&nbsp;<span class="sql-keyword">ON</span> r.vehicle_id = v.vehicle_id;
                    </div>
                </div>

                <div class="demo-box">
                    <h3>UPDATE & DELETE</h3>
                    <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-comment">-- Update</span><br>
<span class="sql-keyword">UPDATE</span> Vehicles<br>
<span class="sql-keyword">SET</span> daily_rate = 50.00<br>
<span class="sql-keyword">WHERE</span> make = <span class="sql-string">'Toyota'</span>;<br><br>

<span class="sql-comment">-- Delete</span><br>
<span class="sql-keyword">DELETE FROM</span> Rentals<br>
<span class="sql-keyword">WHERE</span> return_date < <span class="sql-string">'2020-01-01'</span>;
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Pro Tip:</strong> Create parent tables (Locations, Customers, Vehicles) BEFORE child tables (Rentals) to avoid foreign key errors!
            </div>
        </div>

        <!-- Slide 11c: Challenge Requirements -->
        <div class="slide">
            <h1>Challenge Requirements & Tasks</h1>

            <div class="activity-box">
                <h3>Phase 1: Design & Create (15 minutes)</h3>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Create the Database:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Open DataGrip, create new database: <code>car_rental_db</code></li>
                            <li>Connect to your new database</li>
                        </ul>
                    </li>
                    <li><strong>Design 4 Tables with Relationships:</strong>
                        <ul style="margin-top: 8px;">
                            <li><strong>Locations</strong> - Rental branch offices</li>
                            <li><strong>Vehicles</strong> - Cars available for rent</li>
                            <li><strong>Customers</strong> - People renting cars</li>
                            <li><strong>Rentals</strong> - Transaction records linking customers to vehicles</li>
                        </ul>
                    </li>
                    <li><strong>Implement Keys & Constraints:</strong>
                        <ul style="margin-top: 8px;">
                            <li>PRIMARY KEY on each table (use SERIAL for auto-increment)</li>
                            <li>FOREIGN KEYS: Vehicles‚ÜíLocations, Rentals‚ÜíVehicles, Rentals‚ÜíCustomers</li>
                            <li>NOT NULL on critical fields (names, dates, license numbers)</li>
                            <li>At least ONE CHECK constraint (e.g., daily_rate > 0, rental_date < return_date)</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 11d: Data & Queries -->
        <div class="slide">
            <h1>Challenge Requirements & Tasks (cont.)</h1>

            <div class="activity-box">
                <h3>Phase 2: Populate & Query (10 minutes)</h3>
                <ol start="4" style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Insert Sample Data:</strong>
                        <ul style="margin-top: 8px;">
                            <li>At least 3 Locations</li>
                            <li>At least 6 Vehicles (mix of makes/models, distributed across locations)</li>
                            <li>At least 4 Customers</li>
                            <li>At least 5 Rentals (some completed with return dates, some still active)</li>
                        </ul>
                    </li>
                    <li><strong>Write & Run 3 Queries:</strong>
                        <ul style="margin-top: 8px;">
                            <li><strong>Query 1 (SIMPLE):</strong> List all available vehicles at a specific location</li>
                            <li><strong>Query 2 (JOIN):</strong> Show all active rentals with customer name and vehicle details</li>
                            <li><strong>Query 3 (AGGREGATE):</strong> Calculate total revenue per location</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="activity-box">
                <h3>Phase 3: Present Your ER Diagram (5 minutes)</h3>
                <ol start="6" style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Generate ER Diagram in DataGrip:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Right-click your database ‚Üí Diagrams ‚Üí Show Visualization</li>
                            <li>Arrange tables to clearly show relationships</li>
                            <li>Be ready to share your screen and explain your design!</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 11e: Design Hints -->
        <div class="slide">
            <h1>Design Hints & Suggestions</h1>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h3>Suggested Attributes</h3>
                        <p style="font-size: 0.9em;"><strong>Locations:</strong></p>
                        <ul style="font-size: 0.85em;">
                            <li>location_id (PK)</li>
                            <li>name, address, city, state</li>
                            <li>phone, manager_name</li>
                        </ul>

                        <p style="font-size: 0.9em; margin-top: 15px;"><strong>Vehicles:</strong></p>
                        <ul style="font-size: 0.85em;">
                            <li>vehicle_id (PK)</li>
                            <li>vin, make, model, year</li>
                            <li>category (economy/luxury/SUV)</li>
                            <li>daily_rate, location_id (FK)</li>
                        </ul>
                    </div>
                </div>

                <div class="column">
                    <div class="demo-box">
                        <h3>&nbsp;</h3>
                        <p style="font-size: 0.9em;"><strong>Customers:</strong></p>
                        <ul style="font-size: 0.85em;">
                            <li>customer_id (PK)</li>
                            <li>first_name, last_name</li>
                            <li>license_number, phone, email</li>
                        </ul>

                        <p style="font-size: 0.9em; margin-top: 15px;"><strong>Rentals:</strong></p>
                        <ul style="font-size: 0.85em;">
                            <li>rental_id (PK)</li>
                            <li>vehicle_id (FK), customer_id (FK)</li>
                            <li>rental_date, return_date</li>
                            <li>pickup_location_id, return_location_id</li>
                            <li>total_cost</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Common Mistakes to Avoid:</h3>
                <ul style="font-size: 1.0em;">
                    <li>üö´ Creating child tables before parent tables (causes FK errors)</li>
                    <li>üö´ Forgetting NOT NULL on important fields like names and dates</li>
                    <li>üö´ Using the same data type for all columns (dates are DATE, prices are DECIMAL!)</li>
                    <li>üö´ Not testing your foreign key relationships with INSERT statements</li>
                </ul>
            </div>
        </div>

        <!-- Slide 12: Types of Keys Overview -->
        <div class="slide">
            <h1>Understanding Relational Keys</h1>
            <p>Keys are fundamental to maintaining data integrity and establishing relationships:</p>

            <div class="erd-diagram">
                <pre style="font-size: 1.1em;">
                    üîë Types of Keys
                    
    Superkey ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ Any attribute(s) that uniquely identify tuples
         ‚îÇ
         ‚ñº
    Candidate Key ‚îÄ‚îÄ‚ñ∫ Minimal superkey (no redundant attributes)
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚ñ∫ Primary Key (chosen candidate key)
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚ñ∫ Alternate Keys (other candidate keys)
         
    Foreign Key ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ References primary key in another relation
                </pre>
            </div>
        </div>

        <!-- Slide 13: Superkeys and Candidate Keys -->
        <div class="slide">
            <h1>Superkeys and Candidate Keys</h1>

            <div class="concept-box">
                <h3>üîì Superkey</h3>
                <p>An attribute or set of attributes that uniquely identifies a tuple within a relation.</p>
                <p><strong>Example:</strong> {staffNo}, {staffNo, fName}, {staffNo, fName, lName}</p>
            </div>

            <div class="concept-box">
                <h3>üîë Candidate Key</h3>
                <p>A minimal superkey - no proper subset is also a superkey.</p>
                <ul>
                    <li><strong>Uniqueness:</strong> Values uniquely identify each tuple</li>
                    <li><strong>Irreducibility:</strong> No attribute can be removed while maintaining uniqueness</li>
                </ul>
                <p><strong>Example:</strong> {staffNo}, {email} (if email is unique)</p>
            </div>
        </div>

        <!-- Slide 14: Primary and Foreign Keys -->
        <div class="slide">
            <h1>Primary and Foreign Keys</h1>

            <div class="concept-box">
                <h3>üéØ Primary Key</h3>
                <p>The candidate key selected to uniquely identify tuples in a relation.</p>
                <p><strong>Properties:</strong> Cannot be NULL, must be unique, ideally stable (doesn't change)</p>
            </div>

            <div class="concept-box">
                <h3>üîó Foreign Key</h3>
                <p>An attribute (or set) that matches the primary key of another (or same) relation.</p>
                <p><strong>Purpose:</strong> Establishes relationships between relations</p>
            </div>

            <div class="sql-example">
                <span class="sql-comment">-- Example: Foreign Key Constraint</span><br>
                <span class="sql-keyword">ALTER TABLE</span> Staff<br>
                <span class="sql-keyword">ADD CONSTRAINT</span> fk_branch<br>
                <span class="sql-keyword">FOREIGN KEY</span> (branchNo) <span class="sql-keyword">REFERENCES</span> Branch(branchNo);
            </div>
        </div>

        <!-- Slide 15: Integrity Constraints -->
        <div class="slide">
            <h1>Integrity Constraints</h1>
            <p>Rules that ensure data quality and consistency:</p>

            <div class="concept-box">
                <h3>1Ô∏è‚É£ Entity Integrity</h3>
                <p>No attribute of a primary key can be NULL.</p>
                <p><em>Rationale: Primary keys identify tuples; NULL would mean "unknown identity"</em></p>
            </div>

            <div class="concept-box">
                <h3>2Ô∏è‚É£ Referential Integrity</h3>
                <p>Foreign key values must either:</p>
                <ul>
                    <li>Match an existing primary key value in the referenced relation, OR</li>
                    <li>Be wholly NULL (if the relationship is optional)</li>
                </ul>
            </div>

            <div class="concept-box">
                <h3>3Ô∏è‚É£ Domain Constraints</h3>
                <p>Values must be from the specified domain (data type, range, format)</p>
            </div>
        </div>

        <!-- Slide 16: NULL Values -->
        <div class="slide">
            <h1>Understanding NULL Values</h1>
            
            <div class="concept-box">
                <h3>What is NULL?</h3>
                <p>Represents a value that is:</p>
                <ul>
                    <li>Currently unknown (e.g., unknown phone number)</li>
                    <li>Not applicable (e.g., spouse name for unmarried person)</li>
                    <li>Not yet available (e.g., exam grade before exam)</li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>‚ö†Ô∏è Important:</strong> NULL is NOT the same as:
                <ul>
                    <li>Zero (0) - which is a numeric value</li>
                    <li>Empty string ("") - which is a string value</li>
                    <li>Space (" ") - which is a character value</li>
                </ul>
            </div>

            <div class="sql-example">
                <span class="sql-comment">-- Handling NULL in queries</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Staff<br>
                <span class="sql-keyword">WHERE</span> bonus <span class="sql-keyword">IS NULL</span>;<br>
                <span class="sql-comment">-- Note: Use IS NULL, not = NULL</span>
            </div>
        </div>

        <!-- Slide 17: Practice with Keys -->
        <div class="slide">
            <h1>Activity: Identifying Keys <span class="emoji">üîç</span></h1>
            <div class="activity-box">
                <h3>15-Minute Exercise</h3>
                <p>Given the following Student relation, identify:</p>
                
                <table class="table-schema" style="font-size: 0.9em;">
                    <thead>
                        <tr>
                            <th>studentID</th>
                            <th>SSN</th>
                            <th>email</th>
                            <th>name</th>
                            <th>major</th>
                            <th>advisorID</th>
                        </tr>
                    </thead>
                </table>

                <ol>
                    <li>All possible superkeys</li>
                    <li>All candidate keys</li>
                    <li>Choose a primary key and justify your choice</li>
                    <li>Identify any foreign keys</li>
                    <li>What integrity constraints should apply?</li>
                </ol>
            </div>
            <button data-timer="15">Start 15-Minute Timer</button>
        </div>

        <!-- Slide 18: Relations vs. Files -->
        <div class="slide">
            <h1>Relations vs. Traditional Files</h1>
            <p>Why use relations instead of flat files?</p>

            <div class="comparison-table">
                <div class="comparison-card bad">
                    <h3>‚ùå Traditional Files</h3>
                    <ul>
                        <li>Physical storage focus</li>
                        <li>Order-dependent</li>
                        <li>Allows duplicate records</li>
                        <li>No built-in integrity</li>
                        <li>Complex relationships difficult</li>
                        <li>Limited query capabilities</li>
                    </ul>
                </div>
                <div class="comparison-card good">
                    <h3>‚úÖ Relations</h3>
                    <ul>
                        <li>Logical structure focus</li>
                        <li>Order-independent</li>
                        <li>No duplicate tuples</li>
                        <li>Built-in integrity constraints</li>
                        <li>Easy relationship modeling</li>
                        <li>Powerful query languages (SQL)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 19: Data Formats Comparison -->
        <div class="slide">
            <h1>Modern Data Formats: JSON & XML</h1>
            <p>How relational data can be represented in different formats:</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h3>JSON Format</h3>
                    <div class="json-example">
[<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"name"</span>: <span class="json-string">"Bobby Reed"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"id"</span>: <span class="json-number">1</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"email"</span>: <span class="json-string">"breed@okcu.edu"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"years"</span>: <span class="json-number">4</span><br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"name"</span>: <span class="json-string">"Hank Jones"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"id"</span>: <span class="json-number">2</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"email"</span>: <span class="json-string">"hjones@gmail.com"</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="json-key">"years"</span>: <span class="json-number">2</span><br>
&nbsp;&nbsp;}<br>
]
                    </div>
                </div>
                
                <div>
                    <h3>XML Format</h3>
                    <div class="xml-example">
<span class="xml-tag">&lt;Students&gt;</span><br>
&nbsp;&nbsp;<span class="xml-tag">&lt;Student</span> <span class="xml-attribute">Id</span>=<span class="xml-value">"1234"</span><span class="xml-tag">&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Name&gt;</span>Bobby Reed<span class="xml-tag">&lt;/Name&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Email&gt;</span>breed@okcu.edu<span class="xml-tag">&lt;/Email&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Years&gt;</span>4<span class="xml-tag">&lt;/Years&gt;</span><br>
&nbsp;&nbsp;<span class="xml-tag">&lt;/Student&gt;</span><br>
&nbsp;&nbsp;<span class="xml-tag">&lt;Student</span> <span class="xml-attribute">Id</span>=<span class="xml-value">"4567"</span><span class="xml-tag">&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Name&gt;</span>Hank Jones<span class="xml-tag">&lt;/Name&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Email&gt;</span>hjones@gmail.com<span class="xml-tag">&lt;/Email&gt;</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="xml-tag">&lt;Years&gt;</span>2<span class="xml-tag">&lt;/Years&gt;</span><br>
&nbsp;&nbsp;<span class="xml-tag">&lt;/Student&gt;</span><br>
<span class="xml-tag">&lt;/Students&gt;</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 19a: Video - Relational Model Overview -->
        <div class="slide">
            <h1>Video: Relational Model in Practice</h1>

            <div style="display: flex; justify-content: center; align-items: center; height: 70vh;">
                <iframe
                    width="960"
                    height="540"
                    src="https://www.youtube.com/embed/_UZLrD_R0T4"
                    title="Relational Model Video"
                    frameborder="0"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen
                    style="border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.3);">
                </iframe>
            </div>
        </div>

        <!-- Slide 20: Creating Relations in SQL -->
        <div class="slide">
            <h1>Creating Relations with SQL</h1>
            <p>Let's see how to implement our conceptual model in SQL:</p>

            <div class="sql-example">
                <span class="sql-comment">-- Create the Branch relation</span><br>
                <span class="sql-keyword">CREATE TABLE</span> Branch (<br>
                &nbsp;&nbsp;branchNo <span class="sql-keyword">VARCHAR</span>(4) <span class="sql-keyword">PRIMARY KEY</span>,<br>
                &nbsp;&nbsp;street <span class="sql-keyword">VARCHAR</span>(50) <span class="sql-keyword">NOT NULL</span>,<br>
                &nbsp;&nbsp;city <span class="sql-keyword">VARCHAR</span>(30) <span class="sql-keyword">NOT NULL</span>,<br>
                &nbsp;&nbsp;postcode <span class="sql-keyword">VARCHAR</span>(10)<br>
                );<br><br>

                <span class="sql-comment">-- Create the Staff relation with foreign key</span><br>
                <span class="sql-keyword">CREATE TABLE</span> Staff (<br>
                &nbsp;&nbsp;staffNo <span class="sql-keyword">VARCHAR</span>(5) <span class="sql-keyword">PRIMARY KEY</span>,<br>
                &nbsp;&nbsp;fName <span class="sql-keyword">VARCHAR</span>(20) <span class="sql-keyword">NOT NULL</span>,<br>
                &nbsp;&nbsp;lName <span class="sql-keyword">VARCHAR</span>(20) <span class="sql-keyword">NOT NULL</span>,<br>
                &nbsp;&nbsp;position <span class="sql-keyword">VARCHAR</span>(20),<br>
                &nbsp;&nbsp;sex <span class="sql-keyword">CHAR</span>(1) <span class="sql-keyword">CHECK</span> (sex <span class="sql-keyword">IN</span> ('M', 'F')),<br>
                &nbsp;&nbsp;DOB <span class="sql-keyword">DATE</span>,<br>
                &nbsp;&nbsp;salary <span class="sql-keyword">DECIMAL</span>(8,2) <span class="sql-keyword">CHECK</span> (salary > 0),<br>
                &nbsp;&nbsp;branchNo <span class="sql-keyword">VARCHAR</span>(4),<br>
                &nbsp;&nbsp;<span class="sql-keyword">FOREIGN KEY</span> (branchNo) <span class="sql-keyword">REFERENCES</span> Branch(branchNo)<br>
                );
            </div>
        </div>

        <!-- Slide 21: General Constraints -->
        <div class="slide">
            <h1>Business Rules as General Constraints</h1>
            <p>Beyond basic integrity, we often need business-specific rules:</p>

            <div class="concept-box">
                <h3>Examples of General Constraints</h3>
                <ul>
                    <li>üìä "Maximum 20 staff members per branch"</li>
                    <li>üí∞ "Manager salary must be > Assistant salary"</li>
                    <li>üìÖ "Staff must be at least 18 years old"</li>
                    <li>üéì "Students can enroll in maximum 6 courses per semester"</li>
                </ul>
            </div>

            <div class="sql-example">
                <span class="sql-comment">-- Implementing a business rule with a trigger</span><br>
                <span class="sql-keyword">CREATE TRIGGER</span> check_branch_capacity<br>
                <span class="sql-keyword">BEFORE INSERT ON</span> Staff<br>
                <span class="sql-keyword">FOR EACH ROW</span><br>
                <span class="sql-keyword">BEGIN</span><br>
                &nbsp;&nbsp;<span class="sql-keyword">DECLARE</span> staff_count <span class="sql-keyword">INT</span>;<br>
                &nbsp;&nbsp;<span class="sql-keyword">SELECT COUNT</span>(*) <span class="sql-keyword">INTO</span> staff_count<br>
                &nbsp;&nbsp;<span class="sql-keyword">FROM</span> Staff <span class="sql-keyword">WHERE</span> branchNo = NEW.branchNo;<br>
                &nbsp;&nbsp;<span class="sql-keyword">IF</span> staff_count >= 20 <span class="sql-keyword">THEN</span><br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">SIGNAL SQLSTATE</span> '45000'<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">SET MESSAGE_TEXT</span> = 'Branch capacity exceeded';<br>
                &nbsp;&nbsp;<span class="sql-keyword">END IF</span>;<br>
                <span class="sql-keyword">END</span>;
            </div>
        </div>

        <!-- Slide 22: Comprehensive Example -->
        <div class="slide">
            <h1>Putting It All Together</h1>
            <p>Design a complete relational schema for a library system:</p>

            <div class="activity-box">
                <h3>20-Minute Design Challenge</h3>
                
                <p><strong>Requirements:</strong></p>
                <ul>
                    <li>Track books, members, and loans</li>
                    <li>Books have ISBN, title, author, publication year</li>
                    <li>Members have ID, name, email, join date</li>
                    <li>Loans track who borrowed what and when</li>
                </ul>

                <p><strong>Tasks:</strong></p>
                <ol>
                    <li>Design the relations (tables)</li>
                    <li>Identify all keys (primary, foreign)</li>
                    <li>Define integrity constraints</li>
                    <li>Write the CREATE TABLE statements</li>
                    <li>Identify 3 business rules as general constraints</li>
                </ol>
            </div>
            <button data-timer="20">Start 20-Minute Timer</button>
        </div>

        <!-- Slide 23: Common Pitfalls -->
        <div class="slide">
            <h1>Common Design Pitfalls to Avoid</h1>
            
            <div class="warning-box">
                <h3>‚ö†Ô∏è Watch Out For:</h3>
                <ul style="font-size: 1.2em; line-height: 1.8;">
                    <li>üö´ <strong>Multi-valued attributes</strong> - Split into separate relations</li>
                    <li>üö´ <strong>Composite attributes as keys</strong> - Consider surrogate keys</li>
                    <li>üö´ <strong>Nullable primary keys</strong> - Violates entity integrity</li>
                    <li>üö´ <strong>Orphan foreign keys</strong> - Violates referential integrity</li>
                    <li>üö´ <strong>Order-dependent designs</strong> - Relations are sets, not lists</li>
                    <li>üö´ <strong>Redundant data</strong> - Leads to update anomalies</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Best Practice:</strong> Always validate your design against the relational model properties!
            </div>
        </div>

        <!-- Slide 24: Real-World Application -->
        <div class="slide">
            <h1>Real-World Applications</h1>
            <p>The relational model powers most of today's critical systems:</p>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="concept-box">
                    <h3>üè¶ Banking Systems</h3>
                    <p>Accounts, transactions, customers with ACID guarantees</p>
                </div>
                <div class="concept-box">
                    <h3>üè• Healthcare</h3>
                    <p>Patient records, appointments, medical history</p>
                </div>
                <div class="concept-box">
                    <h3>üõí E-commerce</h3>
                    <p>Products, orders, inventory, customer data</p>
                </div>
                <div class="concept-box">
                    <h3>üéì Education</h3>
                    <p>Student records, course registration, grades</p>
                </div>
            </div>

            <div class="tip-box" style="margin-top: 20px;">
                <strong>Industry Insight:</strong> Despite NoSQL alternatives, relational databases remain the backbone of enterprise data management due to their strong consistency guarantees and mature ecosystem.
            </div>
        </div>

        <!-- IN-CLASS EXERCISES SECTION -->

        <!-- Slide 26: Exercise Overview -->
        <div class="slide">
            <h1>In-Class Exercises <span class="emoji">üèóÔ∏è</span></h1>
            <h2>Schema Translation & Constraints <span class="timer-badge">40 minutes</span></h2>

            <div class="demo-box">
                <h3>Exercise Overview</h3>
                <p style="font-size: 1.2em;">Today, you'll practice converting conceptual schemas to relational schemas and identifying integrity constraint violations. These skills are essential for translating database designs into implementation-ready specifications.</p>
            </div>

            <div class="activity-box">
                <h3>Learning Objectives</h3>
                <ul style="font-size: 1.15em;">
                    <li>‚úÖ Convert conceptual schemas to formal relational notation</li>
                    <li>‚úÖ Identify and label Primary Keys (PK) and Foreign Keys (FK)</li>
                    <li>‚úÖ Recognize Entity, Referential, and Domain integrity constraints</li>
                    <li>‚úÖ Identify constraint violations in INSERT/UPDATE statements</li>
                    <li>‚úÖ Apply formal relational model principles</li>
                </ul>
            </div>

            <button data-timer="40">Start 40-Minute Timer</button>
        </div>

        <!-- Slide 27: Exercise 1 - Schema Translation -->
        <div class="slide">
            <h1>Exercise 1: Schema-to-Table Translation <span class="timer-badge">20 min</span></h1>
            <h2>Individual Exercise: Conceptual to Relational</h2>

            <div class="exercise-step">
                <h3>Scenario:</h3>
                <p style="font-size: 1.1em;">You've been given a conceptual schema for an online bookstore. Your task is to convert it into a formal Relational Schema with proper notation.</p>
            </div>

            <div class="demo-box">
                <h3>Conceptual Schema:</h3>
                <div class="code-example" style="font-size: 1em;">
<strong>Entity: Book</strong><br>
‚Ä¢ ISBN (unique identifier)<br>
‚Ä¢ title<br>
‚Ä¢ publication_year<br>
‚Ä¢ price<br>
‚Ä¢ publisher_id (references Publisher)<br><br>

<strong>Entity: Publisher</strong><br>
‚Ä¢ publisher_id (unique identifier)<br>
‚Ä¢ name<br>
‚Ä¢ country<br>
‚Ä¢ website<br><br>

<strong>Entity: Author</strong><br>
‚Ä¢ author_id (unique identifier)<br>
‚Ä¢ first_name<br>
‚Ä¢ last_name<br>
‚Ä¢ birth_year<br><br>

<strong>Relationship: Book_Author</strong><br>
‚Ä¢ A book can have multiple authors<br>
‚Ä¢ An author can write multiple books<br>
‚Ä¢ Tracks ISBN and author_id<br>
‚Ä¢ Also tracks author_order (1st author, 2nd author, etc.)
                </div>
            </div>
        </div>

        <!-- Slide 28: Exercise 1 - Instructions -->
        <div class="slide">
            <h1>Exercise 1: Translation Instructions</h1>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Convert to Relational Schema (10 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>Write each entity as a relation using the format: <br>
                                <code>RelationName (<span style="text-decoration: underline;">PK</span>, attribute1, attribute2, FK‚ÜíReferencedRelation)</code></li>
                            <li>Underline Primary Keys or use <strong>PK:</strong> notation</li>
                            <li>Use arrow notation (‚Üí) or label Foreign Keys as <strong>FK:</strong></li>
                            <li>Remember: Many-to-many relationships require a junction table!</li>
                        </ul>
                    </li>
                    <li><strong>Document Your Design (10 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>For each relation, write one sentence explaining its purpose</li>
                            <li>For each Foreign Key, explain what relationship it represents</li>
                            <li>Identify the primary key of the Book_Author junction table (hint: it's composite!)</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="tip-box">
                <strong>Hint:</strong> The Book_Author relationship is many-to-many, so it needs its own relation (junction table) with foreign keys to both Book and Author.
            </div>
        </div>

        <!-- Slide 29: Understanding Exercise 1 -->
        <div class="slide">
            <h1>Understanding: Schema Translation <span class="emoji">üîç</span></h1>

            <div class="demo-box">
                <h3>Expected Relational Schema:</h3>
                <div class="code-example" style="font-size: 0.95em; line-height: 1.7;">
<strong>Book</strong> (<span style="text-decoration: underline;">ISBN</span>, title, publication_year, price, publisher_id)<br>
&nbsp;&nbsp;‚Ä¢ <strong>PK:</strong> ISBN<br>
&nbsp;&nbsp;‚Ä¢ <strong>FK:</strong> publisher_id ‚Üí Publisher(publisher_id)<br><br>

<strong>Publisher</strong> (<span style="text-decoration: underline;">publisher_id</span>, name, country, website)<br>
&nbsp;&nbsp;‚Ä¢ <strong>PK:</strong> publisher_id<br><br>

<strong>Author</strong> (<span style="text-decoration: underline;">author_id</span>, first_name, last_name, birth_year)<br>
&nbsp;&nbsp;‚Ä¢ <strong>PK:</strong> author_id<br><br>

<strong>Book_Author</strong> (<span style="text-decoration: underline;">ISBN, author_id</span>, author_order)<br>
&nbsp;&nbsp;‚Ä¢ <strong>PK:</strong> (ISBN, author_id) - Composite key<br>
&nbsp;&nbsp;‚Ä¢ <strong>FK:</strong> ISBN ‚Üí Book(ISBN)<br>
&nbsp;&nbsp;‚Ä¢ <strong>FK:</strong> author_id ‚Üí Author(author_id)
                </div>
            </div>

            <div class="demo-box">
                <h3>Key Insights:</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>1:N Relationship:</strong> Book ‚Üí Publisher is represented by a FK in Book</li>
                    <li><strong>M:N Relationship:</strong> Book ‚Üî Author requires a separate junction table</li>
                    <li><strong>Composite PK:</strong> Book_Author uses both ISBN and author_id as primary key</li>
                    <li><strong>Additional Attribute:</strong> author_order in Book_Author tracks ordering of authors</li>
                </ul>
            </div>
        </div>

        <!-- Slide 30: Exercise 2 - Constraint Violations -->
        <div class="slide">
            <h1>Exercise 2: Constraint Violation Challenge <span class="timer-badge">20 min</span></h1>
            <h2>Individual Exercise: Identify Integrity Violations</h2>

            <div class="warning-box">
                <h3>Your Mission:</h3>
                <p style="font-size: 1.15em;">Given a relational schema and three problematic INSERT/UPDATE statements, identify which specific integrity constraint each statement violates.</p>
            </div>

            <div class="demo-box">
                <h3>The Schema:</h3>
                <div class="code-example" style="font-size: 0.9em;">
<strong>Department</strong> (<span style="text-decoration: underline;">dept_id</span>, dept_name, location)<br>
&nbsp;&nbsp;‚Ä¢ PK: dept_id<br>
&nbsp;&nbsp;‚Ä¢ dept_id is INTEGER, dept_name is VARCHAR(50) NOT NULL<br><br>

<strong>Employee</strong> (<span style="text-decoration: underline;">emp_id</span>, emp_name, salary, dept_id)<br>
&nbsp;&nbsp;‚Ä¢ PK: emp_id<br>
&nbsp;&nbsp;‚Ä¢ FK: dept_id ‚Üí Department(dept_id)<br>
&nbsp;&nbsp;‚Ä¢ emp_id is INTEGER, salary is DECIMAL(10,2) CHECK (salary > 0)
                </div>
            </div>
        </div>

        <!-- Slide 31: Exercise 2 - Problematic Statements -->
        <div class="slide">
            <h1>Exercise 2: The Problematic Statements</h1>

            <div class="demo-box">
                <h3>Statement 1:</h3>
                <div class="sql-example">
<span class="sql-keyword">INSERT INTO</span> Employee (emp_id, emp_name, salary, dept_id)<br>
<span class="sql-keyword">VALUES</span> (<span class="sql-keyword">NULL</span>, <span class="sql-string">'Sarah Johnson'</span>, 75000.00, 10);
                </div>
            </div>

            <div class="demo-box">
                <h3>Statement 2:</h3>
                <div class="sql-example">
<span class="sql-keyword">INSERT INTO</span> Employee (emp_id, emp_name, salary, dept_id)<br>
<span class="sql-keyword">VALUES</span> (105, <span class="sql-string">'Michael Chen'</span>, 68000.00, 99);<br>
<span class="sql-comment">-- Note: Department 99 does not exist in the Department table</span>
                </div>
            </div>

            <div class="demo-box">
                <h3>Statement 3:</h3>
                <div class="sql-example">
<span class="sql-keyword">UPDATE</span> Employee<br>
<span class="sql-keyword">SET</span> salary = -5000.00<br>
<span class="sql-keyword">WHERE</span> emp_id = 102;
                </div>
            </div>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <p>For <strong>each statement</strong>, identify:</p>
                <ol style="font-size: 1.05em;">
                    <li>Which integrity constraint is violated? (Entity, Referential, or Domain)</li>
                    <li>Why is this a violation? (2-3 sentences)</li>
                    <li>What would happen if the DBMS tried to execute this statement?</li>
                </ol>
            </div>
        </div>

        <!-- Slide 32: Understanding Exercise 2 -->
        <div class="slide">
            <h1>Understanding: Constraint Violations <span class="emoji">üîç</span></h1>

            <div class="demo-box">
                <h3>Statement 1: Entity Integrity Violation</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Constraint Type:</strong> Entity Integrity</li>
                    <li><strong>Why Violation:</strong> Attempting to insert NULL into emp_id, which is the PRIMARY KEY. Entity integrity requires that no attribute of a primary key can be NULL.</li>
                    <li><strong>What Happens:</strong> DBMS rejects the insert with error: <em>"Cannot insert NULL into primary key column"</em></li>
                    <li><strong>Rationale:</strong> Primary keys identify tuples; NULL would mean "unknown identity"</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Statement 2: Referential Integrity Violation</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Constraint Type:</strong> Referential Integrity</li>
                    <li><strong>Why Violation:</strong> The dept_id value (99) does not exist in the Department table. Foreign key values must either match an existing primary key or be NULL.</li>
                    <li><strong>What Happens:</strong> DBMS rejects the insert with error: <em>"Foreign key constraint violation"</em></li>
                    <li><strong>Rationale:</strong> Would create an orphan record - employee assigned to non-existent department</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Statement 3: Domain Constraint Violation</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Constraint Type:</strong> Domain Constraint (CHECK constraint)</li>
                    <li><strong>Why Violation:</strong> The salary value (-5000.00) violates the CHECK constraint (salary > 0). Negative salaries are not in the valid domain.</li>
                    <li><strong>What Happens:</strong> DBMS rejects the update with error: <em>"CHECK constraint violation"</em></li>
                    <li><strong>Rationale:</strong> Salary must be a positive value; negative salary makes no business sense</li>
                </ul>
            </div>
        </div>

        <!-- HOMEWORK SECTION -->

        <!-- Slide 33: Homework Overview -->
        <div class="slide">
            <h1>Homework Assignment <span class="emoji">üìù</span></h1>
            <h2>Week 4: SQL Implementation & Constraint Correction</h2>

            <div class="demo-box">
                <h3>Assignment Overview</h3>
                <p style="font-size: 1.15em;">This week's homework takes your relational schema work into implementation. You'll write SQL CREATE TABLE statements and correct constraint violations.</p>
            </div>

            <div class="warning-box">
                <h3>Due Date: <strong>Before Class Next Week</strong></h3>
                <p>Submit via Commit URL turned into D2L</p>
            </div>

            <div class="activity-box">
                <h3>Assignment Components:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Homework Extension 1:</strong> SQL CREATE TABLE Statements (50 points)</li>
                    <li><strong>Homework Extension 2:</strong> Constraint Violation Corrections (50 points)</li>
                </ol>
                <p style="margin-top: 15px; font-size: 1.1em;"><strong>Total Points: 100</strong></p>
            </div>
        </div>

        <!-- Slide 34: Homework Extension 1 -->
        <div class="slide">
            <h1>Homework Extension 1: SQL Implementation</h1>
            <h2>Building on Exercise 1 - Online Bookstore Schema</h2>

            <div class="exercise-step">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Convert the <strong>relational schema</strong> you created in Exercise 1 (Online Bookstore) into complete <strong>SQL CREATE TABLE statements</strong>.</p>
            </div>

            <div class="activity-box">
                <h3>Requirements:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>All Four Tables:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Book, Publisher, Author, Book_Author</li>
                            <li>Use appropriate data types (VARCHAR, INT, DECIMAL, etc.)</li>
                            <li>Consider reasonable length constraints (e.g., ISBN is 13 characters)</li>
                        </ul>
                    </li>
                    <li><strong>PRIMARY KEY Constraints:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Declare primary keys inline or using table-level constraint</li>
                            <li>Remember: Book_Author has a COMPOSITE primary key</li>
                        </ul>
                    </li>
                    <li><strong>FOREIGN KEY Constraints:</strong>
                        <ul style="margin-top: 8px;">
                            <li>All foreign keys must be properly declared</li>
                            <li>Use REFERENCES keyword to link to parent tables</li>
                            <li>Ensure parent tables are created before child tables</li>
                        </ul>
                    </li>
                    <li><strong>NOT NULL Constraints:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Add NOT NULL for at least ONE attribute per table (beyond PKs)</li>
                            <li>Choose attributes where NULL would not make sense (e.g., book title)</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 35: Homework Extension 1 - Example Format -->
        <div class="slide">
            <h1>SQL CREATE TABLE Example</h1>

            <div class="demo-box">
                <h3>Expected Format (Example for Publisher):</h3>
                <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-comment">-- Create Publisher table first (no dependencies)</span><br>
<span class="sql-keyword">CREATE TABLE</span> Publisher (<br>
&nbsp;&nbsp;publisher_id <span class="sql-keyword">INT PRIMARY KEY</span>,<br>
&nbsp;&nbsp;name <span class="sql-keyword">VARCHAR</span>(100) <span class="sql-keyword">NOT NULL</span>,<br>
&nbsp;&nbsp;country <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;website <span class="sql-keyword">VARCHAR</span>(255)<br>
);<br><br>

<span class="sql-comment">-- Create Book table (depends on Publisher)</span><br>
<span class="sql-keyword">CREATE TABLE</span> Book (<br>
&nbsp;&nbsp;ISBN <span class="sql-keyword">VARCHAR</span>(13) <span class="sql-keyword">PRIMARY KEY</span>,<br>
&nbsp;&nbsp;title <span class="sql-keyword">VARCHAR</span>(200) <span class="sql-keyword">NOT NULL</span>,<br>
&nbsp;&nbsp;publication_year <span class="sql-keyword">INT</span>,<br>
&nbsp;&nbsp;price <span class="sql-keyword">DECIMAL</span>(8,2) <span class="sql-keyword">CHECK</span> (price >= 0),<br>
&nbsp;&nbsp;publisher_id <span class="sql-keyword">INT</span>,<br>
&nbsp;&nbsp;<span class="sql-keyword">FOREIGN KEY</span> (publisher_id) <span class="sql-keyword">REFERENCES</span> Publisher(publisher_id)<br>
);
                </div>
            </div>

            <div class="tip-box">
                <strong>Deliverable:</strong> Submit a .sql file named <code>LastName_FirstName_Bookstore.sql</code> with all four CREATE TABLE statements in the correct order (parents before children).
            </div>
        </div>

        <!-- Slide 36: Homework Extension 2 -->
        <div class="slide">
            <h1>Homework Extension 2: Fixing Violations</h1>
            <h2>Building on Exercise 2 - Department/Employee Schema</h2>

            <div class="exercise-step">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Take the three problematic INSERT/UPDATE statements from Exercise 2 and <strong>correct them</strong> so they no longer violate any integrity constraints.</p>
            </div>

            <div class="activity-box">
                <h3>Requirements:</h3>
                <p style="font-size: 1.05em;">For <strong>each of the three statements</strong>, provide:</p>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>The Corrected SQL Statement:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Rewrite the statement so it would execute successfully</li>
                            <li>Use realistic values that satisfy all constraints</li>
                            <li>Ensure data types and formats are correct</li>
                        </ul>
                    </li>
                    <li><strong>Explanation of Changes (3-4 sentences):</strong>
                        <ul style="margin-top: 8px;">
                            <li>What specific change did you make?</li>
                            <li>Why does this change resolve the constraint violation?</li>
                            <li>What assumptions did you make (e.g., "I assumed department 10 exists")?</li>
                        </ul>
                    </li>
                    <li><strong>Alternative Solutions (1-2 sentences):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Is there another way to fix this violation?</li>
                            <li>Example: For referential integrity violations, could you insert the missing parent record?</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 37: Homework Extension 2 - Example -->
        <div class="slide">
            <h1>Constraint Correction Example</h1>

            <div class="demo-box">
                <h3>Original (Violates Entity Integrity):</h3>
                <div class="sql-example">
<span class="sql-keyword">INSERT INTO</span> Employee (emp_id, emp_name, salary, dept_id)<br>
<span class="sql-keyword">VALUES</span> (<span class="sql-keyword">NULL</span>, <span class="sql-string">'Sarah Johnson'</span>, 75000.00, 10);
                </div>
            </div>

            <div class="demo-box">
                <h3>Corrected Statement:</h3>
                <div class="sql-example">
<span class="sql-keyword">INSERT INTO</span> Employee (emp_id, emp_name, salary, dept_id)<br>
<span class="sql-keyword">VALUES</span> (105, <span class="sql-string">'Sarah Johnson'</span>, 75000.00, 10);
                </div>
            </div>

            <div class="demo-box">
                <h3>Explanation:</h3>
                <p style="font-size: 1.05em; line-height: 1.7;">
                    I changed the emp_id from NULL to 105, which is a valid integer value. This resolves the entity integrity violation because primary keys cannot contain NULL values. The DBMS requires every tuple to have a unique, non-NULL identifier. I assumed that emp_id 105 is not already in use; in practice, I would query the database first to find an available ID or use an AUTO_INCREMENT feature.
                </p>
                <p style="font-size: 1.05em; line-height: 1.7; margin-top: 10px;">
                    <strong>Alternative Solution:</strong> Use AUTO_INCREMENT for emp_id so the DBMS automatically assigns the next available ID, eliminating the need to specify it manually.
                </p>
            </div>
        </div>

        <!-- Slide 38: Submission Requirements -->
        <div class="slide">
            <h1>Submission Requirements <span class="emoji">‚úÖ</span></h1>

            <div class="demo-box">
                <h3>Format & Submission:</h3>
                <ul style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>File Format:</strong> Markdown document (.md)</li>
                    <li><strong>File Naming:</strong> LastName_FirstName_Week4_Homework.md</li>
                    <li><strong>Repository:</strong> Create file in your GitHub homework repository</li>
                    <li><strong>Submission Platform:</strong> Submit commit URL to D2L</li>
                    <li><strong>Due Date:</strong> Before class begins next week</li>
                </ul>
            </div>

            <div class="activity-box">
                <h3>Markdown Document Structure:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Header:</strong> Your name, date, course number, "Week 4 Homework"</li>
                    <li><strong>Section 1:</strong> Extension 1 - Brief explanation of your SQL choices (data types, constraint decisions)</li>
                    <li><strong>Section 2:</strong> Extension 2 - Corrected statements with explanations (one subsection per statement)</li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Grading Criteria:</h3>
                <table class="table-schema" style="font-size: 0.95em;">
                    <tr>
                        <th>Component</th>
                        <th>Points</th>
                        <th>Key Criteria</th>
                    </tr>
                    <tr>
                        <td><strong>SQL CREATE TABLE</strong></td>
                        <td>50</td>
                        <td>Syntax correctness (20), Constraint completeness (20), Design quality (10)</td>
                    </tr>
                    <tr>
                        <td><strong>Constraint Corrections</strong></td>
                        <td>50</td>
                        <td>Correctness of fixes (30), Explanation quality (15), Alternative solutions (5)</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Slide 39: Summary -->
        <div class="slide">
            <h1>Today's Takeaways <span class="emoji">üéì</span></h1>
            <h2>You Can Now:</h2>
            <ul style="font-size: 1.3em; line-height: 2;">
                <li>‚úÖ Define and identify relations, attributes, tuples, and domains</li>
                <li>‚úÖ Distinguish between different types of keys</li>
                <li>‚úÖ Apply entity and referential integrity constraints</li>
                <li>‚úÖ Understand the mathematical foundation of databases</li>
                <li>‚úÖ Convert conceptual designs to relational schemas</li>
                <li>‚úÖ Recognize and avoid common design pitfalls</li>
            </ul>

            <div class="demo-box" style="margin-top: 30px;">
                <p><strong>Next Lecture:</strong> Relational Algebra - Query Operations</p>
                <p><strong>Homework:</strong> SQL CREATE TABLE statements & constraint corrections (due next week)</p>
                <p><strong>Reading:</strong> Chapter 4 - The Relational Model (Pages 89-132)</p>
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">40</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // Add any specific interactions for this lecture
        document.addEventListener('slidechange', (e) => {
            console.log(`Slide ${e.detail.currentSlide + 1} of ${e.detail.totalSlides}`);
            
            // Highlight code examples when shown
            if (e.detail.currentSlide === 19) { // SQL creation slide
                const codeBlocks = document.querySelectorAll('.sql-example');
                codeBlocks.forEach(block => {
                    block.style.animation = 'slideIn 0.5s ease-in-out';
                });
            }
        });

        // Add keyboard shortcuts info
        document.addEventListener('keydown', (e) => {
            if (e.key === '?' && e.shiftKey) {
                alert('Keyboard Shortcuts:\n\n' +
                      '‚Üê / ‚Üí : Navigate slides\n' +
                      'Space: Next slide\n' +
                      'F: Fullscreen\n' +
                      'T: Toggle theme\n' +
                      'H: Home (first slide)\n' +
                      'E: End (last slide)');
            }
        });
    </script>
</body>
</html>