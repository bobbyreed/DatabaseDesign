<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Relational Algebra - CSCI 5603</title>
    
    <!-- Database Design Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <!-- Import Courier Prime for analog feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lecture-Specific Styles -->
    <style>
        /* Override font for analog feel */
        body, .slide, h1, h2, h3, p, li {
            font-family: 'Courier Prime', 'IBM Plex Mono', 'Courier New', monospace !important;
        }
        
        /* Database-specific styling */
        .erd-diagram {
            background: var(--bg-accent);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier Prime', monospace;
        }

        /* SQL syntax highlighting classes now in presentation.css */

        .algebra-notation {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 20px;
            border-radius: 10px;
            font-family: 'IBM Plex Mono', monospace;
            margin: 20px 0;
            font-size: 1.2em;
            text-align: center;
        }
        
        .operation-symbol {
            color: var(--ocu-yellow);
            font-size: 1.3em;
            font-weight: bold;
        }
        
        .result-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--slide-bg);
        }
        
        .result-table th {
            background: var(--ocu-true-blue);
            color: white;
            padding: 10px;
            text-align: left;
            font-weight: 600;
        }
        
        .result-table td {
            border: 1px solid var(--border-color);
            padding: 10px;
        }
        
        .result-table tr:nth-child(even) {
            background: var(--bg-accent);
        }
        
        .example-box {
            background: var(--bg-secondary);
            border-left: 4px solid var(--ocu-green);
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
        
        .activity-box {
            background: var(--warning-bg);
            border: 2px dashed var(--warning-border);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        
        .discussion-prompt {
            background: var(--success-bg);
            border-left: 4px solid var(--success-border);
            padding: 15px;
            margin: 20px 0;
            font-style: italic;
        }
        
        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .highlight {
            background: var(--ocu-yellow);
            color: var(--ocu-black);
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <!-- Theme toggle will be automatically added by JavaScript -->

    <!-- Presentation Container -->
    <div class="presentation-container">
        <!-- Timer display with home button -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">Lecture 05: Relational Algebra
                 <button class="home"><a href="../../index.html">Home</a></button>
            </span>
        </div>
        <!-- Slide 1: Title Slide -->
        <div class="slide active">
            <h2>Relational Algebra <span class="emoji">üîÑ</span></h2>
            <p style="font-size: 1.5em; margin-top: 40px;">CSCI 5603 - Database Design</p>
            <p style="font-size: 1.3em;">Week 3, Lecture 5</p>
            <p style="font-size: 1.1em; margin-top: 20px;">bobby reed</p>
            <p style="margin-top: auto; font-style: italic;">Mastering the mathematical foundation of database queries!</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Learning Objectives</h1>
            <ul style="font-size: 1.4em; line-height: 2;">
                <li>üéØ Understand the theoretical foundation of relational databases</li>
                <li>üéØ Master the five basic relational algebra operations</li>
                <li>üéØ Apply join operations to combine relations</li>
                <li>üéØ Solve complex queries using algebraic expressions</li>
                <li>üéØ Connect relational algebra to SQL operations</li>
            </ul>
            <div class="tip-box">
                <strong>Pro Tip:</strong> Relational algebra is the mathematical foundation for SQL. Master this, and SQL becomes intuitive!
            </div>
        </div>

        <!-- ==================== INTELLIGENT KEY EXERCISE ==================== -->

        <!-- Slide 3: What Are Intelligent Keys? -->
        <div class="slide">
            <h1>Refresh: Intelligent Keys <span class="emoji">üîë</span></h1>
            <h2>Keys with Built-In Business Meaning</h2>

            <div class="tip-box">
                <strong>üìö Continuation from Lecture 4:</strong> By popular request, we're expanding our discussion of intelligent keys from last class before diving into relational algebra. This hands-on exercise will reinforce your understanding of key design concepts!
            </div>

            <div class="example-box">
                <h3>What is an Intelligent Key?</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">An <strong>intelligent key</strong> is a primary key that has <em>business meaning</em> encoded directly into its value. Instead of using arbitrary numbers, the key itself conveys information about the record. An <strong>intelligent key</strong> is always a natural key, but is derived from multiple attributes.</p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div class="demo-box">
                    <h3>‚ùå Surrogate Key (No Meaning)</h3>
                    <div class="sql-example" style="font-size: 0.85em; margin-top: 10px;">
                        vehicle_id: 1<br>
                        vehicle_id: 2<br>
                        vehicle_id: 3
                    </div>
                    <p style="font-size: 0.95em; margin-top: 10px;">These numbers tell you <strong>nothing</strong> about the vehicles. You must query the table to learn anything.</p>
                </div>

                <div class="success-box">
                    <h3>‚úÖ Intelligent Key (Has Meaning)</h3>
                    <div class="sql-example" style="font-size: 0.85em; margin-top: 10px;">
                        vehicle_id: DFW-SUV-001<br>
                        vehicle_id: LAX-SEDAN-042<br>
                        vehicle_id: ORD-TRUCK-015
                    </div>
                    <p style="font-size: 0.95em; margin-top: 10px;"><strong>Instant information:</strong> Location, vehicle type, and sequence number‚Äîall from the key!</p>
                </div>
            </div>

            <div class="concept-box" style="margin-top: 20px;">
                <h3>Structure of an Intelligent Key</h3>
                <p style="font-size: 1.1em; line-height: 1.7;">Intelligent keys typically combine multiple pieces of information with separators:</p>
                <ul style="font-size: 1.05em; line-height: 1.6; margin-top: 10px;">
                    <li><strong>Location Code</strong> (e.g., DFW = Dallas, LAX = Los Angeles)</li>
                    <li><strong>Category/Type</strong> (e.g., SUV, SEDAN, TRUCK)</li>
                    <li><strong>Sequential Number</strong> (e.g., 001, 042, 015)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 4: Exercise Setup -->
        <div class="slide">
            <h1>In-Class Exercise: Add Intelligent Keys <span class="emoji">üíª</span></h1>
            <h2>Enhancing car_rental_db from Lecture 4</h2>

            <div class="activity-box">
                <h3>Your Mission</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">We're going to add an intelligent key system to the <code>Vehicles</code> table from your car_rental_db. Currently, vehicles just have a numeric <code>vehicle_id</code>. We'll add a human-readable identifier that tells us location and vehicle type at a glance!</p>
            </div>

            <div class="demo-box">
                <h3>What We'll Build</h3>
                <p style="font-size: 1.1em;">A new column called <code>vehicle_code</code> with this format:</p>
                <div class="sql-example" style="font-size: 0.95em; margin-top: 10px;">
                    <strong>Format:</strong> [LOCATION]-[CATEGORY]-[NUMBER]<br><br>
                    <strong>Examples:</strong><br>
                    DFW-SUV-001 ‚Üí Dallas SUV #1<br>
                    LAX-SEDAN-023 ‚Üí Los Angeles Sedan #23<br>
                    NYC-TRUCK-007 ‚Üí New York Truck #7
                </div>
            </div>

            <div class="warning-box">
                <h3>Before You Start:</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li>‚úÖ Make sure you have your <code>car_rental_db</code> from Lecture 4</li>
                    <li>‚úÖ You should have tables: Locations, Vehicles, Customers, Rentals</li>
                    <li>‚úÖ If not, quickly recreate the Vehicles and Locations tables</li>
                </ul>
            </div>

            <button data-timer="20">Start 20-Minute Exercise Timer</button>
        </div>

        <!-- Slide 5: Full Implementation with Explanation -->
        <div class="slide">
            <h1>Solution: Intelligent Key Implementation <span class="emoji">üîß</span></h1>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <div class="sql-example" style="font-size: 0.75em;">
                    <span class="sql-comment">-- Step 1: Add the new column</span><br>
                    <span class="sql-keyword">ALTER TABLE</span> Vehicles<br>
                    <span class="sql-keyword">ADD COLUMN</span> vehicle_code <span class="sql-keyword">VARCHAR</span>(50) <span class="sql-keyword">UNIQUE</span>;<br><br>

                    <span class="sql-comment">-- Step 2: Create a function to generate codes</span><br>
                    <span class="sql-keyword">CREATE OR REPLACE FUNCTION</span> generate_vehicle_code(<br>
                    &nbsp;&nbsp;loc_code <span class="sql-keyword">VARCHAR</span>,<br>
                    &nbsp;&nbsp;category <span class="sql-keyword">VARCHAR</span><br>
                    ) <span class="sql-keyword">RETURNS VARCHAR AS</span> $$<br>
                    <span class="sql-keyword">DECLARE</span><br>
                    &nbsp;&nbsp;next_num <span class="sql-keyword">INTEGER</span>;<br>
                    <span class="sql-keyword">BEGIN</span><br>
                    &nbsp;&nbsp;<span class="sql-comment">-- Find highest number for this combo</span><br>
                    &nbsp;&nbsp;<span class="sql-keyword">SELECT COALESCE</span>(<span class="sql-keyword">MAX</span>(<span class="sql-keyword">CAST</span>(<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">SUBSTRING</span>(vehicle_code <span class="sql-keyword">FROM</span> <span class="sql-string">'\d+$'</span>) <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">AS INTEGER</span>)), 0) + 1<br>
                    &nbsp;&nbsp;<span class="sql-keyword">INTO</span> next_num<br>
                    &nbsp;&nbsp;<span class="sql-keyword">FROM</span> Vehicles<br>
                    &nbsp;&nbsp;<span class="sql-keyword">WHERE</span> vehicle_code <span class="sql-keyword">LIKE</span> loc_code || <span class="sql-string">'-'</span> || category || <span class="sql-string">'-%'</span>;<br><br>

                    &nbsp;&nbsp;<span class="sql-comment">-- Return formatted code</span><br>
                    &nbsp;&nbsp;<span class="sql-keyword">RETURN</span> loc_code || <span class="sql-string">'-'</span> || category || <span class="sql-string">'-'</span> || <br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">LPAD</span>(next_num::<span class="sql-keyword">TEXT</span>, 3, <span class="sql-string">'0'</span>);<br>
                    <span class="sql-keyword">END</span>;<br>
                    $$ <span class="sql-keyword">LANGUAGE</span> plpgsql;
                </div>

                <div class="demo-box">
                    <h3>Code Explanation</h3>
                    <ul style="font-size: 0.9em; line-height: 1.6;">
                        <li><strong>ALTER TABLE:</strong> Adds new UNIQUE column to store codes</li>
                        <li><strong>COALESCE:</strong> Returns 0 if no matches found (first vehicle)</li>
                        <li><strong>SUBSTRING + REGEX:</strong> Extracts the number part from existing codes</li>
                        <li><strong>LPAD:</strong> Pads numbers to 3 digits (001, 002, etc.)</li>
                        <li><strong>|| operator:</strong> String concatenation in PostgreSQL</li>
                    </ul>

                    <h3 style="margin-top: 15px;">Using the Function</h3>
                    <div class="sql-example" style="font-size: 0.75em; margin-top: 8px;">
                        <span class="sql-comment">-- Generate code when inserting</span><br>
                        <span class="sql-keyword">INSERT INTO</span> Vehicles (vehicle_code, make, model, category, location_id)<br>
                        <span class="sql-keyword">VALUES</span> (<br>
                        &nbsp;&nbsp;generate_vehicle_code(<span class="sql-string">'DFW'</span>, <span class="sql-string">'SUV'</span>),<br>
                        &nbsp;&nbsp;<span class="sql-string">'Toyota'</span>, <span class="sql-string">'RAV4'</span>, <span class="sql-string">'SUV'</span>, 1<br>
                        );
                    </div>
                </div>
            </div>

            <div class="success-box" style="margin-top: 15px;">
                <h3>Result:</h3>
                <p style="font-size: 1.05em;">Each vehicle now has a code like <code>DFW-SUV-001</code> that's unique, human-readable, and carries business meaning!</p>
            </div>
        </div>

        <!-- Slide 6: Real-World Examples -->
        <div class="slide">
            <h1>Real-World Use Cases for Intelligent Keys <span class="emoji">üåç</span></h1>

            <div class="example-box">
                <h3>1. Airlines: Flight Numbers</h3>
                <p style="font-size: 1.05em; line-height: 1.7;"><strong>Example:</strong> AA2315</p>
                <ul style="font-size: 0.95em; margin-left: 20px;">
                    <li><strong>AA</strong> = American Airlines (carrier code)</li>
                    <li><strong>2315</strong> = Flight number (often indicates route/schedule)</li>
                    <li><strong>Why useful:</strong> Passengers and staff instantly know the airline. Gate agents can sort flights by carrier.</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>2. Retail: Product SKUs</h3>
                <p style="font-size: 1.05em; line-height: 1.7;"><strong>Example:</strong> ELEC-LAPT-15IN-HP-001</p>
                <ul style="font-size: 0.95em; margin-left: 20px;">
                    <li><strong>ELEC</strong> = Electronics department</li>
                    <li><strong>LAPT</strong> = Laptop category</li>
                    <li><strong>15IN</strong> = 15-inch screen size</li>
                    <li><strong>HP</strong> = Brand (Hewlett-Packard)</li>
                    <li><strong>001</strong> = Sequential inventory number</li>
                    <li><strong>Why useful:</strong> Warehouse workers can route items to correct areas. Inventory reports group logically.</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>3. Healthcare: Patient Medical Record Numbers</h3>
                <p style="font-size: 1.05em; line-height: 1.7;"><strong>Example:</strong> 2024-CARDIO-012345</p>
                <ul style="font-size: 0.95em; margin-left: 20px;">
                    <li><strong>2024</strong> = Year of first visit</li>
                    <li><strong>CARDIO</strong> = Primary department/specialty</li>
                    <li><strong>012345</strong> = Patient sequence number</li>
                    <li><strong>Why useful:</strong> Medical staff can quickly identify department and approximate patient history length.</li>
                </ul>
            </div>

            <div class="example-box">
                <h3>4. Government: License Plate Numbers</h3>
                <p style="font-size: 1.05em; line-height: 1.7;"><strong>Example:</strong> TX-ABC-1234</p>
                <ul style="font-size: 0.95em; margin-left: 20px;">
                    <li><strong>TX</strong> = Texas (state code)</li>
                    <li><strong>ABC-1234</strong> = Unique identifier within state</li>
                    <li><strong>Why useful:</strong> Law enforcement instantly knows jurisdiction. DMV systems partition by state.</li>
                </ul>
            </div>

            <div class="warning-box" style="margin-top: 20px;">
                <h3>‚ö†Ô∏è When NOT to Use Intelligent Keys</h3>
                <ul style="font-size: 1.0em; line-height: 1.6;">
                    <li><strong>Frequently changing data:</strong> If business rules change (e.g., reorg departments), keys become outdated</li>
                    <li><strong>High-volume systems:</strong> Generating complex keys can slow inserts in high-transaction environments</li>
                    <li><strong>Privacy concerns:</strong> Keys that reveal too much information can be a security risk</li>
                    <li><strong>Simple applications:</strong> For small systems, surrogate keys (just integers) are simpler and faster</li>
                </ul>
            </div>
        </div>

        <!-- Slide 7: Historical Context -->
        <div class="slide">
            <h1>Historical Context <span class="emoji">üìú</span></h1>
            <h2>Codd's Mathematical Foundation</h2>

            <div class="example-box">
                <h3>Codd's Formal Foundation (1970, 1972)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">E.F. Codd introduced Relational Algebra and Relational Calculus in his early papers (1970, 1972) to provide a formal, mathematical basis for manipulating data. This mathematical foundation was essential for two critical purposes: proving a query language's theoretical power and enabling systematic query optimization.</p>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> Relational Algebra isn't just academic theory‚Äîit's the foundation that enables modern database query optimizers to automatically find the most efficient way to execute your SQL queries. Every SQL statement you write is transformed into relational algebra expressions behind the scenes.
            </div>
        </div>

        <!-- Slide 8: Introduction to Relational Algebra -->
        <div class="slide">
            <h1>What is Relational Algebra?</h1>
            <p>A theoretical language with operations that work on one or more relations to define another relation without changing the original relations.</p>
            
            <div class="example-box">
                <h3>Key Characteristics:</h3>
                <ul>
                    <li>Both operands and results are relations</li>
                    <li>Output from one operation can become input to another</li>
                    <li>Allows expressions to be nested (closure property)</li>
                    <li>Procedural language - defines both what and how</li>
                </ul>
            </div>
            
            <div class="discussion-prompt">
                üí≠ Discussion: How does this differ from SQL, which is declarative?
            </div>
        </div>

        <!-- Slide 9: Five Basic Operations -->
        <div class="slide">
            <h1>The Five Basic Operations</h1>
            
            <div class="two-column">
                <div>
                    <h3>1. Selection (œÉ)</h3>
                    <p>Selects rows that satisfy a condition</p>
                    
                    <h3>2. Projection (‚àè)</h3>
                    <p>Selects specific columns</p>
                    
                    <h3>3. Cartesian Product (√ó)</h3>
                    <p>Combines every row from two relations</p>
                </div>
                <div>
                    <h3>4. Union (‚à™)</h3>
                    <p>Combines tuples from two relations</p>
                    
                    <h3>5. Set Difference (‚àí)</h3>
                    <p>Tuples in one relation but not another</p>
                </div>
            </div>
            
            <div class="tip-box">
                <strong>Remember:</strong> These five operations can express ANY relational algebra query!
            </div>
        </div>

        <!-- Slide 10: Selection Operation -->
        <div class="slide">
            <h1>Selection Operation (œÉ)</h1>
            <p>Works on a single relation R and defines a relation that contains only those tuples of R that satisfy the specified condition (predicate).</p>
            
            <div class="algebra-notation">
                <span class="operation-symbol">œÉ</span><sub>predicate</sub>(R)
            </div>
            
            <div class="example-box">
                <h3>Example: Find all staff with salary > 10000</h3>
                <div class="algebra-notation">
                    œÉ<sub>salary > 10000</sub>(Staff)
                </div>
            </div>
            
            <table class="result-table">
                <tr>
                    <th>staffNo</th><th>fName</th><th>lName</th><th>salary</th>
                </tr>
                <tr>
                    <td>SL21</td><td>John</td><td>White</td><td>30000</td>
                </tr>
                <tr>
                    <td>SG37</td><td>Ann</td><td>Beech</td><td>12000</td>
                </tr>
                <tr>
                    <td>SG14</td><td>David</td><td>Ford</td><td>18000</td>
                </tr>
                <tr>
                    <td>SG5</td><td>Susan</td><td>Brand</td><td>24000</td>
                </tr>
            </table>
        </div>

        <!-- Slide 11: Projection Operation -->
        <div class="slide">
            <h1>Projection Operation (‚àè)</h1>
            <p>Works on a single relation R and defines a relation that contains a vertical subset of R, extracting the values of specified attributes and eliminating duplicates.</p>
            
            <div class="algebra-notation">
                <span class="operation-symbol">‚àè</span><sub>col1, col2, ..., coln</sub>(R)
            </div>
            
            <div class="example-box">
                <h3>Example: List all staff numbers and salaries</h3>
                <div class="algebra-notation">
                    ‚àè<sub>staffNo, salary</sub>(Staff)
                </div>
            </div>
            
            <div class="tip-box">
                <strong>Important:</strong> Projection removes duplicate rows automatically!
            </div>
            
            <div class="activity-box">
                <strong>üéØ Quick Exercise:</strong> Write an expression to get unique city names from PropertyForRent relation
            </div>
        </div>

        <!-- Slide 12: Combining Selection and Projection -->
        <div class="slide">
            <h1>Combining Operations</h1>
            <p>We can combine selection and projection for more complex queries!</p>
            
            <div class="example-box">
                <h3>Example: List names and salaries of staff earning > 10000</h3>
                <div class="algebra-notation">
                    ‚àè<sub>staffNo, fName, lName, salary</sub>(œÉ<sub>salary > 10000</sub>(Staff))
                </div>
                
                <p style="margin-top: 20px;"><strong>Read from inside out:</strong></p>
                <ol>
                    <li>First apply selection: œÉ<sub>salary > 10000</sub>(Staff)</li>
                    <li>Then apply projection to the result</li>
                </ol>
            </div>
            
            <div class="discussion-prompt">
                üí≠ Discussion: How would this look in SQL?
            </div>
        </div>

        <!-- Slide 13: Union Operation -->
        <div class="slide">
            <h1>Union Operation (‚à™)</h1>
            <p>Union of two relations R and S defines a relation containing all tuples of R, or S, or both, with duplicates eliminated.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">‚à™</span> S
            </div>
            
            <div class="tip-box">
                <strong>Union Compatibility Required:</strong>
                <ul>
                    <li>Same number of attributes</li>
                    <li>Corresponding attributes must have same domains</li>
                </ul>
            </div>
            
            <div class="example-box">
                <h3>Example: List all cities where there is either a branch or a property</h3>
                <div class="algebra-notation">
                    ‚àè<sub>city</sub>(Branch) ‚à™ ‚àè<sub>city</sub>(PropertyForRent)
                </div>
            </div>
        </div>

        <!-- Slide 14: Set Difference Operation -->
        <div class="slide">
            <h1>Set Difference Operation (‚àí)</h1>
            <p>Defines a relation consisting of tuples in relation R but not in S.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">‚àí</span> S
            </div>
            
            <div class="example-box">
                <h3>Example: List cities where there is a branch but no properties</h3>
                <div class="algebra-notation">
                    ‚àè<sub>city</sub>(Branch) ‚àí ‚àè<sub>city</sub>(PropertyForRent)
                </div>
            </div>
            
            <div class="tip-box">
                <strong>Note:</strong> R and S must be union-compatible!
            </div>
            
            <div class="activity-box">
                <strong>üéØ Class Activity (5 min):</strong> 
                <p>Given two relations Students(id, name) and Graduates(id, name), write an expression to find students who haven't graduated yet.</p>
            </div>
        </div>

        <!-- Slide 15: Intersection Operation -->
        <div class="slide">
            <h1>Intersection Operation (‚à©)</h1>
            <p>Defines a relation consisting of tuples that are in both R and S.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">‚à©</span> S
            </div>
            
            <p style="margin-top: 30px;"><strong>Can be expressed using basic operations:</strong></p>
            <div class="algebra-notation">
                R ‚à© S = R ‚àí (R ‚àí S)
            </div>
            
            <div class="example-box">
                <h3>Example: List cities with both branches and properties</h3>
                <div class="algebra-notation">
                    ‚àè<sub>city</sub>(Branch) ‚à© ‚àè<sub>city</sub>(PropertyForRent)
                </div>
            </div>
        </div>

        <!-- Slide 16: Cartesian Product -->
        <div class="slide">
            <h1>Cartesian Product (√ó)</h1>
            <p>Defines a relation that is the concatenation of every tuple of relation R with every tuple of relation S.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">√ó</span> S
            </div>
            
            <div class="tip-box">
                <strong>Result Size:</strong> If R has I tuples and S has J tuples, R √ó S has I √ó J tuples
            </div>
            
            <div class="example-box">
                <h3>Example with Small Relations:</h3>
                <div class="two-column">
                    <div>
                        <strong>Client (3 rows)</strong>
                        <table class="result-table" style="font-size: 0.9em;">
                            <tr><th>clientNo</th><th>fName</th></tr>
                            <tr><td>CR76</td><td>John</td></tr>
                            <tr><td>CR56</td><td>Aline</td></tr>
                            <tr><td>CR62</td><td>Mary</td></tr>
                        </table>
                    </div>
                    <div>
                        <strong>Viewing (2 rows)</strong>
                        <table class="result-table" style="font-size: 0.9em;">
                            <tr><th>clientNo</th><th>propertyNo</th></tr>
                            <tr><td>CR76</td><td>PG4</td></tr>
                            <tr><td>CR56</td><td>PA14</td></tr>
                        </table>
                    </div>
                </div>
                <p>Result: 3 √ó 2 = 6 rows (every combination)</p>
            </div>
        </div>

        <!-- Slide 17: Introduction to Joins -->
        <div class="slide">
            <h1>Join Operations Overview</h1>
            <p>Join is a derivative of Cartesian product - it's more useful!</p>
            
            <div class="example-box">
                <h3>Types of Joins:</h3>
                <ul style="font-size: 1.2em; line-height: 1.8;">
                    <li><strong>Theta Join (Œ∏-join):</strong> Join with any condition</li>
                    <li><strong>Equijoin:</strong> Theta join where condition uses only =</li>
                    <li><strong>Natural Join (‚ãà):</strong> Equijoin on all common attributes</li>
                    <li><strong>Outer Join:</strong> Preserves unmatched tuples</li>
                    <li><strong>Semijoin (‚ãâ):</strong> Returns only matching tuples from left relation</li>
                </ul>
            </div>
            
            <div class="tip-box">
                <strong>Performance Note:</strong> Join is one of the most expensive operations in RDBMS!
            </div>
        </div>

        <!-- Slide 18: Theta Join -->
        <div class="slide">
            <h1>Theta Join (Œ∏-Join)</h1>
            <p>Defines a relation containing tuples satisfying a predicate F from the Cartesian product of R and S.</p>
            
            <div class="algebra-notation">
                R ‚ãà<sub>F</sub> S = œÉ<sub>F</sub>(R √ó S)
            </div>
            
            <div class="example-box">
                <h3>Example: Join Client and Viewing where Client.clientNo = Viewing.clientNo</h3>
                <div class="algebra-notation">
                    Client ‚ãà<sub>Client.clientNo = Viewing.clientNo</sub> Viewing
                </div>
            </div>
            
            <table class="result-table">
                <tr>
                    <th>Client.clientNo</th><th>fName</th><th>lName</th><th>Viewing.clientNo</th><th>propertyNo</th><th>comment</th>
                </tr>
                <tr>
                    <td>CR76</td><td>John</td><td>Kay</td><td>CR76</td><td>PG4</td><td>too remote</td>
                </tr>
                <tr>
                    <td>CR56</td><td>Aline</td><td>Stewart</td><td>CR56</td><td>PA14</td><td>too small</td>
                </tr>
            </table>
        </div>

        <!-- Slide 19: Natural Join -->
        <div class="slide">
            <h1>Natural Join (‚ãà)</h1>
            <p>An Equijoin over all common attributes, with one occurrence of each common attribute eliminated.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">‚ãà</span> S
            </div>
            
            <div class="example-box">
                <h3>Example: Natural join of Client and Viewing</h3>
                <p>Common attribute: clientNo (appears only once in result)</p>
            </div>
            
            <table class="result-table">
                <tr>
                    <th>clientNo</th><th>fName</th><th>lName</th><th>propertyNo</th><th>comment</th>
                </tr>
                <tr>
                    <td>CR76</td><td>John</td><td>Kay</td><td>PG4</td><td>too remote</td>
                </tr>
                <tr>
                    <td>CR56</td><td>Aline</td><td>Stewart</td><td>PA14</td><td>too small</td>
                </tr>
            </table>
            
            <div class="discussion-prompt">
                üí≠ Discussion: When would you use Natural Join vs Theta Join?
            </div>
        </div>

        <!-- Slide 20: Outer Joins -->
        <div class="slide">
            <h1>Outer Join Operations</h1>
            <p>Preserves tuples that would be lost in a regular join</p>
            
            <div class="two-column">
                <div>
                    <h3>Left Outer Join (‚üï)</h3>
                    <p>Keeps all tuples from left relation</p>
                    <div class="algebra-notation" style="font-size: 1em;">
                        R ‚üï S
                    </div>
                </div>
                <div>
                    <h3>Right Outer Join (‚üñ)</h3>
                    <p>Keeps all tuples from right relation</p>
                    <div class="algebra-notation" style="font-size: 1em;">
                        R ‚üñ S
                    </div>
                </div>
            </div>
            
            <h3 style="margin-top: 30px;">Full Outer Join (‚üó)</h3>
            <p>Keeps all tuples from both relations</p>
            <div class="algebra-notation">
                R ‚üó S
            </div>
            
            <div class="tip-box">
                <strong>NULL values:</strong> Used for attributes where no match exists
            </div>
        </div>

        <!-- Slide 21: Semijoin -->
        <div class="slide">
            <h1>Semijoin (‚ãâ)</h1>
            <p>Returns tuples from R that participate in the join with S</p>
            
            <div class="algebra-notation">
                R ‚ãâ<sub>F</sub> S = ‚àè<sub>A</sub>(R ‚ãà<sub>F</sub> S)
            </div>
            <p style="text-align: center;">where A is the set of all attributes in R</p>
            
            <div class="example-box">
                <h3>Use Case: Distributed Databases</h3>
                <p>Reduces the amount of data transferred between sites</p>
                <ul>
                    <li>Send only the join attributes from S to R's site</li>
                    <li>Perform semijoin locally</li>
                    <li>Send only matching tuples back</li>
                </ul>
            </div>
            
            <div class="activity-box">
                <strong>üéØ Think-Pair-Share (3 min):</strong> 
                <p>How could semijoin optimize a query across two database servers?</p>
            </div>
        </div>

        <!-- Slide 22: Division Operation -->
        <div class="slide">
            <h1>Division Operation (√∑)</h1>
            <p>Defines a relation over attributes C that consists of tuples from R that match every tuple in S.</p>
            
            <div class="algebra-notation">
                R <span class="operation-symbol">√∑</span> S
            </div>
            
            <div class="example-box">
                <h3>Classic Example: "Find clients who have viewed ALL properties with 3 rooms"</h3>
                <ol>
                    <li>R = (clientNo, propertyNo) from Viewing</li>
                    <li>S = propertyNo where rooms = 3</li>
                    <li>Result: clientNo who viewed all properties in S</li>
                </ol>
            </div>
            
            <p style="margin-top: 30px;"><strong>Expressed using basic operations:</strong></p>
            <div class="algebra-notation" style="font-size: 0.9em;">
                T1 ‚Üê ‚àè<sub>C</sub>(R)<br>
                T2 ‚Üê ‚àè<sub>C</sub>((S √ó T1) ‚àí R)<br>
                T ‚Üê T1 ‚àí T2
            </div>
        </div>

        <!-- Slide 23: Complex Query Example -->
        <div class="slide">
            <h1>Complex Query Example</h1>
            <p><strong>Query:</strong> "Find the names of staff who work in London branches and manage properties with rent > 500"</p>
            
            <div class="example-box">
                <h3>Step-by-step breakdown:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li>Find London branches: œÉ<sub>city='London'</sub>(Branch)</li>
                    <li>Find staff in London: Staff ‚ãà œÉ<sub>city='London'</sub>(Branch)</li>
                    <li>Find expensive properties: œÉ<sub>rent>500</sub>(PropertyForRent)</li>
                    <li>Join with staff: Result from step 2 ‚ãà Result from step 3</li>
                    <li>Project names: ‚àè<sub>fName, lName</sub>(Final result)</li>
                </ol>
            </div>
            
            <div class="algebra-notation" style="font-size: 0.9em;">
                ‚àè<sub>fName, lName</sub>((Staff ‚ãà œÉ<sub>city='London'</sub>(Branch)) ‚ãà œÉ<sub>rent>500</sub>(PropertyForRent))
            </div>
        </div>

        <!-- Slide 24: Hands-On Practice -->
        <div class="slide">
            <h1>Practice Problems</h1>
            
            <div class="activity-box">
                <h3>üéØ Individual Exercise (10 minutes)</h3>
                <p>Write relational algebra expressions for:</p>
                <ol style="font-size: 1.1em; line-height: 2;">
                    <li>List all staff working in branches in London or Glasgow</li>
                    <li>Find properties viewed by client 'John Kay'</li>
                    <li>List staff who don't manage any properties</li>
                    <li>Find clients who have viewed properties in all cities</li>
                </ol>
            </div>
            
            <div class="tip-box">
                <strong>Strategy Tips:</strong>
                <ul>
                    <li>Start with the relations you need</li>
                    <li>Apply selections early to reduce data</li>
                    <li>Use appropriate joins for relationships</li>
                    <li>Project only needed attributes at the end</li>
                </ul>
            </div>
        </div>

        <!-- Slide 25: Connecting to SQL -->
        <div class="slide">
            <h1>Relational Algebra ‚Üí SQL Mapping</h1>
            
            <table class="result-table">
                <tr>
                    <th>Relational Algebra</th>
                    <th>SQL Equivalent</th>
                </tr>
                <tr>
                    <td>œÉ<sub>condition</sub>(R)</td>
                    <td>SELECT * FROM R WHERE condition</td>
                </tr>
                <tr>
                    <td>‚àè<sub>A,B</sub>(R)</td>
                    <td>SELECT DISTINCT A, B FROM R</td>
                </tr>
                <tr>
                    <td>R √ó S</td>
                    <td>SELECT * FROM R CROSS JOIN S</td>
                </tr>
                <tr>
                    <td>R ‚à™ S</td>
                    <td>SELECT * FROM R UNION SELECT * FROM S</td>
                </tr>
                <tr>
                    <td>R ‚àí S</td>
                    <td>SELECT * FROM R EXCEPT SELECT * FROM S</td>
                </tr>
                <tr>
                    <td>R ‚ãà<sub>condition</sub> S</td>
                    <td>SELECT * FROM R JOIN S ON condition</td>
                </tr>
                <tr>
                    <td>R ‚ãà S</td>
                    <td>SELECT * FROM R NATURAL JOIN S</td>
                </tr>
            </table>
        </div>

        <!-- Slide 26: Query Optimization Preview -->
        <div class="slide">
            <h1>Query Optimization Basics</h1>
            <p>Multiple algebraic expressions can produce the same result!</p>
            
            <div class="example-box">
                <h3>Example: Two equivalent expressions</h3>
                <p><strong>Expression 1:</strong></p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    œÉ<sub>salary>20000</sub>(Staff ‚ãà Branch)
                </div>
                <p><strong>Expression 2 (More Efficient):</strong></p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    (œÉ<sub>salary>20000</sub>(Staff)) ‚ãà Branch
                </div>
            </div>
            
            <div class="tip-box">
                <strong>Optimization Rules:</strong>
                <ul>
                    <li>Perform selections as early as possible</li>
                    <li>Combine cascaded selections</li>
                    <li>Perform projections early to reduce tuple size</li>
                    <li>Use associativity of joins for better ordering</li>
                </ul>
            </div>
        </div>

        <!-- Slide 27: Real-World Application -->
        <div class="slide">
            <h1>Real-World Database Example</h1>
            
            <div class="erd-diagram">
                <pre>
Database Schema:
================
Branch (branchNo, street, city, postcode)
Staff (staffNo, fName, lName, position, sex, DOB, salary, branchNo)
PropertyForRent (propertyNo, street, city, postcode, type, rooms, rent, ownerNo, staffNo, branchNo)
Client (clientNo, fName, lName, telNo, prefType, maxRent, eMail)
PrivateOwner (ownerNo, fName, lName, address, telNo, eMail, password)
Viewing (clientNo, propertyNo, viewDate, comment)
Registration (clientNo, branchNo, staffNo)
                </pre>
            </div>
            
            <div class="activity-box">
                <strong>üéØ Group Activity (15 min):</strong> 
                <p>Design queries for a property rental system using this schema</p>
            </div>
        </div>

        <!-- Slide 28: Advanced Topics -->
        <div class="slide">
            <h1>Advanced Relational Algebra Topics</h1>
            
            <div class="two-column">
                <div>
                    <h3>Aggregate Functions</h3>
                    <ul>
                        <li>COUNT</li>
                        <li>SUM</li>
                        <li>AVG</li>
                        <li>MIN/MAX</li>
                    </ul>
                    <p>Notation: <span style="font-family: monospace;">‚Ñ±<sub>function</sub>(R)</span></p>
                </div>
                <div>
                    <h3>Grouping Operation</h3>
                    <ul>
                        <li>GROUP BY equivalent</li>
                        <li>Combined with aggregates</li>
                        <li>Creates partitions</li>
                    </ul>
                    <p>Notation: <span style="font-family: monospace;"><sub>attributes</sub>‚Ñ±<sub>functions</sub>(R)</span></p>
                </div>
            </div>
            
            <div class="discussion-prompt">
                üí≠ Discussion: How do modern NoSQL databases handle these operations differently?
            </div>
        </div>

        <!-- Slide 29: Common Pitfalls -->
        <div class="slide">
            <h1>Common Mistakes to Avoid</h1>
            
            <div class="example-box">
                <h3>‚ùå Pitfall 1: Forgetting Union Compatibility</h3>
                <p>Cannot do: ‚àè<sub>staffNo, name</sub>(Staff) ‚à™ ‚àè<sub>clientNo</sub>(Client)</p>
                <p>Different number of attributes!</p>
            </div>
            
            <div class="example-box">
                <h3>‚ùå Pitfall 2: Wrong Join Conditions</h3>
                <p>Cartesian product when you forget the join condition</p>
                <p>Results in way too many tuples!</p>
            </div>
            
            <div class="example-box">
                <h3>‚ùå Pitfall 3: Projection Before Selection</h3>
                <p>If you project away an attribute needed for selection</p>
                <p>Always check your operation order!</p>
            </div>
            
            <div class="tip-box">
                <strong>Best Practice:</strong> Always trace through your expression with sample data!
            </div>
        </div>

        <!-- IN-CLASS EXERCISES SECTION -->

        <!-- Slide 30: Exercise Overview -->
        <div class="slide">
            <h1>In-Class Exercises <span class="emoji">üèóÔ∏è</span></h1>
            <h2>Operator Matching & Evaluation</h2>

            <div class="example-box">
                <h3>Exercise Overview</h3>
                <p style="font-size: 1.2em;">Today, you'll practice translating plain-language queries into relational algebra expressions and evaluating complex expressions step-by-step. These skills are essential for understanding how databases process queries.</p>
            </div>

            <div class="activity-box">
                <h3>Learning Objectives</h3>
                <ul style="font-size: 1.15em;">
                    <li>‚úÖ Match query requirements to appropriate relational algebra operators</li>
                    <li>‚úÖ Write complete relational algebra expressions</li>
                    <li>‚úÖ Decompose complex expressions into intermediate steps</li>
                    <li>‚úÖ Trace data flow through algebraic operations</li>
                    <li>‚úÖ Understand operator precedence and associativity</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Time Allocation:</strong> 40 minutes total (20 min per exercise)
            </div>
        </div>

        <!-- Slide 31: Exercise 1 - Operator Matching -->
        <div class="slide">
            <h1>Exercise 1: Operator Matching</h1>
            <h2>Individual Exercise: Query Translation</h2>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <p style="font-size: 1.1em;">Match the following five plain-language queries to the correct relational algebra operators, then write the complete expression.</p>
            </div>

            <div class="example-box">
                <h3>Schema Reference:</h3>
                <div style="font-size: 0.95em; font-family: monospace;">
<strong>Customer</strong> (customerID, name, city, creditLimit)<br>
<strong>Order</strong> (orderID, customerID, orderDate, totalAmount)<br>
<strong>Product</strong> (productID, productName, price, category)<br>
<strong>OrderItem</strong> (orderID, productID, quantity)
                </div>
            </div>
        </div>

        <!-- Slide 32: Exercise 1 - Five Queries -->
        <div class="slide">
            <h1>Exercise 1: The Five Queries</h1>

            <div class="example-box">
                <h3>Query 1:</h3>
                <p>"Find all customers who haven't placed any orders"</p>
            </div>

            <div class="example-box">
                <h3>Query 2:</h3>
                <p>"List the names and cities of customers with credit limit over $10,000"</p>
            </div>

            <div class="example-box">
                <h3>Query 3:</h3>
                <p>"Find all products ordered by customer with ID 'C001'"</p>
            </div>

            <div class="example-box">
                <h3>Query 4:</h3>
                <p>"List all orders with their customer names and total amounts"</p>
            </div>

            <div class="example-box">
                <h3>Query 5:</h3>
                <p>"Find customers who have ordered products from every category"</p>
            </div>

            <div class="tip-box">
                <strong>Hint:</strong> Consider which operators you need: œÉ (selection), œÄ (projection), ‚ãà (join), ‚à™ (union), ‚àí (difference), √∑ (division)
            </div>
        </div>

        <!-- Slide 33: Understanding Exercise 1 -->
        <div class="slide">
            <h1>Understanding: Operator Matching Solutions</h1>

            <div class="example-box" style="font-size: 0.85em;">
                <h3>Query 1 Solution:</h3>
                <p>"Find all customers who haven't placed any orders"</p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    ‚àè<sub>customerID</sub>(Customer) ‚àí ‚àè<sub>customerID</sub>(Order)
                </div>
                <p><strong>Operators used:</strong> Projection (œÄ), Set Difference (‚àí)</p>
            </div>

            <div class="example-box" style="font-size: 0.85em;">
                <h3>Query 2 Solution:</h3>
                <p>"List the names and cities of customers with credit limit over $10,000"</p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    ‚àè<sub>name, city</sub>(œÉ<sub>creditLimit > 10000</sub>(Customer))
                </div>
                <p><strong>Operators used:</strong> Selection (œÉ), Projection (œÄ)</p>
            </div>

            <div class="example-box" style="font-size: 0.85em;">
                <h3>Query 3 Solution (Complex):</h3>
                <p>"Find all products ordered by customer with ID 'C001'"</p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    ‚àè<sub>productName</sub>((œÉ<sub>customerID='C001'</sub>(Order)) ‚ãà OrderItem ‚ãà Product)
                </div>
                <p><strong>Operators used:</strong> Selection (œÉ), Join (‚ãà), Projection (œÄ)</p>
            </div>
        </div>

        <!-- Slide 34: Understanding Exercise 1 (continued) -->
        <div class="slide">
            <h1>Understanding: Complex Queries</h1>

            <div class="example-box" style="font-size: 0.85em;">
                <h3>Query 4 Solution (Multi-Join):</h3>
                <p>"List all orders with their customer names and total amounts"</p>
                <div class="algebra-notation" style="font-size: 0.9em;">
                    ‚àè<sub>orderID, name, totalAmount</sub>(Customer ‚ãà Order)
                </div>
                <p><strong>Operators used:</strong> Natural Join (‚ãà), Projection (œÄ)</p>
                <p><strong>Note:</strong> Natural join on common attribute customerID</p>
            </div>

            <div class="example-box" style="font-size: 0.85em;">
                <h3>Query 5 Solution (Division - Most Complex):</h3>
                <p>"Find customers who have ordered products from every category"</p>
                <div class="algebra-notation" style="font-size: 0.8em;">
                    ‚àè<sub>customerID, category</sub>(Order ‚ãà OrderItem ‚ãà Product) √∑ ‚àè<sub>category</sub>(Product)
                </div>
                <p><strong>Operators used:</strong> Join (‚ãà), Projection (œÄ), Division (√∑)</p>
                <p><strong>Note:</strong> Division is perfect for "for all" queries</p>
            </div>

            <div class="tip-box">
                <strong>Complexity Ranking:</strong> Query 5 > Query 3 > Query 4 > Query 1 > Query 2<br>
                (Query 5 uses the most operators and is conceptually most challenging)
            </div>
        </div>

        <!-- Slide 35: Exercise 2 - Expression Evaluation -->
        <div class="slide">
            <h1>Exercise 2: Step-by-Step Evaluation</h1>
            <h2>Individual Exercise: Decomposing Complex Expressions</h2>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <p style="font-size: 1.1em;">Given the complex relational algebra expression below, decompose it into step-by-step operations and describe the intermediate result after each operation.</p>
            </div>

            <div class="example-box">
                <h3>The Expression:</h3>
                <div class="algebra-notation" style="font-size: 0.85em;">
                    ‚àè<sub>customerID, name</sub>((œÉ<sub>totalAmount > 1000</sub>(Order)) ‚ãà Customer ‚ãà (œÉ<sub>city = 'Boston'</sub>(Customer)))
                </div>
                <p style="margin-top: 15px;"><strong>Plain English:</strong> "Find the ID and name of customers from Boston who have placed orders over $1,000"</p>
            </div>

            <div class="example-box">
                <h3>Schema Reminder:</h3>
                <div style="font-size: 0.95em; font-family: monospace;">
<strong>Customer</strong> (customerID, name, city, creditLimit)<br>
<strong>Order</strong> (orderID, customerID, orderDate, totalAmount)
                </div>
            </div>
        </div>

        <!-- Slide 36: Exercise 2 - Instructions -->
        <div class="slide">
            <h1>Exercise 2: Decomposition Instructions</h1>

            <div class="activity-box">
                <h3>For Each Operation:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Identify the Operation:</strong>
                        <ul style="margin-top: 8px;">
                            <li>What operator is being applied?</li>
                            <li>What are its operands?</li>
                        </ul>
                    </li>
                    <li><strong>Describe the Intermediate Result:</strong>
                        <ul style="margin-top: 8px;">
                            <li>What attributes does the result have?</li>
                            <li>What tuples are included (conceptually)?</li>
                            <li>How many tuples (estimate)?</li>
                        </ul>
                    </li>
                    <li><strong>Explain the Purpose:</strong>
                        <ul style="margin-top: 8px;">
                            <li>Why is this operation necessary?</li>
                            <li>How does it contribute to the final answer?</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="tip-box">
                <strong>Strategy:</strong> Work from inside-out, evaluating innermost expressions first. Number each step (Step 1, Step 2, etc.)
            </div>
        </div>

        <!-- Slide 37: Understanding Exercise 2 -->
        <div class="slide">
            <h1>Understanding: Step-by-Step Evaluation</h1>

            <div class="example-box" style="font-size: 0.9em;">
                <h3>Step 1: œÉ<sub>totalAmount > 1000</sub>(Order)</h3>
                <p><strong>Operation:</strong> Selection on Order relation</p>
                <p><strong>Intermediate Result:</strong> Subset of Order with only high-value orders (totalAmount > 1000)</p>
                <p><strong>Attributes:</strong> orderID, customerID, orderDate, totalAmount</p>
                <p><strong>Purpose:</strong> Filter to expensive orders early to reduce subsequent join size</p>
            </div>

            <div class="example-box" style="font-size: 0.9em;">
                <h3>Step 2: œÉ<sub>city = 'Boston'</sub>(Customer)</h3>
                <p><strong>Operation:</strong> Selection on Customer relation</p>
                <p><strong>Intermediate Result:</strong> Subset of Customer with only Boston customers</p>
                <p><strong>Attributes:</strong> customerID, name, city, creditLimit</p>
                <p><strong>Purpose:</strong> Filter to Boston customers early (selection pushdown optimization)</p>
            </div>
        </div>

        <!-- Slide 38: Understanding Exercise 2 (continued) -->
        <div class="slide">
            <h1>Understanding: Join Operations</h1>

            <div class="example-box" style="font-size: 0.9em;">
                <h3>Step 3: (Result from Step 1) ‚ãà Customer</h3>
                <p><strong>Operation:</strong> Natural join on customerID</p>
                <p><strong>Intermediate Result:</strong> High-value orders paired with all their customer information</p>
                <p><strong>Attributes:</strong> orderID, customerID, orderDate, totalAmount, name, city, creditLimit</p>
                <p><strong>Purpose:</strong> Connect orders to customers to get customer details</p>
            </div>

            <div class="example-box" style="font-size: 0.9em;">
                <h3>Step 4: (Result from Step 3) ‚ãà (Result from Step 2)</h3>
                <p><strong>Operation:</strong> Join with Boston customers</p>
                <p><strong>Intermediate Result:</strong> Only Boston customers' high-value orders</p>
                <p><strong>Attributes:</strong> Same as Step 3 (no new attributes, but filtered tuples)</p>
                <p><strong>Purpose:</strong> Ensure we only keep orders from Boston customers</p>
            </div>

            <div class="example-box" style="font-size: 0.9em;">
                <h3>Step 5: ‚àè<sub>customerID, name</sub>(Result from Step 4)</h3>
                <p><strong>Operation:</strong> Projection</p>
                <p><strong>Final Result:</strong> customerID and name of qualifying customers</p>
                <p><strong>Attributes:</strong> customerID, name</p>
                <p><strong>Purpose:</strong> Extract only the requested attributes, remove duplicates</p>
            </div>
        </div>

        <!-- HOMEWORK SECTION -->

        <!-- Slide 39: Homework Overview -->
        <div class="slide">
            <h1>Homework Assignment <span class="emoji">üìù</span></h1>
            <h2>Week 5: Personalized Relational Algebra Queries</h2>

            <div class="example-box">
                <h3>Assignment Overview</h3>
                <p style="font-size: 1.15em;">This week's homework uses personalized data to ensure authentic, individual work. You'll write relational algebra expressions to extract information from YOUR unique student record in the class dataset.</p>
            </div>

            <div class="tip-box">
                <h3>Due Date: <strong>Before Class Next Week</strong></h3>
                <p>Submit via Commit URL turned into D2L</p>
            </div>

            <div class="activity-box">
                <h3>Assignment Components:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Part 1:</strong> Word Extraction & Basic Queries (40 points)</li>
                    <li><strong>Part 2:</strong> Advanced Set Operations & Comparisons (60 points)</li>
                </ol>
                <p style="margin-top: 15px; font-size: 1.1em;"><strong>Total Points: 100</strong></p>
                <p style="margin-top: 10px; font-size: 1.0em; font-style: italic;">‚ö†Ô∏è Each student has unique data - copying will be detected!</p>
            </div>
        </div>

        <!-- Slide 40: Homework Extension 1 -->
        <div class="slide">
            <h1>Homework: Personalized Data Queries</h1>
            <h2>Working with YOUR Student Record</h2>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Important: Each Student Has Unique Data!</h3>
                <p style="font-size: 1.1em;">You will work with YOUR specific row from the student_data.csv file. Your queries and results will be unique to you, making collaboration and copying detectable.</p>
            </div>

            <div class="activity-box">
                <h3>Step 1: Download Your Data</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Download:</strong> Get student_data.csv from the course GitHub repository
                        <ul style="margin-top: 8px;">
                            <li>Path: <code>/data/student_data.csv</code></li>
                            <li>Contains 105 student records with personalized data</li>
                        </ul>
                    </li>
                    <li><strong>Find Your Record:</strong> Locate the row with YOUR name
                        <ul style="margin-top: 8px;">
                            <li>Columns: student_id, studentName, favoriteNumber, randomParagraph</li>
                            <li>Each record is unique to prevent copying</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>CSV Structure Example:</h3>
                <div style="font-family: monospace; font-size: 0.85em; background: var(--code-bg); padding: 10px; border-radius: 5px;">
                    student_id,studentName,favoriteNumber,randomParagraph<br>
                    S001,Geethika,42,"The quick brown fox jumps..."<br>
                    S002,Suman,7,"Mountains rise majestically..."<br>
                    S003,Hanumantha,23,"Database systems organize..."
                </div>
            </div>
        </div>

        <!-- Slide 41: Part 1 - Word Extraction Queries -->
        <div class="slide">
            <h1>Part 1: Extract Specific Words (40 points)</h1>
            <h2>Using Selection and Projection</h2>

            <div class="activity-box">
                <h3>Your Task:</h3>
                <p style="font-size: 1.1em;">Write relational algebra expressions to extract specific information from YOUR randomParagraph field.</p>
            </div>

            <div class="tip-box">
                <strong>Note on Word Extraction:</strong> Pure relational algebra doesn't have string manipulation functions. For queries asking you to "extract the 3rd word," first identify what your 3rd word IS, then describe conceptually how you would use extended relational algebra with a hypothetical string function. Example: "Using œÄ<sub>WORD(randomParagraph, 3)</sub> where WORD extracts the nth word from a string."
            </div>

            <div class="example-box">
                <h3>Required Queries (5 points each):</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Query 1:</strong> Find YOUR student record
                        <ul style="margin-top: 8px;">
                            <li>Expression: œÉ<sub>studentName = 'YourName'</sub>(StudentData)</li>
                            <li>Result: Your complete row with all 4 columns</li>
                        </ul>
                    </li>
                    <li><strong>Query 2:</strong> Extract the 3rd word from YOUR randomParagraph
                        <ul style="margin-top: 8px;">
                            <li>Use selection to get your record, then describe projection to extract 3rd word</li>
                            <li>Example: If paragraph is "The quick brown fox...", result is "brown"</li>
                        </ul>
                    </li>
                    <li><strong>Query 3:</strong> Extract the 7th word from YOUR randomParagraph
                        <ul style="margin-top: 8px;">
                            <li>Similar approach to Query 2</li>
                        </ul>
                    </li>
                    <li><strong>Query 4:</strong> Find all students whose favoriteNumber is GREATER than yours
                        <ul style="margin-top: 8px;">
                            <li>Expression: œÉ<sub>favoriteNumber > YourNumber</sub>(StudentData)</li>
                            <li>Result: All students with higher favorite numbers</li>
                        </ul>
                    </li>
                    <li><strong>Query 5:</strong> Find all students whose favoriteNumber is LESS than yours
                        <ul style="margin-top: 8px;">
                            <li>Expression: œÉ<sub>favoriteNumber < YourNumber</sub>(StudentData)</li>
                        </ul>
                    </li>
                    <li><strong>Query 6:</strong> Find students whose randomParagraph contains the same 3rd word as yours
                        <ul style="margin-top: 8px;">
                            <li>Use selection with string matching condition</li>
                        </ul>
                    </li>
                    <li><strong>Query 7:</strong> Project only studentName and favoriteNumber for students with favoriteNumber between 20 and 50
                        <ul style="margin-top: 8px;">
                            <li>Combine selection and projection</li>
                        </ul>
                    </li>
                    <li><strong>Query 8:</strong> Find YOUR favoriteNumber using only your student_id
                        <ul style="margin-top: 8px;">
                            <li>Expression: ‚àè<sub>favoriteNumber</sub>(œÉ<sub>student_id = 'YourID'</sub>(StudentData))</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 42: Part 2 - Set Operations & Comparisons -->
        <div class="slide">
            <h1>Part 2: Advanced Queries (60 points)</h1>
            <h2>Set Operations and Multi-Record Comparisons</h2>

            <div class="activity-box">
                <h3>Required Queries (10 points each):</h3>
                <ol style="font-size: 1.0em; line-height: 1.7;">
                    <li><strong>Query 9:</strong> Union of two groups (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Find all students where (favoriteNumber > 50) OR (favoriteNumber < 10)</li>
                            <li>Use: œÉ<sub>favoriteNumber > 50</sub>(StudentData) ‚à™ œÉ<sub>favoriteNumber < 10</sub>(StudentData)</li>
                        </ul>
                    </li>
                    <li><strong>Query 10:</strong> Set difference (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Find all students EXCEPT those with favoriteNumber between 20 and 80</li>
                            <li>Use difference operator: AllStudents ‚àí StudentsInRange</li>
                        </ul>
                    </li>
                    <li><strong>Query 11:</strong> Intersection (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Find students whose favoriteNumber is BOTH > 30 AND < 70</li>
                            <li>Use: œÉ<sub>favoriteNumber > 30</sub>(StudentData) ‚à© œÉ<sub>favoriteNumber < 70</sub>(StudentData)</li>
                        </ul>
                    </li>
                    <li><strong>Query 12:</strong> Complex projection (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Project only student_id and studentName for students with even favoriteNumbers</li>
                            <li>Combine selection (favoriteNumber % 2 = 0) with projection</li>
                        </ul>
                    </li>
                    <li><strong>Query 13:</strong> Multi-condition selection (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Find students whose favoriteNumber equals YOUR favoriteNumber AND are NOT you</li>
                            <li>Use: œÉ<sub>(favoriteNumber = YourNum) AND (studentName ‚â† 'YourName')</sub>(StudentData)</li>
                        </ul>
                    </li>
                    <li><strong>Query 14:</strong> Comprehensive query (10 pts)
                        <ul style="margin-top: 8px; font-size: 0.95em;">
                            <li>Find count of students with favoriteNumber within ¬±10 of YOUR favoriteNumber</li>
                            <li>Expression: œÉ<sub>(favoriteNumber ‚â• YourNum-10) AND (favoriteNumber ‚â§ YourNum+10)</sub>(StudentData)</li>
                            <li>Then count the resulting tuples</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 43: Submission Format & Tips -->
        <div class="slide">
            <h1>Submission Format & Important Tips</h1>

            <div class="example-box">
                <h3>How to Submit (Markdown Document):</h3>
                <div style="font-family: monospace; font-size: 0.85em; background: var(--code-bg); padding: 15px; border-radius: 8px;">
# Week 5 Homework: Personalized Relational Algebra<br>
**Student:** [Your Name]<br>
**Student ID:** [Your ID from CSV]<br>
**Favorite Number:** [Your Number]<br>
<br>
## My Data Record<br>
```<br>
[Paste your complete CSV row here]<br>
```<br>
<br>
## Part 1: Word Extraction Queries (40 points)<br>
<br>
### Query 1: Find My Record<br>
**Expression:** œÉ<sub>studentName = 'YourName'</sub>(StudentData)<br>
**Result:** [Describe the result]<br>
<br>
### Query 2: Extract 3rd Word<br>
**My 3rd word:** [word]<br>
**Expression:** [Your expression]<br>
**Explanation:** [How you would extract it]<br>
<br>
[Continue for all 14 queries...]
                </div>
            </div>

            <div class="warning-box">
                <h3>‚ö†Ô∏è Anti-Cheating Measures:</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Your data is unique</strong> - Your answers will differ from other students</li>
                    <li><strong>Copied answers are detectable</strong> - If you submit someone else's data</li>
                    <li><strong>You must find your name</strong> - Real student names are scattered through rows 25-105</li>
                    <li><strong>Show your work</strong> - Explain each expression clearly</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>Success Strategy:</h3>
                <ul style="font-size: 1.0em;">
                    <li>Download the CSV and find your exact row first</li>
                    <li>Count words carefully in your randomParagraph</li>
                    <li>Test your expressions logically before writing</li>
                    <li>For word extraction, describe how you'd use string operations with projection</li>
                </ul>
            </div>
        </div>

        <!-- Slide 44: Submission Requirements -->
        <div class="slide">
            <h1>Submission Requirements <span class="emoji">‚úÖ</span></h1>

            <div class="example-box">
                <h3>Format & Submission:</h3>
                <ul style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>File Format:</strong> Markdown document (.md)</li>
                    <li><strong>File Naming:</strong> LastName_FirstName_Week5_Homework.md</li>
                    <li><strong>Repository:</strong> Create file in your GitHub homework repository</li>
                    <li><strong>Submission Platform:</strong> Submit commit URL to D2L</li>
                    <li><strong>Due Date:</strong> Before class begins next week</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Include in Your Submission:</h3>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Your complete CSV row</strong> at the top of your document</li>
                    <li><strong>All 14 relational algebra expressions</strong> clearly labeled</li>
                    <li><strong>Your actual results</strong> for each query (the specific words, numbers, counts)</li>
                    <li><strong>Brief explanations</strong> for complex queries (especially word extraction)</li>
                </ol>
            </div>

            <div class="activity-box">
                <h3>Markdown Document Structure:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Header:</strong> Name, Student ID, Favorite Number from CSV</li>
                    <li><strong>Section 1:</strong> Your complete CSV row data</li>
                    <li><strong>Section 2:</strong> Part 1 - All 8 word extraction queries with results</li>
                    <li><strong>Section 3:</strong> Part 2 - All 6 advanced queries with results</li>
                    <li><strong>Conclusion:</strong> Brief reflection on the assignment</li>
                </ol>
            </div>

            <div class="example-box">
                <h3>Grading Criteria:</h3>
                <table class="result-table" style="font-size: 0.95em;">
                    <tr>
                        <th>Component</th>
                        <th>Points</th>
                        <th>Key Criteria</th>
                    </tr>
                    <tr>
                        <td><strong>Part 1 Queries (8 queries)</strong></td>
                        <td>40</td>
                        <td>Correctness (25), Proper notation (10), Clear explanations (5)</td>
                    </tr>
                    <tr>
                        <td><strong>Part 2 Queries (6 queries)</strong></td>
                        <td>60</td>
                        <td>Correctness (40), Proper notation (12), Clear explanations (8)</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Slide 45: Summary -->
        <div class="slide">
            <h1>Key Takeaways</h1>

            <ul style="font-size: 1.3em; line-height: 2;">
                <li>‚úÖ Relational algebra is the foundation of SQL</li>
                <li>‚úÖ Five basic operations can express any query</li>
                <li>‚úÖ Joins are powerful but expensive</li>
                <li>‚úÖ Order of operations matters for optimization</li>
                <li>‚úÖ Multiple expressions can produce same result</li>
            </ul>

            <div class="tip-box">
                <strong>Next Class:</strong> We'll see how SQL implements these concepts and start writing actual queries!
            </div>

            <div class="discussion-prompt">
                üí≠ Final Thought: How might AI and machine learning change query optimization in the future?
            </div>
        </div>

        <!-- Slide 46: Homework & Resources -->
        <div class="slide">
            <h1>Homework & Resources</h1>

            <div class="activity-box">
                <h3>üìù This Week's Homework</h3>
                <p>Personalized CSV Data Queries (slides 39-44)</p>
                <p><strong>Due: Before next class</strong></p>
                <p>Submit commit URL to D2L</p>
            </div>

            <div class="tip-box">
                <h3>üí° Additional Resources</h3>
                <ul>
                    <li>Online RA Calculator: <code>dbis-uibk.github.io/relax/</code></li>
                    <li>Video tutorials on Canvas</li>
                    <li>Office hours: Tuesday/Thursday 2-4 PM</li>
                </ul>
            </div>

            <p style="text-align: center; margin-top: 40px; font-size: 1.2em;">
                Questions? Let's discuss! ü§î
            </p>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">46</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // Relational Algebra specific interactions
        document.addEventListener('slidechange', (e) => {
            console.log(`Slide ${e.detail.currentSlide + 1} of ${e.detail.totalSlides}`);
        });
    </script>
</body>
</html>