<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Part 1 - CSCI 5603</title>
    
    <!-- Database Design Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <!-- Import Courier Prime for analog feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lecture-Specific Styles -->
    <style>
        /* Override font for analog feel */
        body, .slide, h1, h2, h3, p, li {
            font-family: 'Courier Prime', 'IBM Plex Mono', 'Courier New', monospace !important;
        }
        
        /* SQL syntax highlighting classes now in presentation.css */

        .table-schema {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-family: 'IBM Plex Mono', monospace;
        }
        
        .table-schema th {
            background: var(--ocu-true-blue);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .table-schema td {
            border: 1px solid var(--border-color);
            padding: 10px;
            background: var(--bg-secondary);
        }
        
        .table-schema tr:nth-child(even) td {
            background: var(--bg-accent);
        }
        
        .highlight {
            background-color: #ffeb3b;
            color: #000;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .activity-timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--ocu-green);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.2em;
            display: none;
            z-index: 1000;
        }

        /* Bridge to Your Project boxes */
        .bridge-box {
            background-color: #f0f8ff;
            border-left: 4px solid #4a90e2;
            padding: 15px;
            margin: 20px 0;
            font-family: 'Courier Prime', monospace;
        }

        .bridge-box h4 {
            margin-top: 0;
            color: #4a90e2;
        }

        /* Netlify integration callouts */
        .netlify-callout {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
        }

        .netlify-callout h4 {
            margin-top: 0;
            color: #2e7d32;
        }

        /* Project example boxes */
        .project-example {
            background-color: #fff3e0;
            border: 1px solid #ff9800;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .project-example strong {
            color: #e65100;
        }
    </style>
</head>
<body>
    <!-- Theme toggle will be automatically added by JavaScript -->
    
    <div class="presentation-container">
        <!-- Timer display for activities -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">SQL Part 1 - Data Manipulation
                 <button class="home"><a href="../../index.html">Home</a></button>
            </span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide active">
            <h1>SQL - Part 1</h1>
            <h2 style="color: var(--ocu-cyan);">Structured Query Language</h2>
            <h3>Data Manipulation</h3>
            <div style="margin-top: 50px;">
                <p><strong>CSCI 5603 - Database Design</strong></p>
                <p>Week 4, Lecture 7</p>
                <p>Instructor: Bobby Reed</p>
            </div>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Learning Objectives</h1>
            <ul>
                <li>Understand the history and importance of SQL</li>
                <li>Master the basic SELECT statement structure</li>
                <li>Learn to filter data with WHERE clauses</li>
                <li>Sort results using ORDER BY</li>
                <li>Use aggregate functions (COUNT, SUM, AVG, MIN, MAX)</li>
                <li>Group data with GROUP BY and HAVING</li>
                <li>Implement pattern matching with LIKE</li>
                <li>Write effective SQL queries for data retrieval</li>
            </ul>
            <div class="highlight-box" style="margin-top: 30px;">
                <p><strong>Focus:</strong> This lecture covers SQL Data Manipulation Language (DML) - how to retrieve and query data from existing database tables.</p>
            </div>
        </div>

        <!-- Slide 3: Historical Context -->
        <div class="slide">
            <h1>Historical Context <span class="emoji">üìú</span></h1>
            <h2>From SEQUEL to SQL</h2>

            <div class="concept-box">
                <h3>SEQUEL to SQL</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">SEQUEL (Structured English Query Language) was developed for IBM's System R by Don Chamberlin and Raymond Boyce. Due to a trademark conflict, it was renamed SQL (Structured Query Language). SQL was deliberately designed to be more user-friendly than relational calculus while retaining its theoretical power‚Äîmaking database queries accessible to non-mathematicians.</p>
            </div>

            <div class="concept-box">
                <h3>Early Standardization (1986/1987)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">SQL's rapid adoption led to standardization by ANSI in 1986 and ISO in 1987, cementing its status as the "intergalactic standard" for relational databases. This standardization ensured SQL would work across different database systems, making it the universal language for data management.</p>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> SQL's success came from balancing theoretical rigor with practical usability‚Äîit's powerful enough for complex queries yet simple enough for everyday use.
            </div>
        </div>

        <!-- Slide 4: History of SQL -->
        <div class="slide">
            <h1>History of SQL</h1>
            <h2>The Birth of a Standard</h2>
            <ul>
                <li><strong>1974:</strong> D. Chamberlin (IBM) creates SEQUEL - "Structured English Query Language"</li>
                <li><strong>1976:</strong> SEQUEL/2 defined, renamed to SQL for legal reasons</li>
                <li><strong>Late 1970s:</strong> ORACLE appears as first commercial RDBMS based on SQL</li>
                <li><strong>1987:</strong> ANSI and ISO publish initial SQL standard</li>
                <li><strong>1992:</strong> SQL2/SQL-92 - First major revision</li>
                <li><strong>1999:</strong> SQL:1999 - Object-oriented features</li>
                <li><strong>2003-2019:</strong> Continuous evolution (SQL:2003, 2008, 2011, 2016, 2019)</li>
            </ul>
            <div class="note-box">
                <p><strong>Note:</strong> Still pronounced "see-quel" by many, though official pronunciation is "S-Q-L"</p>
            </div>
        </div>

        <!-- Slide 4: Importance of SQL -->
        <div class="slide">
            <h1>Why SQL Matters</h1>
            <h2>Industry Standard and Beyond</h2>
            <ul>
                <li>Part of major application architectures (IBM's Systems Application Architecture)</li>
                <li>Strategic choice of influential organizations (X/OPEN)</li>
                <li>Federal Information Processing Standard (FIPS)</li>
                <li>Required for all database sales to U.S. Government</li>
                <li>Used in other standards (ISO's IRDS, Remote Data Access)</li>
                <li>De facto standard for relational databases</li>
            </ul>
            <div class="activity-box">
                <h3>üí≠ Discussion (5 min)</h3>
                <p>Why do you think SQL has remained dominant for nearly 50 years while other technologies have come and gone?</p>
            </div>
        </div>

        <!-- Slide 5: SQL Objectives -->
        <div class="slide">
            <h1>Objectives of SQL</h1>
            <h2>Design Philosophy</h2>
            <div class="two-column">
                <div>
                    <h3>Core Capabilities</h3>
                    <ul>
                        <li>Create database and relation structures</li>
                        <li>Perform data insertion</li>
                        <li>Modify existing data</li>
                        <li>Delete data from relations</li>
                        <li>Execute simple and complex queries</li>
                    </ul>
                </div>
                <div>
                    <h3>Key Characteristics</h3>
                    <ul>
                        <li><strong>Non-procedural:</strong> Specify WHAT, not HOW</li>
                        <li><strong>Transform-oriented:</strong> DDL + DML</li>
                        <li><strong>Free-format:</strong> Flexible syntax</li>
                        <li><strong>English-like:</strong> Readable commands</li>
                        <li><strong>Universal:</strong> Used by all user types</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 6: Your Project Database -->
        <div class="slide">
            <h1>Working with YOUR Database</h1>
            <h2>Apply SQL to Your Project Schema</h2>

            <div class="netlify-callout">
                <h4>üåê Connection to Your Project</h4>
                <p><strong>Remember:</strong> In Lecture 6, you built a Netlify frontend with API endpoints for YOUR project database. Today's SQL concepts will help you enhance those APIs with filtering, sorting, search, and statistics!</p>
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>Today's Approach:</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">All examples will use <strong>generic table and column names</strong> that you can easily adapt to your specific database schema. Think about how each concept applies to YOUR tables!</p>
            </div>

            <div class="tip-box" style="margin-top: 20px;">
                <h3>Example Project Schemas:</h3>
                <ul style="font-size: 1.05em;">
                    <li><strong>Recipe Database:</strong> recipes, ingredients, categories</li>
                    <li><strong>Inventory System:</strong> products, suppliers, orders</li>
                    <li><strong>Library Manager:</strong> books, authors, members</li>
                    <li><strong>Event Planner:</strong> events, venues, attendees</li>
                </ul>
            </div>
        </div>

        <!-- Slide 6a: Frontend Setup - Displaying All Your Tables -->
        <div class="slide">
            <h1>Frontend Setup: Display All 3 Tables</h1>
            <h2>Expand Your Main Page</h2>

            <div class="netlify-callout">
                <h4>üéØ Goal</h4>
                <p>Update your main HTML page to fetch and display data from all 3 of your project tables, giving users a complete overview of your database.</p>
            </div>

            <div class="demo-box">
                <h3>Expanding get-items.mjs (or your main GET function)</h3>
                <pre class="code-example"><span class="sql-comment">// Option 1: Single endpoint that returns all tables</span>
<span class="sql-keyword">exports</span>.handler = <span class="sql-keyword">async</span> (<span class="sql-keyword">event</span>, <span class="sql-keyword">context</span>) => {
  <span class="sql-keyword">try</span> {
    <span class="sql-comment">// Fetch all three tables in parallel</span>
    <span class="sql-keyword">const</span> [table1, table2, table3] = <span class="sql-keyword">await</span> Promise.all([
      pool.query(<span class="sql-string">'SELECT * FROM your_first_table ORDER BY id'</span>),
      pool.query(<span class="sql-string">'SELECT * FROM your_second_table ORDER BY id'</span>),
      pool.query(<span class="sql-string">'SELECT * FROM your_third_table ORDER BY id'</span>)
    ]);

    <span class="sql-keyword">return</span> {
      statusCode: <span class="sql-number">200</span>,
      body: JSON.stringify({
        firstTable: table1.rows,
        secondTable: table2.rows,
        thirdTable: table3.rows
      })
    };
  } <span class="sql-keyword">catch</span> (error) {
    <span class="sql-keyword">return</span> { statusCode: <span class="sql-number">500</span>, body: JSON.stringify({ error: error.message }) };
  }
};</pre>
            </div>

            <div class="bridge-box">
                <h4>üåâ Alternative: Separate Endpoints</h4>
                <p>You can also keep 3 separate GET functions (get-table1.mjs, get-table2.mjs, get-table3.mjs) and call them separately from your HTML. This is more modular but requires more fetch calls.</p>
            </div>
        </div>

        <!-- Slide 6b: Frontend HTML - Displaying Multiple Tables -->
        <div class="slide">
            <h1>Update Your index.html</h1>
            <h2>Display All 3 Tables on One Page</h2>

            <div class="demo-box">
                <h3>JavaScript Fetch Example:</h3>
                <pre class="code-example"><span class="sql-comment">// In your index.html or app.js</span>
<span class="sql-keyword">async function</span> loadAllData() {
  <span class="sql-keyword">try</span> {
    <span class="sql-comment">// Fetch from your combined endpoint</span>
    <span class="sql-keyword">const</span> response = <span class="sql-keyword">await</span> fetch(<span class="sql-string">'/api/get-all-data'</span>);
    <span class="sql-keyword">const</span> data = <span class="sql-keyword">await</span> response.json();

    <span class="sql-comment">// Display each table</span>
    displayTable(<span class="sql-string">'table1-container'</span>, data.firstTable, <span class="sql-string">'First Table Name'</span>);
    displayTable(<span class="sql-string">'table2-container'</span>, data.secondTable, <span class="sql-string">'Second Table Name'</span>);
    displayTable(<span class="sql-string">'table3-container'</span>, data.thirdTable, <span class="sql-string">'Third Table Name'</span>);
  } <span class="sql-keyword">catch</span> (error) {
    console.error(<span class="sql-string">'Error loading data:'</span>, error);
  }
}

<span class="sql-keyword">function</span> displayTable(containerId, rows, tableName) {
  <span class="sql-keyword">const</span> container = document.getElementById(containerId);
  <span class="sql-keyword">if</span> (!rows.length) {
    container.innerHTML = <span class="sql-string">`&lt;p&gt;No data in ${tableName}&lt;/p&gt;`</span>;
    <span class="sql-keyword">return</span>;
  }

  <span class="sql-comment">// Create table HTML</span>
  <span class="sql-keyword">const</span> headers = Object.keys(rows[<span class="sql-number">0</span>]);
  <span class="sql-keyword">const</span> tableHTML = <span class="sql-string">`
    &lt;h3&gt;${tableName}&lt;/h3&gt;
    &lt;table&gt;
      &lt;thead&gt;&lt;tr&gt;${headers.map(h =&gt; \`&lt;th&gt;${h}&lt;/th&gt;\`).join('')}&lt;/tr&gt;&lt;/thead&gt;
      &lt;tbody&gt;${rows.map(row =&gt; \`
        &lt;tr&gt;${headers.map(h =&gt; \`&lt;td&gt;${row[h]}&lt;/td&gt;\`).join('')}&lt;/tr&gt;
      \`).join('')}&lt;/tbody&gt;
    &lt;/table&gt;
  `</span>;
  container.innerHTML = tableHTML;
}

<span class="sql-comment">// Load data when page loads</span>
window.addEventListener(<span class="sql-string">'DOMContentLoaded'</span>, loadAllData);</pre>
            </div>

            <div class="tip-box">
                <strong>HTML Structure:</strong> Add three div containers with IDs: <code>&lt;div id="table1-container"&gt;&lt;/div&gt;</code>, <code>&lt;div id="table2-container"&gt;&lt;/div&gt;</code>, <code>&lt;div id="table3-container"&gt;&lt;/div&gt;</code>
            </div>
        </div>

        <!-- Slide 6c: Connecting to Lecture 6 -->
        <div class="slide">
            <h1>Connecting to Lecture 6</h1>
            <h2>Building on Your Foundation</h2>

            <div class="netlify-callout">
                <h4>What You Built in Lecture 6</h4>
                <p>You created Netlify API endpoints with simple queries:</p>
                <pre class="code-example" style="font-size: 0.9em;">
const query = 'SELECT * FROM your_table';
const result = await pool.query(query);
                </pre>
            </div>

            <div class="demo-box">
                <h3>What We'll Learn Today:</h3>
                <p style="font-size: 1.15em;">Make those queries POWERFUL with:</p>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>WHERE</strong> - Filter data (show only active items)</li>
                    <li><strong>ORDER BY</strong> - Sort results (newest first, alphabetical)</li>
                    <li><strong>Aggregates</strong> - Compute statistics (count, average, sum)</li>
                    <li><strong>GROUP BY</strong> - Category breakdowns (items per category)</li>
                    <li><strong>LIKE</strong> - Search functionality (find items matching "laptop")</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>By the end of today:</strong> Your APIs will have filtering, sorting, search, and dashboard statistics!
            </div>
        </div>

        <!-- Slide 7: SELECT Statement Structure -->
        <div class="slide">
            <h1>The SELECT Statement</h1>
            <h2>Foundation of SQL Queries</h2>
            <div class="sql-example">
                <span class="sql-keyword">SELECT</span> [<span class="sql-keyword">DISTINCT</span> | <span class="sql-keyword">ALL</span>]
                    { * | [columnExpression [<span class="sql-keyword">AS</span> newName]] [, ...] }<br>
                <span class="sql-keyword">FROM</span> TableName [alias] [, ...]<br>
                [<span class="sql-keyword">WHERE</span> condition]<br>
                [<span class="sql-keyword">GROUP BY</span> columnList] [<span class="sql-keyword">HAVING</span> condition]<br>
                [<span class="sql-keyword">ORDER BY</span> columnList]
            </div>
            <h3>Key Points:</h3>
            <ul>
                <li>Order of clauses cannot be changed</li>
                <li>Only SELECT and FROM are mandatory</li>
                <li>Keywords are RESERVED WORDS</li>
            </ul>
        </div>

        <!-- Slide 8: Basic SELECT Examples -->
        <div class="slide">
            <h1>Basic SELECT Queries</h1>
            <h2>Retrieving All Data</h2>
            <div class="sql-example">
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> your_table;
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>What This Does:</h3>
                <ul style="font-size: 1.15em; line-height: 1.7;">
                    <li>Returns <strong>ALL rows</strong> from the table</li>
                    <li>Returns <strong>ALL columns</strong> for each row</li>
                    <li>Simple but often inefficient in production</li>
                </ul>
            </div>

            <div class="bridge-box" style="margin-top: 30px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>Replace <code>your_table</code> with one of your actual table names:</strong></p>
                <div class="project-example">
                    <strong>Recipe database:</strong> <code>SELECT * FROM recipes;</code><br>
                    <strong>Inventory database:</strong> <code>SELECT * FROM products;</code><br>
                    <strong>Library database:</strong> <code>SELECT * FROM books;</code><br>
                    <strong>Event database:</strong> <code>SELECT * FROM events;</code>
                </div>
            </div>

            <div class="tip-box" style="margin-top: 20px;">
                <p><strong>Better Practice:</strong> Specify column names instead of * for production code!</p>
            </div>
        </div>

        <!-- Slide 9: DISTINCT -->
        <div class="slide">
            <h1>Using DISTINCT</h1>
            <h2>Eliminating Duplicates</h2>

            <div class="sql-example">
                <span class="sql-comment">-- Without DISTINCT: May return duplicate values</span><br>
                <span class="sql-keyword">SELECT</span> category <span class="sql-keyword">FROM</span> items;<br><br>

                <span class="sql-comment">-- With DISTINCT: Returns only unique values</span><br>
                <span class="sql-keyword">SELECT DISTINCT</span> category <span class="sql-keyword">FROM</span> items;
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>When to Use DISTINCT:</h3>
                <ul style="font-size: 1.15em; line-height: 1.7;">
                    <li>Get list of unique categories/types</li>
                    <li>Count unique values: <code>COUNT(DISTINCT column)</code></li>
                    <li>Populate dropdown/filter options in UI</li>
                    <li>Remove duplicate results from queries</li>
                </ul>
            </div>

            <div class="bridge-box" style="margin-top: 30px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>Find unique values in YOUR data:</strong></p>
                <div class="project-example">
                    <strong>Recipe database:</strong> <code>SELECT DISTINCT cuisine FROM recipes;</code><br>
                    <strong>Inventory database:</strong> <code>SELECT DISTINCT category FROM products;</code><br>
                    <strong>Library database:</strong> <code>SELECT DISTINCT author FROM books;</code><br>
                    <strong>Event database:</strong> <code>SELECT DISTINCT venue_type FROM venues;</code>
                </div>
                <p style="margin-top: 10px;"><strong>Great for:</strong> Populating dropdown filters in your Netlify frontend!</p>
            </div>
        </div>

        <!-- Slide 10: WHERE Clause -->
        <div class="slide">
            <h1>Filtering with WHERE</h1>
            <h2>Conditional Data Retrieval</h2>

            <div class="sql-example">
                <span class="sql-comment">-- Filter by exact match</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> category = <span class="sql-string">'Electronics'</span>;<br><br>

                <span class="sql-comment">-- Filter by numeric comparison</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> price > 100;<br><br>

                <span class="sql-comment">-- Multiple conditions</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> category = <span class="sql-string">'Books'</span> <span class="sql-keyword">AND</span> price < 50;
            </div>

            <h3 style="margin-top: 30px;">Comparison Operators</h3>
            <ul>
                <li><code>=</code> Equal to</li>
                <li><code>&lt;&gt;</code> or <code>!=</code> Not equal to</li>
                <li><code>&lt;</code> Less than</li>
                <li><code>&lt;=</code> Less than or equal to</li>
                <li><code>&gt;</code> Greater than</li>
                <li><code>&gt;=</code> Greater than or equal to</li>
                <li><code>AND</code>, <code>OR</code>, <code>NOT</code> Combine conditions</li>
            </ul>

            <div class="netlify-callout" style="margin-top: 30px;">
                <h4>üíª This Powers Your API</h4>
                <p>WHERE clauses become query parameters in your Netlify functions:</p>
                <p><code>GET /api/items?category=Electronics</code></p>
            </div>
        </div>

        <!-- Slide 11: Activity - Basic Queries -->
        <div class="slide">
            <h1>üéØ Activity: Write Your First Queries</h1>
            <h2>15 Minutes - Individual Work</h2>

            <div class="activity-box">
                <h3>Apply to YOUR Project Database</h3>
                <p style="font-size: 1.1em;">Write <strong>3-5 WHERE clause queries</strong> for your project. Think about what filters would be useful in your Netlify frontend!</p>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>Query Ideas:</h4>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Filter by category/type:</strong> Get all items of a specific category</li>
                    <li><strong>Filter by numeric value:</strong> Items above/below a price, quantity, rating, etc.</li>
                    <li><strong>Filter by date:</strong> Items created after a certain date</li>
                    <li><strong>Filter by text field:</strong> Items matching specific status, location, etc.</li>
                    <li><strong>Multiple conditions:</strong> Combine 2+ filters with AND/OR</li>
                </ol>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <h3>Example Templates:</h3>
                <div class="project-example">
                    <strong>Recipe DB:</strong> <code>WHERE cuisine = 'Italian' AND prep_time < 30</code><br>
                    <strong>Inventory DB:</strong> <code>WHERE category = 'Electronics' AND price > 100</code><br>
                    <strong>Library DB:</strong> <code>WHERE genre = 'Fiction' AND publication_year > 2020</code>
                </div>
                <button onclick="startTimer(15)">Start Timer</button>
            </div>
        </div>

        <!-- Slide 12: ORDER BY -->
        <div class="slide">
            <h1>Sorting Results with ORDER BY</h1>
            <h2>Control Result Ordering</h2>

            <div class="sql-example">
                <span class="sql-comment">-- Sort ascending (A-Z, 0-9, oldest-newest)</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">ORDER BY</span> name <span class="sql-keyword">ASC</span>;<br><br>

                <span class="sql-comment">-- Sort descending (Z-A, 9-0, newest-oldest)</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">ORDER BY</span> created_date <span class="sql-keyword">DESC</span>;<br><br>

                <span class="sql-comment">-- Sort by multiple columns</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">ORDER BY</span> category <span class="sql-keyword">ASC</span>, price <span class="sql-keyword">DESC</span>;
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>Common Sorting Patterns:</h3>
                <ul style="font-size: 1.1em; line-height: 1.7;">
                    <li><strong>Alphabetical:</strong> <code>ORDER BY name ASC</code></li>
                    <li><strong>Newest first:</strong> <code>ORDER BY created_date DESC</code></li>
                    <li><strong>Highest price:</strong> <code>ORDER BY price DESC</code></li>
                    <li><strong>Top rated:</strong> <code>ORDER BY rating DESC</code></li>
                </ul>
                <p><em>Note: Default is ASC (ascending), use DESC for descending</em></p>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>Choose the sort that makes sense for YOUR data:</strong></p>
                <div class="project-example">
                    <strong>Recipe DB:</strong> <code>ORDER BY prep_time ASC</code> (quickest first)<br>
                    <strong>Inventory DB:</strong> <code>ORDER BY price DESC</code> (most expensive first)<br>
                    <strong>Library DB:</strong> <code>ORDER BY publication_year DESC</code> (newest first)<br>
                    <strong>Event DB:</strong> <code>ORDER BY event_date ASC</code> (soonest first)
                </div>
            </div>
        </div>

        <!-- Slide 13: Aggregate Functions -->
        <div class="slide">
            <h1>Aggregate Functions</h1>
            <h2>Statistical Operations on Data Sets</h2>

            <div class="two-column">
                <div>
                    <h3>Available Functions</h3>
                    <ul>
                        <li><code>COUNT(*)</code> - Number of rows</li>
                        <li><code>COUNT(column)</code> - Non-null values</li>
                        <li><code>SUM(column)</code> - Total of values</li>
                        <li><code>AVG(column)</code> - Average value</li>
                        <li><code>MIN(column)</code> - Minimum value</li>
                        <li><code>MAX(column)</code> - Maximum value</li>
                    </ul>
                </div>
                <div>
                    <h3>Example: Get Stats</h3>
                    <div class="sql-example">
                        <span class="sql-keyword">SELECT</span><br>
                        &nbsp;&nbsp;<span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> total_items,<br>
                        &nbsp;&nbsp;<span class="sql-function">AVG</span>(price) <span class="sql-keyword">AS</span> avg_price,<br>
                        &nbsp;&nbsp;<span class="sql-function">MIN</span>(price) <span class="sql-keyword">AS</span> min_price,<br>
                        &nbsp;&nbsp;<span class="sql-function">MAX</span>(price) <span class="sql-keyword">AS</span> max_price<br>
                        <span class="sql-keyword">FROM</span> items;
                    </div>
                </div>
            </div>

            <div class="note-box" style="margin-top: 20px;">
                <p><strong>Important:</strong> Aggregate functions can only be used in SELECT list and HAVING clause</p>
            </div>

            <div class="netlify-callout" style="margin-top: 20px;">
                <h4>üíª Perfect for Dashboard APIs!</h4>
                <p>Create an API endpoint like <code>GET /api/stats</code> that returns aggregate data for your frontend dashboard.</p>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üåâ Apply to Your Project</h4>
                <div class="project-example">
                    <strong>Recipe DB:</strong> <code>AVG(prep_time), COUNT(*)</code><br>
                    <strong>Inventory DB:</strong> <code>SUM(quantity), AVG(price)</code><br>
                    <strong>Library DB:</strong> <code>COUNT(*), MIN(publication_year)</code>
                </div>
            </div>
        </div>

        <!-- Slide 14: GROUP BY -->
        <div class="slide">
            <h1>GROUP BY Clause</h1>
            <h2>Grouping for Subtotals and Category Breakdowns</h2>

            <div class="sql-example">
                <span class="sql-comment">-- Count items in each category</span><br>
                <span class="sql-keyword">SELECT</span> <span class="highlight">category</span>,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> item_count<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">GROUP BY</span> <span class="highlight">category</span><br>
                <span class="sql-keyword">ORDER BY</span> item_count <span class="sql-keyword">DESC</span>;<br><br>

                <span class="sql-comment">-- Average price per category</span><br>
                <span class="sql-keyword">SELECT</span> <span class="highlight">category</span>,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">AVG</span>(price) <span class="sql-keyword">AS</span> avg_price,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> total<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">GROUP BY</span> <span class="highlight">category</span>;
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>üîë Golden Rule:</h3>
                <p style="font-size: 1.15em;">All columns in SELECT must either be:</p>
                <ol style="font-size: 1.1em; line-height: 1.7;">
                    <li>In the GROUP BY clause, OR</li>
                    <li>Inside an aggregate function (COUNT, SUM, AVG, etc.)</li>
                </ol>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>GROUP BY creates category breakdowns:</strong></p>
                <div class="project-example">
                    <strong>Recipe DB:</strong> <code>SELECT cuisine, COUNT(*) FROM recipes GROUP BY cuisine;</code><br>
                    <strong>Inventory DB:</strong> <code>SELECT category, SUM(quantity) FROM products GROUP BY category;</code><br>
                    <strong>Library DB:</strong> <code>SELECT author, COUNT(*) FROM books GROUP BY author;</code><br>
                    <strong>Event DB:</strong> <code>SELECT venue, COUNT(*) FROM events GROUP BY venue;</code>
                </div>
            </div>
        </div>

        <!-- Slide 15: HAVING Clause -->
        <div class="slide">
            <h1>HAVING Clause</h1>
            <h2>Filtering Grouped Results</h2>

            <div class="sql-example">
                <span class="sql-comment">-- Find categories with more than 10 items</span><br>
                <span class="sql-keyword">SELECT</span> category,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> item_count<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">GROUP BY</span> category<br>
                <span class="sql-keyword">HAVING COUNT</span>(*) > 10<br>
                <span class="sql-keyword">ORDER BY</span> item_count <span class="sql-keyword">DESC</span>;<br><br>

                <span class="sql-comment">-- Categories with average price over $100</span><br>
                <span class="sql-keyword">SELECT</span> category,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">AVG</span>(price) <span class="sql-keyword">AS</span> avg_price<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">GROUP BY</span> category<br>
                <span class="sql-keyword">HAVING AVG</span>(price) > 100;
            </div>

            <div class="demo-box" style="margin-top: 30px;">
                <h3>WHERE vs HAVING</h3>
                <table class="table-schema" style="font-size: 0.95em;">
                    <tr>
                        <th>Clause</th>
                        <th>Filters</th>
                        <th>Position</th>
                        <th>Can Use Aggregates?</th>
                    </tr>
                    <tr>
                        <td><strong>WHERE</strong></td>
                        <td>Individual rows</td>
                        <td>Before GROUP BY</td>
                        <td>‚ùå No</td>
                    </tr>
                    <tr>
                        <td><strong>HAVING</strong></td>
                        <td>Groups</td>
                        <td>After GROUP BY</td>
                        <td>‚úÖ Yes</td>
                    </tr>
                </table>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>Find "top" or "qualifying" categories:</strong></p>
                <div class="project-example">
                    <strong>Recipe DB:</strong> Cuisines with 10+ recipes<br>
                    <strong>Inventory DB:</strong> Categories with total value > $5000<br>
                    <strong>Library DB:</strong> Authors with 3+ books<br>
                    <strong>Event DB:</strong> Venues hosting 5+ events
                </div>
            </div>
        </div>

        <!-- Slide 16: Pattern Matching -->
        <div class="slide">
            <h1>Pattern Matching with LIKE</h1>
            <h2>Flexible String Searching</h2>

            <div class="demo-box">
                <h3>Special Pattern Symbols</h3>
                <ul style="font-size: 1.15em;">
                    <li><code>%</code> - Zero or more characters</li>
                    <li><code>_</code> - Exactly one character</li>
                </ul>
            </div>

            <div class="sql-example" style="margin-top: 30px;">
                <span class="sql-comment">-- Contains "Pro" anywhere in name</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> name <span class="sql-keyword">LIKE</span> <span class="sql-string">'%Pro%'</span>;<br><br>

                <span class="sql-comment">-- Starts with "Pro"</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> name <span class="sql-keyword">LIKE</span> <span class="sql-string">'Pro%'</span>;<br><br>

                <span class="sql-comment">-- Ends with ".com"</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> users<br>
                <span class="sql-keyword">WHERE</span> email <span class="sql-keyword">LIKE</span> <span class="sql-string">'%.com'</span>;<br><br>

                <span class="sql-comment">-- PostgreSQL: Case-insensitive search</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> name <span class="sql-keyword">ILIKE</span> <span class="sql-string">'%pro%'</span>;
            </div>

            <div class="netlify-callout" style="margin-top: 20px;">
                <h4>üíª This Is Your Search Feature!</h4>
                <p>LIKE powers search boxes in your Netlify frontend:</p>
                <p><code>GET /api/search?q=keyword</code> ‚Üí <code>WHERE name ILIKE '%keyword%'</code></p>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üåâ Apply to Your Project</h4>
                <p><strong>Add search to YOUR data:</strong></p>
                <div class="project-example">
                    <strong>Recipe DB:</strong> <code>WHERE name ILIKE '%chicken%'</code><br>
                    <strong>Inventory DB:</strong> <code>WHERE description ILIKE '%wireless%'</code><br>
                    <strong>Library DB:</strong> <code>WHERE title ILIKE '%python%'</code><br>
                    <strong>Event DB:</strong> <code>WHERE venue_name ILIKE '%center%'</code>
                </div>
            </div>
        </div>

        <!-- Slide 17: Writing Good SQL -->
        <div class="slide">
            <h1>Writing Good SQL Commands</h1>
            <h2>Best Practices by Bobby Reed</h2>
            
            <div class="two-column">
                <div>
                    <h3>‚úÖ DO</h3>
                    <ul>
                        <li>Use consistent capitalization for keywords</li>
                        <li>Start each clause on a new line</li>
                        <li>Indent subparts of clauses</li>
                        <li>Use meaningful aliases</li>
                        <li>Comment complex queries</li>
                        <li>Test queries incrementally</li>
                    </ul>
                </div>
                <div>
                    <h3>‚ùå DON'T</h3>
                    <ul>
                        <li>Write everything on one line</li>
                        <li>Use SELECT * in production</li>
                        <li>Forget to handle NULLs</li>
                        <li>Ignore performance implications</li>
                        <li>Mix different formatting styles</li>
                        <li>Use reserved words as names</li>
                    </ul>
                </div>
            </div>
            
            <div class="sql-example">
                <span class="sql-comment">-- Good formatting example</span><br>
                <span class="sql-keyword">SELECT</span> category,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">COUNT</span>(*) <span class="sql-keyword">AS</span> total_items,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-function">AVG</span>(price) <span class="sql-keyword">AS</span> avg_price<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> price > 50<br>
                <span class="sql-keyword">GROUP BY</span> category<br>
                <span class="sql-keyword">HAVING COUNT</span>(*) > 5<br>
                <span class="sql-keyword">ORDER BY</span> total_items <span class="sql-keyword">DESC</span>;
            </div>
        </div>

        <!-- NEW SECTION: SQL Powers Your Netlify API -->

        <!-- Slide 17a: SQL Powers Your Netlify API -->
        <div class="slide">
            <h1>SQL Powers Your Netlify API</h1>
            <h2>Connecting Lecture 6 to Lecture 7</h2>

            <div class="netlify-callout">
                <h4>üåê Remember Lecture 6?</h4>
                <p>You built a live Netlify frontend with API endpoints for YOUR project database. Today's SQL concepts make those APIs much more powerful!</p>
            </div>

            <h3 style="margin-top: 30px;">The Pattern:</h3>
            <div class="demo-box">
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Learn SQL concept</strong> with generic examples</li>
                    <li><strong>Adapt to YOUR project</strong> database schema</li>
                    <li><strong>Add to Netlify function</strong> as a new API endpoint</li>
                    <li><strong>Update frontend</strong> to call and display the results</li>
                </ol>
            </div>

            <div class="tip-box" style="margin-top: 30px;">
                <p><strong>By the end of today:</strong> Your project will have filtering, sorting, search, and dashboard statistics - all powered by SQL!</p>
            </div>
        </div>

        <!-- Slide 17b: WHERE Becomes Query Parameters -->
        <div class="slide">
            <h1>WHERE Clause ‚Üí Query Parameters</h1>
            <h2>Filtering Data via API</h2>

            <div class="two-column">
                <div>
                    <h3>SQL Query</h3>
                    <div class="sql-example" style="font-size: 0.9em;">
                        <span class="sql-keyword">SELECT</span> *<br>
                        <span class="sql-keyword">FROM</span> items<br>
                        <span class="sql-keyword">WHERE</span> category = <span class="sql-string">'Electronics'</span>;
                    </div>
                </div>
                <div>
                    <h3>API Call</h3>
                    <div class="sql-example" style="font-size: 0.9em;">
                        GET /api/items?category=Electronics
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px;">Netlify Function Code:</h3>
            <div class="sql-example" style="font-size: 0.85em;">
                <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> { category } = event.queryStringParameters || {};<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">let</span> query = <span class="sql-string">'SELECT * FROM items'</span>;<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> params = [];<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">if</span> (category) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;params.push(category);<br>
                &nbsp;&nbsp;&nbsp;&nbsp;query += <span class="sql-string">' WHERE category = $1'</span>;<br>
                &nbsp;&nbsp;}<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query, params);<br>
                &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                };
            </div>
        </div>

        <!-- Slide 17c: ORDER BY Becomes Sort Parameters -->
        <div class="slide">
            <h1>ORDER BY ‚Üí Sort Parameters</h1>
            <h2>Letting Users Control Sort Order</h2>

            <div class="netlify-callout">
                <h4>üí° User Experience Tip</h4>
                <p>Let your frontend users choose how to sort results. Common patterns: "Sort by: Date | Price | Name"</p>
            </div>

            <h3 style="margin-top: 20px;">Netlify Function with Safe Sorting:</h3>
            <div class="sql-example" style="font-size: 0.8em;">
                <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> { sortBy, order } = event.queryStringParameters || {};<br><br>

                &nbsp;&nbsp;<span class="sql-comment">// IMPORTANT: Whitelist valid sort columns (prevent SQL injection)</span><br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> validSorts = [<span class="sql-string">'name'</span>, <span class="sql-string">'price'</span>, <span class="sql-string">'created_date'</span>];<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> validOrders = [<span class="sql-string">'ASC'</span>, <span class="sql-string">'DESC'</span>];<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> sortColumn = validSorts.includes(sortBy) ? sortBy : <span class="sql-string">'created_date'</span>;<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> sortOrder = validOrders.includes(order?.toUpperCase()) ? order.toUpperCase() : <span class="sql-string">'DESC'</span>;<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`SELECT * FROM items ORDER BY ${sortColumn} ${sortOrder}`</span>;<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query);<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                };
            </div>

            <p style="margin-top: 15px;"><strong>API Call:</strong> <code>GET /api/items?sortBy=price&order=DESC</code></p>
        </div>

        <!-- Slide 17d: Aggregates Become Dashboard APIs -->
        <div class="slide">
            <h1>Aggregates ‚Üí Dashboard Statistics</h1>
            <h2>Powering Admin Panels and Dashboards</h2>

            <div class="netlify-callout">
                <h4>üìä Perfect Use Case</h4>
                <p>Create a <code>/api/stats</code> endpoint that returns high-level metrics for your dashboard page.</p>
            </div>

            <h3>Dashboard Stats Endpoint:</h3>
            <div class="sql-example" style="font-size: 0.8em;">
                <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`<br>
                &nbsp;&nbsp;&nbsp;&nbsp;SELECT<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COUNT(DISTINCT category) as total_categories,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COUNT(*) as total_items,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AVG(price) as avg_price,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MIN(price) as min_price,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MAX(price) as max_price<br>
                &nbsp;&nbsp;&nbsp;&nbsp;FROM items<br>
                &nbsp;&nbsp;`</span>;<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query);<br>
                &nbsp;&nbsp;<span class="sql-keyword">return</span> {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;statusCode: 200,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify(result.rows[0])<br>
                &nbsp;&nbsp;};<br>
                };
            </div>

            <h3 style="margin-top: 20px;">Returns JSON like:</h3>
            <div class="project-example">
                <code>{ "total_categories": 5, "total_items": 127, "avg_price": 49.99, "min_price": 9.99, "max_price": 299.99 }</code>
            </div>
        </div>

        <!-- Slide 17e: GROUP BY Becomes Category Breakdown APIs -->
        <div class="slide">
            <h1>GROUP BY ‚Üí Category Breakdown</h1>
            <h2>Analytics by Category</h2>

            <div class="netlify-callout">
                <h4>üìà Analytics Gold</h4>
                <p>GROUP BY queries power charts, graphs, and category breakdowns in your frontend.</p>
            </div>

            <h3>Items by Category Endpoint:</h3>
            <div class="sql-example" style="font-size: 0.85em;">
                <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`<br>
                &nbsp;&nbsp;&nbsp;&nbsp;SELECT category,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;COUNT(*) as item_count,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AVG(price) as avg_price<br>
                &nbsp;&nbsp;&nbsp;&nbsp;FROM items<br>
                &nbsp;&nbsp;&nbsp;&nbsp;GROUP BY category<br>
                &nbsp;&nbsp;&nbsp;&nbsp;ORDER BY item_count DESC<br>
                &nbsp;&nbsp;`</span>;<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query);<br>
                &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                };
            </div>

            <h3 style="margin-top: 20px;">Returns JSON like:</h3>
            <div class="sql-example" style="font-size: 0.9em;">
                [<br>
                &nbsp;&nbsp;{ "category": "Electronics", "item_count": 45, "avg_price": 129.99 },<br>
                &nbsp;&nbsp;{ "category": "Books", "item_count": 32, "avg_price": 24.99 },<br>
                &nbsp;&nbsp;{ "category": "Clothing", "item_count": 28, "avg_price": 39.99 }<br>
                ]
            </div>

            <p style="margin-top: 15px;"><strong>Frontend:</strong> Display as bar chart, pie chart, or table</p>
        </div>

        <!-- Slide 17f: LIKE Becomes Search -->
        <div class="slide">
            <h1>LIKE ‚Üí Search Functionality</h1>
            <h2>The Foundation of Every Search Box</h2>

            <div class="netlify-callout">
                <h4>üîç User Expectation</h4>
                <p>Users expect to search your data. LIKE makes it possible with simple pattern matching.</p>
            </div>

            <h3>Search Endpoint:</h3>
            <div class="sql-example" style="font-size: 0.8em;">
                <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> { q } = event.queryStringParameters || {};<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">if</span> (!q) {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">return</span> {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;statusCode: 400,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify({ error: <span class="sql-string">'Search query required'</span> })<br>
                &nbsp;&nbsp;&nbsp;&nbsp;};<br>
                &nbsp;&nbsp;}<br><br>

                &nbsp;&nbsp;<span class="sql-comment">// Use ILIKE for case-insensitive search (PostgreSQL)</span><br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`<br>
                &nbsp;&nbsp;&nbsp;&nbsp;SELECT * FROM items<br>
                &nbsp;&nbsp;&nbsp;&nbsp;WHERE name ILIKE $1 OR description ILIKE $1<br>
                &nbsp;&nbsp;&nbsp;&nbsp;ORDER BY name<br>
                &nbsp;&nbsp;`</span>;<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">const</span> searchPattern = <span class="sql-string">`%${q}%`</span>;<br>
                &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query, [searchPattern]);<br><br>

                &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                };
            </div>

            <p style="margin-top: 15px;"><strong>API Call:</strong> <code>GET /api/search?q=wireless</code></p>
        </div>

        <!-- Slide 18: Complex Query Activity -->
        <div class="slide">
            <h1>üéØ Activity: Plan Your API Enhancements</h1>
            <h2>20 Minutes - Individual Work</h2>
            <div class="activity-box">
                <p><strong>Goal:</strong> Plan 3-5 new API endpoints for YOUR project using today's SQL concepts.</p>

                <h3>For Each Endpoint, Specify:</h3>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Endpoint URL:</strong> e.g., <code>GET /api/recipes-by-cuisine?cuisine=Italian</code></li>
                    <li><strong>SQL Query:</strong> What query will power it?</li>
                    <li><strong>Purpose:</strong> What feature does this enable in your frontend?</li>
                </ol>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>Endpoint Ideas:</h4>
                <ul style="font-size: 0.95em;">
                    <li>‚úÖ <strong>Filter endpoint:</strong> Filter by category/type (uses WHERE)</li>
                    <li>‚úÖ <strong>Sort endpoint:</strong> Sortable list (uses ORDER BY)</li>
                    <li>‚úÖ <strong>Search endpoint:</strong> Search by keyword (uses LIKE)</li>
                    <li>‚úÖ <strong>Stats endpoint:</strong> Dashboard metrics (uses aggregates)</li>
                    <li>‚úÖ <strong>Category breakdown:</strong> Group by category (uses GROUP BY)</li>
                </ul>
                <button onclick="startTimer(20)">Start Timer</button>
            </div>
        </div>

        <!-- Slide 19: Common Pitfalls -->
        <div class="slide">
            <h1>Common SQL Pitfalls</h1>
            <h2>Learn from Others' Mistakes</h2>
            
            <h3>1. Forgetting GROUP BY</h3>
            <div class="sql-example">
                <span class="sql-comment">-- ‚ùå WRONG: Missing GROUP BY</span><br>
                <span class="sql-keyword">SELECT</span> branchNo, <span class="sql-function">COUNT</span>(*)<br>
                <span class="sql-keyword">FROM</span> Staff;<br><br>
                
                <span class="sql-comment">-- ‚úÖ CORRECT:</span><br>
                <span class="sql-keyword">SELECT</span> branchNo, <span class="sql-function">COUNT</span>(*)<br>
                <span class="sql-keyword">FROM</span> Staff<br>
                <span class="sql-keyword">GROUP BY</span> branchNo;
            </div>
            
            <h3>2. Wrong Clause Order</h3>
            <div class="sql-example">
                <span class="sql-comment">-- ‚ùå WRONG: ORDER BY before WHERE</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Staff<br>
                <span class="sql-keyword">ORDER BY</span> salary<br>
                <span class="sql-keyword">WHERE</span> salary > 10000;<br><br>
                
                <span class="sql-comment">-- ‚úÖ CORRECT:</span><br>
                <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> Staff<br>
                <span class="sql-keyword">WHERE</span> salary > 10000<br>
                <span class="sql-keyword">ORDER BY</span> salary;
            </div>
        </div>

        <!-- Slide 20: Performance Tips -->
        <div class="slide">
            <h1>Performance Considerations</h1>
            <h2>Writing Efficient Queries</h2>
            
            <div class="highlight-box">
                <h3>üöÄ Quick Performance Tips</h3>
                <ul>
                    <li><strong>Be Specific:</strong> Select only columns you need, not SELECT *</li>
                    <li><strong>Filter Early:</strong> Use WHERE to reduce data before grouping</li>
                    <li><strong>Index Awareness:</strong> Filters on indexed columns are faster</li>
                    <li><strong>Limit Results:</strong> Use LIMIT/TOP when testing queries</li>
                    <li><strong>Avoid Wildcards at Start:</strong> LIKE '%text' is slower than LIKE 'text%'</li>
                </ul>
            </div>
            
            <h3>Example: Improving Query Performance</h3>
            <div class="sql-example">
                <span class="sql-comment">-- Slower: Gets all columns, wildcard at start</span><br>
                <span class="sql-keyword">SELECT</span> *<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> name <span class="sql-keyword">LIKE</span> <span class="sql-string">'%widget%'</span>;<br><br>

                <span class="sql-comment">-- Faster: Specific columns, wildcard at end when possible</span><br>
                <span class="sql-keyword">SELECT</span> id, name, price<br>
                <span class="sql-keyword">FROM</span> items<br>
                <span class="sql-keyword">WHERE</span> name <span class="sql-keyword">LIKE</span> <span class="sql-string">'Widget%'</span>;
            </div>

            <div class="netlify-callout" style="margin-top: 20px;">
                <h4>üí° API Performance Matters</h4>
                <p>Slow queries = slow API = frustrated users. Use EXPLAIN to analyze your Netlify function queries!</p>
            </div>
        </div>

        <!-- Slide 21: Preview of Joins -->
        <div class="slide">
            <h1>Preview: Joining Tables</h1>
            <h2>Coming Next Lecture</h2>
            <p>So far, we've queried single tables. Real power comes from combining data:</p>

            <div class="sql-example">
                <span class="sql-comment">-- Example: Get items with their category details</span><br>
                <span class="sql-keyword">SELECT</span> i.name, i.price, c.category_name, c.description<br>
                <span class="sql-keyword">FROM</span> items i<br>
                <span class="sql-keyword">INNER JOIN</span> categories c <span class="sql-keyword">ON</span> i.category_id = c.category_id;
            </div>

            <h3>Types of Joins We'll Cover:</h3>
            <ul>
                <li><strong>INNER JOIN:</strong> Matching rows from both tables</li>
                <li><strong>LEFT JOIN:</strong> All rows from left table</li>
                <li><strong>RIGHT JOIN:</strong> All rows from right table</li>
                <li><strong>FULL OUTER JOIN:</strong> All rows from both tables</li>
                <li><strong>CROSS JOIN:</strong> Cartesian product</li>
            </ul>

            <div class="netlify-callout" style="margin-top: 20px;">
                <h4>üíª Why Joins Matter for Your API</h4>
                <p>JOINs let your API return rich, related data in one request instead of requiring multiple API calls from your frontend!</p>
            </div>
        </div>

        <!-- IN-CLASS EXERCISES -->

        <!-- Slide 22: Exercise Overview -->
        <div class="slide">
            <h1>In-Class Exercises <span class="emoji">üèóÔ∏è</span></h1>
            <h2>Enhance Your Netlify APIs</h2>

            <div class="netlify-callout">
                <h3>Goal: Level Up Your Project</h3>
                <p style="font-size: 1.15em;">Take the Netlify frontend you built in Lecture 6 and add powerful new features using today's SQL concepts!</p>
            </div>

            <div class="activity-box">
                <h3>What You'll Build:</h3>
                <ul style="font-size: 1.15em;">
                    <li>‚úÖ <strong>Exercise 1:</strong> Add filtering and sorting endpoints</li>
                    <li>‚úÖ <strong>Exercise 2:</strong> Create a dashboard stats endpoint</li>
                    <li>‚úÖ <strong>Exercise 3:</strong> Implement search functionality</li>
                </ul>
            </div>

            <div class="tip-box" style="margin-top: 20px;">
                <p><strong>By the end:</strong> Your project will have professional features like search, filtering, and analytics!</p>
            </div>
        </div>

        <!-- Slide 23: Exercise 1 - Part A -->
        <div class="slide">
            <h1>Exercise 1A: Filter Endpoint</h1>
            <h2>Individual Exercise (15 minutes)</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.1em;">Create a new Netlify API endpoint that <strong>filters</strong> your data by one category/field.</p>
            </div>

            <div class="demo-box">
                <h3>Example: Recipe Database</h3>
                <p><strong>Endpoint:</strong> <code>/api/recipes-by-cuisine.js</code></p>
                <p><strong>URL:</strong> <code>GET /api/recipes-by-cuisine?cuisine=Italian</code></p>
                <p><strong>SQL Query:</strong></p>
                <div class="sql-example" style="font-size: 0.9em;">
                    <span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> recipes<br>
                    <span class="sql-keyword">WHERE</span> cuisine = $1<br>
                    <span class="sql-keyword">ORDER BY</span> name <span class="sql-keyword">ASC</span>;
                </div>
            </div>

            <div class="bridge-box">
                <h4>Your Turn:</h4>
                <ol style="font-size: 1.05em;">
                    <li>Create new file: <code>netlify/functions/filter-by-[field].js</code></li>
                    <li>Accept query parameter for filtering</li>
                    <li>Use parameterized query with WHERE clause</li>
                    <li>Test with: <code>netlify dev</code></li>
                </ol>
            </div>

            <button data-timer="15">Start 15-Minute Timer</button>
        </div>

        <!-- Slide 24: Exercise 1 - Part B -->
        <div class="slide">
            <h1>Exercise 1B: Add Sorting</h1>
            <h2>Individual Exercise (15 minutes)</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.1em;">Enhance the filter endpoint to accept <strong>sort</strong> parameters.</p>
            </div>

            <div class="demo-box">
                <h3>Code Template:</h3>
                <div class="sql-example" style="font-size: 0.8em;">
                    <span class="sql-keyword">const</span> { Pool } = require(<span class="sql-string">'pg'</span>);<br>
                    <span class="sql-keyword">const</span> pool = <span class="sql-keyword">new</span> Pool({ connectionString: process.env.DATABASE_URL });<br><br>

                    <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> { category, sortBy, order } = event.queryStringParameters || {};<br><br>

                    &nbsp;&nbsp;<span class="sql-comment">// IMPORTANT: Whitelist valid sort columns</span><br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> validSorts = [<span class="sql-string">'name'</span>, <span class="sql-string">'date'</span>, <span class="sql-string">'price'</span>];<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> validOrders = [<span class="sql-string">'ASC'</span>, <span class="sql-string">'DESC'</span>];<br><br>

                    &nbsp;&nbsp;<span class="sql-keyword">const</span> sortColumn = validSorts.includes(sortBy) ? sortBy : <span class="sql-string">'name'</span>;<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> sortOrder = validOrders.includes(order?.toUpperCase()) ? order : <span class="sql-string">'ASC'</span>;<br><br>

                    &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`SELECT * FROM your_table WHERE category = $1 ORDER BY ${sortColumn} ${sortOrder}`</span>;<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query, [category]);<br><br>

                    &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                    };
                </div>
            </div>

            <button data-timer="15">Start 15-Minute Timer</button>
        </div>

        <!-- Slide 25: Exercise 2 -->
        <div class="slide">
            <h1>Exercise 2: Dashboard Stats Endpoint</h1>
            <h2>Individual Exercise (20 minutes)</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.1em;">Create an API endpoint that returns <strong>aggregate statistics</strong> for a dashboard.</p>
            </div>

            <div class="demo-box">
                <h3>Example Stats to Calculate:</h3>
                <ul style="font-size: 1.05em;">
                    <li>Total count of records: <code>COUNT(*)</code></li>
                    <li>Average of numeric field: <code>AVG(field)</code></li>
                    <li>Min/Max values: <code>MIN(field), MAX(field)</code></li>
                    <li>Group counts: <code>COUNT(*) ... GROUP BY category</code></li>
                </ul>
            </div>

            <div class="bridge-box">
                <h4>Implementation Steps:</h4>
                <ol style="font-size: 1.05em;">
                    <li>Create <code>/api/stats.js</code> endpoint</li>
                    <li>Write SQL query with aggregate functions</li>
                    <li>Return JSON with statistics</li>
                    <li>Test the endpoint</li>
                    <li><strong>Bonus:</strong> Display stats in your frontend HTML</li>
                </ol>
            </div>

            <button data-timer="20">Start 20-Minute Timer</button>
        </div>

        <!-- Slide 26: Exercise 3 -->
        <div class="slide">
            <h1>Exercise 3: Search Endpoint</h1>
            <h2>Individual Exercise (20 minutes)</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.1em;">Implement a <strong>search</strong> endpoint using LIKE for pattern matching.</p>
            </div>

            <div class="demo-box">
                <h3>Search Template:</h3>
                <div class="sql-example" style="font-size: 0.8em;">
                    <span class="sql-keyword">exports.handler</span> = <span class="sql-keyword">async</span> (event, context) => {<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> { q } = event.queryStringParameters || {};<br><br>

                    &nbsp;&nbsp;<span class="sql-keyword">if</span> (!q) {<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 400, body: JSON.stringify({ error: <span class="sql-string">'Search query required'</span> }) };<br>
                    &nbsp;&nbsp;}<br><br>

                    &nbsp;&nbsp;<span class="sql-comment">// Use ILIKE for case-insensitive (PostgreSQL)</span><br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> query = <span class="sql-string">`SELECT * FROM your_table WHERE name ILIKE $1 ORDER BY name`</span>;<br>
                    &nbsp;&nbsp;<span class="sql-keyword">const</span> searchPattern = <span class="sql-string">`%${q}%`</span>;<br><br>

                    &nbsp;&nbsp;<span class="sql-keyword">const</span> result = <span class="sql-keyword">await</span> pool.query(query, [searchPattern]);<br>
                    &nbsp;&nbsp;<span class="sql-keyword">return</span> { statusCode: 200, body: JSON.stringify(result.rows) };<br>
                    };
                </div>
            </div>

            <div class="bridge-box">
                <h4>Your Turn:</h4>
                <ol style="font-size: 1.05em;">
                    <li>Create <code>/api/search.js</code></li>
                    <li>Accept <code>q</code> query parameter</li>
                    <li>Search 1-2 text fields in your table</li>
                    <li><strong>Bonus:</strong> Add search box to your frontend!</li>
                </ol>
            </div>

            <button data-timer="20">Start 20-Minute Timer</button>
        </div>

        <!-- Slide 27: Exercise Wrap-Up -->
        <div class="slide">
            <h1>Exercise Wrap-Up</h1>
            <h2>What You've Accomplished</h2>

            <div class="netlify-callout">
                <h3>üéâ Your Project Now Has:</h3>
                <ul style="font-size: 1.15em; line-height: 1.8;">
                    <li>‚úÖ <strong>Filtering:</strong> Users can filter by category/type</li>
                    <li>‚úÖ <strong>Sorting:</strong> Sortable lists by different fields</li>
                    <li>‚úÖ <strong>Dashboard:</strong> Aggregate statistics at a glance</li>
                    <li>‚úÖ <strong>Search:</strong> Users can search your data</li>
                </ul>
            </div>

            <div class="tip-box" style="margin-top: 30px;">
                <h3>üí° Next Steps (Optional)</h3>
                <ul style="font-size: 1.05em;">
                    <li>Add a GROUP BY endpoint for category breakdowns</li>
                    <li>Implement pagination with LIMIT and OFFSET</li>
                    <li>Create a "top 10" endpoint with ORDER BY + LIMIT</li>
                    <li>Update your frontend UI to use these new endpoints</li>
                </ul>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <h3>Testing Your APIs:</h3>
                <p>Run <code>netlify dev</code> and visit:</p>
                <ul style="font-family: monospace; font-size: 0.95em;">
                    <li>http://localhost:8888/api/filter-by-category?category=value</li>
                    <li>http://localhost:8888/api/stats</li>
                    <li>http://localhost:8888/api/search?q=keyword</li>
                </ul>
            </div>
        </div>

        <!-- Slide 28: Deployment -->
        <div class="slide">
            <h1>Deploy Your Enhanced Project</h1>
            <h2>Share Your Work!</h2>

            <div class="netlify-callout">
                <h3>üöÄ Ready to Deploy?</h3>
                <p style="font-size: 1.1em;">If your exercises are working locally, push to GitHub to deploy to Netlify!</p>
            </div>

            <div class="demo-box">
                <h3>Deployment Steps:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Test locally:</strong> <code>netlify dev</code></li>
                    <li><strong>Commit changes:</strong> <code>git add . && git commit -m "Add filtering, stats, and search APIs"</code></li>
                    <li><strong>Push to GitHub:</strong> <code>git push origin main</code></li>
                    <li><strong>Auto-deploy:</strong> Netlify automatically builds and deploys</li>
                    <li><strong>Test live:</strong> Visit your Netlify URL</li>
                </ol>
            </div>

            <div class="warning-box" style="margin-top: 20px;">
                <h3>‚ö†Ô∏è Before Deploying:</h3>
                <ul style="font-size: 1.05em;">
                    <li>Verify DATABASE_URL environment variable is set in Netlify</li>
                    <li>Test all endpoints work locally</li>
                    <li>Check for console errors</li>
                </ul>
            </div>
        </div>

        <!-- Slide 28a: Polish Your Frontend Design -->
        <div class="slide">
            <h1>Polish Your Frontend</h1>
            <h2>Add Context and Design to Your Tables</h2>

            <div class="netlify-callout">
                <h4>üé® Make It Beautiful!</h4>
                <p>Raw tables work, but adding context, styling, and user-friendly design makes your project professional.</p>
            </div>

            <div class="demo-box">
                <h3>HTML Structure Enhancement:</h3>
                <pre class="code-example"><span class="sql-comment">&lt;!-- Instead of just raw tables... --&gt;</span>
<span class="sql-keyword">&lt;body&gt;</span>
  <span class="sql-comment">&lt;!-- Add a header with project context --&gt;</span>
  <span class="sql-keyword">&lt;header&gt;</span>
    <span class="sql-keyword">&lt;h1&gt;</span>My Database Project<span class="sql-keyword">&lt;/h1&gt;</span>
    <span class="sql-keyword">&lt;p&gt;</span>A comprehensive system for managing [your domain]<span class="sql-keyword">&lt;/p&gt;</span>
  <span class="sql-keyword">&lt;/header&gt;</span>

  <span class="sql-keyword">&lt;main&gt;</span>
    <span class="sql-comment">&lt;!-- Add sections with descriptions --&gt;</span>
    <span class="sql-keyword">&lt;section</span> <span class="sql-keyword">class</span>=<span class="sql-string">"data-section"</span><span class="sql-keyword">&gt;</span>
      <span class="sql-keyword">&lt;div</span> <span class="sql-keyword">class</span>=<span class="sql-string">"section-header"</span><span class="sql-keyword">&gt;</span>
        <span class="sql-keyword">&lt;h2&gt;</span>Table 1: [Descriptive Name]<span class="sql-keyword">&lt;/h2&gt;</span>
        <span class="sql-keyword">&lt;p</span> <span class="sql-keyword">class</span>=<span class="sql-string">"section-description"</span><span class="sql-keyword">&gt;</span>
          This table contains [brief explanation of what this data represents]
        <span class="sql-keyword">&lt;/p&gt;</span>
        <span class="sql-keyword">&lt;p</span> <span class="sql-keyword">class</span>=<span class="sql-string">"record-count"</span><span class="sql-keyword">&gt;</span>Total Records: <span class="sql-keyword">&lt;span</span> <span class="sql-keyword">id</span>=<span class="sql-string">"count1"</span><span class="sql-keyword">&gt;</span>0<span class="sql-keyword">&lt;/span&gt;&lt;/p&gt;</span>
      <span class="sql-keyword">&lt;/div&gt;</span>
      <span class="sql-keyword">&lt;div</span> <span class="sql-keyword">id</span>=<span class="sql-string">"table1-container"</span><span class="sql-keyword">&gt;&lt;/div&gt;</span>
    <span class="sql-keyword">&lt;/section&gt;</span>

    <span class="sql-comment">&lt;!-- Repeat for table 2 and table 3 --&gt;</span>
  <span class="sql-keyword">&lt;/main&gt;</span>
<span class="sql-keyword">&lt;/body&gt;</span></pre>
            </div>
        </div>

        <!-- Slide 28b: CSS Styling for Professional Tables -->
        <div class="slide">
            <h1>Add Professional Styling</h1>
            <h2>CSS to Make Tables Shine</h2>

            <div class="demo-box">
                <h3>Recommended CSS:</h3>
                <pre class="code-example"><span class="sql-comment">/* Add to your styles.css or &lt;style&gt; tag */</span>
<span class="sql-keyword">body</span> {
  font-family: <span class="sql-string">'Arial'</span>, sans-serif;
  max-width: <span class="sql-number">1200</span>px;
  margin: <span class="sql-number">0</span> auto;
  padding: <span class="sql-number">20</span>px;
  background-color: <span class="sql-string">#f5f5f5</span>;
}

<span class="sql-keyword">header</span> {
  text-align: center;
  padding: <span class="sql-number">30</span>px;
  background: linear-gradient(<span class="sql-number">135</span>deg, <span class="sql-string">#667eea</span> 0%, <span class="sql-string">#764ba2</span> 100%);
  color: white;
  border-radius: <span class="sql-number">10</span>px;
  margin-bottom: <span class="sql-number">30</span>px;
}

<span class="sql-keyword">.data-section</span> {
  background: white;
  padding: <span class="sql-number">25</span>px;
  margin-bottom: <span class="sql-number">30</span>px;
  border-radius: <span class="sql-number">8</span>px;
  box-shadow: <span class="sql-number">0</span> <span class="sql-number">2</span>px <span class="sql-number">4</span>px rgba(<span class="sql-number">0</span>,<span class="sql-number">0</span>,<span class="sql-number">0</span>,<span class="sql-number">0.1</span>);
}

<span class="sql-keyword">.section-header h2</span> {
  color: <span class="sql-string">#333</span>;
  border-bottom: <span class="sql-number">3</span>px solid <span class="sql-string">#667eea</span>;
  padding-bottom: <span class="sql-number">10</span>px;
}

<span class="sql-keyword">.section-description</span> {
  color: <span class="sql-string">#666</span>;
  font-style: italic;
  margin: <span class="sql-number">10</span>px 0;
}

<span class="sql-keyword">.record-count</span> {
  color: <span class="sql-string">#764ba2</span>;
  font-weight: bold;
}

<span class="sql-comment">/* Style your tables */</span>
<span class="sql-keyword">table</span> {
  width: <span class="sql-number">100</span>%;
  border-collapse: collapse;
  margin-top: <span class="sql-number">15</span>px;
}

<span class="sql-keyword">th</span> {
  background-color: <span class="sql-string">#667eea</span>;
  color: white;
  padding: <span class="sql-number">12</span>px;
  text-align: left;
  font-weight: <span class="sql-number">600</span>;
}

<span class="sql-keyword">td</span> {
  padding: <span class="sql-number">10</span>px;
  border-bottom: <span class="sql-number">1</span>px solid <span class="sql-string">#ddd</span>;
}

<span class="sql-keyword">tr:hover</span> {
  background-color: <span class="sql-string">#f0f0f0</span>;
}</pre>
            </div>

            <div class="bridge-box">
                <h4>üåâ Update Your JavaScript</h4>
                <p>Don't forget to update the <code>displayTable()</code> function to populate the record count:</p>
                <pre class="code-example" style="font-size: 0.85em;">document.getElementById(<span class="sql-string">'count1'</span>).textContent = rows.length;</pre>
            </div>

            <div class="tip-box">
                <strong>üí° Pro Tip:</strong> Add loading states, error messages, and empty state handling for a polished user experience!
            </div>
        </div>

        <!-- HOMEWORK SECTION -->

        <!-- Slide 29: Homework Overview -->
        <div class="slide">
            <h1>Homework Assignment <span class="emoji">üìù</span></h1>
            <h2>Week 7: Enhance Your Project APIs</h2>

            <div class="netlify-callout">
                <h3>Assignment Overview</h3>
                <p style="font-size: 1.15em;">Build on your Netlify project by implementing advanced SQL queries and analyzing their performance.</p>
            </div>

            <div class="tip-box">
                <h3>Due Date: <strong>Before Class Next Week</strong></h3>
                <p>Submit live Netlify URL + GitHub commit URL to D2L</p>
            </div>

            <div class="activity-box">
                <h3>Components:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Part 1:</strong> Implement 5+ Advanced SQL Queries (40 points)</li>
                    <li><strong>Part 2:</strong> Create 3 New API Endpoints (40 points)</li>
                    <li><strong>Part 3:</strong> EXPLAIN Analysis & Optimization (20 points)</li>
                </ol>
                <p style="margin-top: 15px; font-size: 1.1em;"><strong>Total: 100 points</strong></p>
            </div>
        </div>

        <!-- Slide 30: Part 1 - Advanced Queries -->
        <div class="slide">
            <h1>Part 1: Write Advanced SQL Queries</h1>
            <h2>40 Points</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Write <strong>5+ SQL queries</strong> for your project database demonstrating different concepts from today's lecture.</p>
            </div>

            <div class="demo-box">
                <h3>Required Query Types:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Filtered Query:</strong> WHERE with 2+ conditions (using AND/OR)</li>
                    <li><strong>Sorted Query:</strong> ORDER BY on at least one column</li>
                    <li><strong>Search Query:</strong> LIKE for pattern matching</li>
                    <li><strong>Aggregate Query:</strong> COUNT, SUM, AVG, MIN, or MAX</li>
                    <li><strong>Grouped Query:</strong> GROUP BY with aggregate + HAVING clause</li>
                </ol>
            </div>

            <div class="bridge-box">
                <h4>Deliverable:</h4>
                <p>Create a file <code>homework_queries.sql</code> with all 5+ queries, each with:</p>
                <ul style="font-size: 1.05em;">
                    <li>Comment explaining what the query does</li>
                    <li>The SQL query itself</li>
                    <li>Sample output (copy/paste or screenshot)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 31: Part 2 - API Endpoints -->
        <div class="slide">
            <h1>Part 2: Implement API Endpoints</h1>
            <h2>40 Points</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Create <strong>3 new Netlify API endpoints</strong> using queries from Part 1.</p>
            </div>

            <div class="demo-box">
                <h3>Requirements:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Endpoint 1: Filter + Sort</strong>
                        <ul style="margin-top: 8px;">
                            <li>Accept query parameters for filtering and sorting</li>
                            <li>Use parameterized queries (prevent SQL injection)</li>
                            <li>Example: <code>/api/items-by-category?category=value&sortBy=name&order=ASC</code></li>
                        </ul>
                    </li>
                    <li><strong>Endpoint 2: Dashboard Stats</strong>
                        <ul style="margin-top: 8px;">
                            <li>Return aggregate statistics as JSON</li>
                            <li>Use COUNT, AVG, MIN, MAX, or SUM</li>
                            <li>Example: <code>/api/stats</code></li>
                        </ul>
                    </li>
                    <li><strong>Endpoint 3: Search</strong>
                        <ul style="margin-top: 8px;">
                            <li>Accept search query parameter</li>
                            <li>Use LIKE/ILIKE for pattern matching</li>
                            <li>Example: <code>/api/search?q=keyword</code></li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 32: Part 3 - EXPLAIN Analysis -->
        <div class="slide">
            <h1>Part 3: Query Performance Analysis</h1>
            <h2>20 Points</h2>

            <div class="activity-box">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Analyze the performance of your <strong>most complex query</strong> from Part 1 using EXPLAIN.</p>
            </div>

            <div class="demo-box">
                <h3>Requirements:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Run EXPLAIN:</strong>
                        <ul style="margin-top: 8px;">
                            <li>PostgreSQL: <code>EXPLAIN ANALYZE your_query;</code></li>
                            <li>Take screenshot of the output</li>
                        </ul>
                    </li>
                    <li><strong>Write Analysis (150-200 words):</strong>
                        <ul style="margin-top: 8px;">
                            <li>What type of scan is being used? (Seq Scan, Index Scan, etc.)</li>
                            <li>Approximately how many rows are examined?</li>
                            <li>Is the query efficient? Why or why not?</li>
                            <li>Suggest ONE optimization (e.g., add an index, rewrite query, etc.)</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="tip-box">
                <h3>How to Run EXPLAIN on Neon:</h3>
                <ul style="font-size: 1.05em;">
                    <li>Use Neon SQL Editor (in your Neon dashboard)</li>
                    <li>OR connect via <code>psql</code> using your DATABASE_URL</li>
                    <li>Run <code>EXPLAIN ANALYZE</code> before your SELECT query</li>
                </ul>
            </div>
        </div>

        <!-- Slide 33: Frontend Integration (Bonus) -->
        <div class="slide">
            <h1>Bonus: Frontend Integration</h1>
            <h2>+10 Extra Credit Points</h2>

            <div class="netlify-callout">
                <h3>Optional Bonus:</h3>
                <p style="font-size: 1.15em;">Update your HTML frontend to use at least 2 of your new API endpoints.</p>
            </div>

            <div class="demo-box">
                <h3>Implementation Ideas:</h3>
                <ul style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Filter dropdown:</strong> Let users filter by category</li>
                    <li><strong>Sort buttons:</strong> "Sort by Name" / "Sort by Date" buttons</li>
                    <li><strong>Search box:</strong> Real-time search as user types</li>
                    <li><strong>Dashboard cards:</strong> Display stats in styled cards</li>
                    <li><strong>Category breakdown:</strong> Show counts by category</li>
                </ul>
            </div>

            <div class="tip-box">
                <h3>To Earn Bonus Points:</h3>
                <p>Your live Netlify site must demonstrate the frontend using your new APIs. Include screenshots in your submission showing the features in action!</p>
            </div>
        </div>

        <!-- Slide 34: Submission Requirements -->
        <div class="slide">
            <h1>Submission Requirements <span class="emoji">‚úÖ</span></h1>

            <div class="demo-box">
                <h3>What to Submit:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Live Netlify URL</strong>
                        <ul style="margin-top: 8px;">
                            <li>Your deployed site with working API endpoints</li>
                            <li>Test all 3 endpoints are accessible</li>
                        </ul>
                    </li>
                    <li><strong>GitHub Repository</strong>
                        <ul style="margin-top: 8px;">
                            <li>Must include <code>homework_queries.sql</code></li>
                            <li>Must include new API function files</li>
                            <li>Submit commit URL to D2L</li>
                        </ul>
                    </li>
                    <li><strong>README.md or Homework Document</strong>
                        <ul style="margin-top: 8px;">
                            <li>Part 3 EXPLAIN screenshot + analysis</li>
                            <li>API endpoint URLs for testing</li>
                            <li>Brief description of each endpoint</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <h3>Grading Rubric:</h3>
                <table class="table-schema" style="font-size: 0.95em;">
                    <tr>
                        <th>Component</th>
                        <th>Points</th>
                        <th>Criteria</th>
                    </tr>
                    <tr>
                        <td><strong>Part 1: Queries</strong></td>
                        <td>40</td>
                        <td>All 5 query types present (8 pts each)</td>
                    </tr>
                    <tr>
                        <td><strong>Part 2: APIs</strong></td>
                        <td>40</td>
                        <td>3 working endpoints, proper error handling</td>
                    </tr>
                    <tr>
                        <td><strong>Part 3: Analysis</strong></td>
                        <td>20</td>
                        <td>EXPLAIN screenshot (10), Analysis quality (10)</td>
                    </tr>
                    <tr>
                        <td><strong>Bonus: Frontend</strong></td>
                        <td>+10</td>
                        <td>Working UI using 2+ new endpoints</td>
                    </tr>
                </table>
            </div>

            <div class="tip-box" style="margin-top: 20px;">
                <h3>Due: Before Next Week's Class</h3>
                <p>Submit to D2L: Live Netlify URL + GitHub commit URL</p>
            </div>
        </div>

        <!-- Slide 35: Practice Problems -->
        <div class="slide">
            <h1>Additional Practice Problems</h1>
            <h2>Optional Extra Practice for YOUR Project</h2>
            <div class="activity-box">
                <p><strong>For additional practice (not graded):</strong></p>

                <h3>Apply these patterns to YOUR project database:</h3>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Range query:</strong> Find items between two values (dates, prices, quantities)</li>
                    <li><strong>GROUP BY count:</strong> Count how many items are in each category/type</li>
                    <li><strong>MIN/MAX:</strong> Find the oldest and newest, or cheapest and most expensive</li>
                    <li><strong>HAVING filter:</strong> Show categories with more than X items</li>
                    <li><strong>Pattern match:</strong> Find records where email/text field matches a pattern</li>
                    <li><strong>Prefix search:</strong> Find items whose names start with specific text</li>
                    <li><strong>AVG by group:</strong> Calculate average price/value/rating by category</li>
                    <li><strong>TOP N with LIMIT:</strong> Show the top 5-10 items by some criteria + ORDER BY</li>
                </ol>

                <p style="margin-top: 20px;"><strong>Bonus:</strong> Write a query using a subquery (preview of next week)</p>
            </div>

            <div class="bridge-box" style="margin-top: 20px;">
                <h4>üí° Pro Tip:</h4>
                <p>As you write these queries, think about which ones would make useful API endpoints for your Netlify project!</p>
            </div>
        </div>

        <!-- Slide 23: Key Takeaways -->
        <div class="slide">
            <h1>Key Takeaways</h1>
            <h2>What You Should Remember</h2>
            
            <div class="highlight-box">
                <h3>‚ú® Essential SQL Concepts</h3>
                <ul>
                    <li>SQL is declarative - you specify WHAT you want, not HOW to get it</li>
                    <li>SELECT and FROM are the only mandatory clauses</li>
                    <li>Clause order matters: SELECT ‚Üí FROM ‚Üí WHERE ‚Üí GROUP BY ‚Üí HAVING ‚Üí ORDER BY</li>
                    <li>WHERE filters rows, HAVING filters groups</li>
                    <li>Aggregate functions operate on sets of rows</li>
                    <li>Pattern matching with LIKE provides flexible searching</li>
                    <li>Good formatting makes queries readable and maintainable</li>
                </ul>
            </div>
            
            <h3>üéØ You Can Now:</h3>
            <ul>
                <li>Write basic to intermediate SELECT statements</li>
                <li>Filter and sort query results</li>
                <li>Use aggregate functions for calculations</li>
                <li>Group data and filter groups</li>
                <li>Apply pattern matching in queries</li>
            </ul>
        </div>

        <!-- Slide 24: Resources -->
        <div class="slide">
            <h1>Resources & Next Steps</h1>
            <h2>Continue Your SQL Journey</h2>
            
            <h3>üìö Recommended Reading</h3>
            <ul>
                <li>Textbook: Chapter 6 (SQL Data Manipulation)</li>
                <li>SQL Tutorial: w3schools.com/sql</li>
                <li>Practice: SQLZoo, HackerRank SQL challenges</li>
            </ul>
            
            <h3>üéØ Before Next Class</h3>
            <ul>
                <li>Complete homework queries</li>
                <li>Review today's examples</li>
                <li>Try variations of the queries we wrote</li>
                <li>Read Chapter 7 preview (Joins and Subqueries)</li>
            </ul>
            
            <h3>üí° Next Lecture: SQL Part 2</h3>
            <ul>
                <li>Multi-table queries (JOINs)</li>
                <li>Subqueries and nested SELECT</li>
                <li>Set operations (UNION, INTERSECT, EXCEPT)</li>
                <li>Advanced filtering techniques</li>
            </ul>
        </div>

        <!-- Slide 25: Questions -->
        <div class="slide">
            <h1>Questions & Discussion</h1>
            <h2>Let's Clarify Any Doubts</h2>
            
            <div style="text-align: center; margin-top: 50px;">
                <h3>ü§î Common Questions from Students:</h3>
                <ul style="text-align: left; display: inline-block;">
                    <li>When should I use WHERE vs HAVING?</li>
                    <li>Can I use multiple aggregate functions?</li>
                    <li>How do I handle NULL values?</li>
                    <li>What's the difference between = and LIKE?</li>
                    <li>How do I optimize slow queries?</li>
                </ul>
            </div>
            
            <div style="margin-top: 50px; text-align: center;">
                <p><strong>Office Hours:</strong> Tuesday & Thursday, 2-4 PM</p>
                <p><strong>Email:</strong> bobby.reed@okcu.edu</p>
                <p><strong>Course Forum:</strong> Post questions anytime!</p>
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">44</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // SQL Part 1 specific interactions
        document.addEventListener('slidechange', (e) => {
            console.log(`Slide ${e.detail.currentSlide + 1} of ${e.detail.totalSlides}`);
        });
    </script>
</body>
</html>