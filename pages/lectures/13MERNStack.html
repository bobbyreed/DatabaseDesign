<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 13 - MERN Stack Deployment - CSCI 5603</title>

    <!-- Database Design Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">

    <!-- Import Courier Prime for analog feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Lecture-Specific Styles -->
    <style>
        /* Override font for analog feel */
        body, .slide, h1, h2, h3, p, li {
            font-family: 'Courier Prime', 'IBM Plex Mono', 'Courier New', monospace !important;
        }

        /* Database-specific styling */
        .erd-diagram {
            background: var(--bg-accent);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier Prime', monospace;
        }

        .deployment-step {
            background: var(--bg-secondary);
            border-left: 4px solid var(--ocu-true-blue);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .deployment-step h4 {
            color: var(--ocu-true-blue);
            margin-top: 0;
        }

        .command-box {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            font-family: 'IBM Plex Mono', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }

        .command-box .prompt {
            color: #4ec9b0;
        }

        .command-box .comment {
            color: #6a9955;
        }

        .checkpoint {
            background: var(--success-color);
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <!-- Theme toggle will be automatically added by JavaScript -->

    <div class="presentation-container">
        <!-- Timer display -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">Lecture 13 - MERN Stack Deployment
                 <button class="home"><a href="../../index.html">Home</a></button>
            </span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide active">
            <h1>MERN Stack Deployment</h1>
            <h2>Full-Stack Database Application <span class="emoji"></span></h2>
            <p style="font-size: 1.5em; margin-top: 40px;">CSCI 5603 - Database Design</p>
            <p style="font-size: 1.3em;">Week 13, Lecture 13</p>
            <p style="margin-top: auto; font-style: italic;">Deploying MongoDB-powered applications to the cloud!</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Learning Objectives</h1>
            <div class="success-box" style="margin-bottom: 20px;">
                <strong>Recap:</strong> You've already deployed a full MERN stack! Today we'll deeply understand how it all works together.
            </div>
            <ul style="font-size: 1.4em; line-height: 2;">
                <li>ðŸŽ¯ Trace complete data flow from React UI through Express to MongoDB and back</li>
                <li>ðŸŽ¯ Understand CORS and why cross-origin requests need configuration</li>
                <li>ðŸŽ¯ Master environment variables for secure database connections</li>
                <li>ðŸŽ¯ Debug common MERN stack deployment issues</li>
                <li>ðŸŽ¯ Analyze HTTP request/response cycles in a full-stack app</li>
                <li>ðŸŽ¯ Identify security best practices for production deployments</li>
            </ul>
        </div>

        <!-- Slide 3: The MERN Stack -->
        <div class="slide">
            <h1>What is the MERN Stack? <span class="emoji"></span></h1>

            <div class="erd-diagram" style="padding: 30px;">
                <pre style="text-align: center; font-size: 1.0em;">
    
      <strong>M</strong>ongoDB - NoSQL Database          
      Document-based data storage            
    ,
                    
    4
      <strong>E</strong>xpress.js - Backend Framework     
      RESTful API & Business Logic           
    ,
                    
    4
      <strong>R</strong>eact - Frontend Library           
      User Interface Components              
    ,
                    
    4
      <strong>N</strong>ode.js - JavaScript Runtime       
      Runs server-side JavaScript            
    
                </pre>
            </div>

            <div class="tip-box">
                <strong>Focus for Today:</strong> We'll emphasize the MongoDB database layer while providing complete, ready-to-use code for the web components.
            </div>
        </div>

        <!-- Slide 4: Today's Architecture -->
        <div class="slide">
            <h1>Deployment Architecture <span class="emoji"></span></h1>

            <div class="erd-diagram" style="padding: 25px;">
                <pre style="font-size: 0.95em;">
    
             <strong>Netlify</strong> (Frontend Host)        
      " React Application                       
      " Static file serving                     
      " Automatic builds from GitHub            
      https://your-app.netlify.app              
    ,
                        HTTPS API Requests
                       
    
             <strong>Render</strong> (Backend Host)          
      " Express.js Server                       
      " RESTful API Endpoints                   
      " Environment Variables (DB Connection)   
      https://your-api.onrender.com             
    ,
                        MongoDB Connection String
                       
    
          <strong>MongoDB Atlas</strong> (Database)        
      " Cloud-hosted MongoDB Cluster            
      " Collections & Documents                 
      " Automatic backups & scaling             
      mongodb+srv://cluster.mongodb.net         
    
                </pre>
            </div>

            <div class="success-box">
                <strong>Why This Setup?</strong> All three platforms offer free tiers and integrate seamlessly with GitHub for automatic deployments!
            </div>
        </div>

        <!-- What You've Built -->
        <div class="slide">
            <h1>What You've Already Deployed <span class="emoji">âœ…</span></h1>

            <div class="success-box">
                <h3>Your Live MERN Stack (from previous lectures):</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>MongoDB Atlas</strong> - Cloud database with connection string (Lecture 11b)</li>
                    <li><strong>Express Backend on Render</strong> - RESTful API with Mongoose models (Lecture 12)</li>
                    <li><strong>React Frontend on Netlify</strong> - UI connected to your API (Lecture 12)</li>
                </ol>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <h3>Your Application Endpoints:</h3>
                <ul style="font-size: 1.1em;">
                    <li><strong>Frontend:</strong> https://your-app.netlify.app</li>
                    <li><strong>Backend API:</strong> https://your-api.onrender.com/api/tasks</li>
                    <li><strong>Database:</strong> mongodb+srv://cluster.mongodb.net/taskmanager</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Today's Focus:</strong> Understanding how these three pieces communicate and work together in production.
            </div>
        </div>

        <!-- Slide 6: Project Overview -->
        <div class="slide">
            <h1>Today's Project: Task Manager <span class="emoji"></span></h1>

            <div class="demo-box">
                <h3>Application Features:</h3>
                <ul style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Create Tasks:</strong> Add new tasks with title and description</li>
                    <li><strong>View Tasks:</strong> Display all tasks from the database</li>
                    <li><strong>Update Tasks:</strong> Mark tasks as complete/incomplete</li>
                    <li><strong>Delete Tasks:</strong> Remove tasks from the database</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Database Schema (MongoDB):</h3>
                <div class="code-example">
<strong>Collection:</strong> tasks<br>
<strong>Document Structure:</strong><br>
{<br>
&nbsp;&nbsp;_id: ObjectId("..."),<br>
&nbsp;&nbsp;title: String,<br>
&nbsp;&nbsp;description: String,<br>
&nbsp;&nbsp;completed: Boolean,<br>
&nbsp;&nbsp;createdAt: Date<br>
}
                </div>
            </div>
        </div>

        <!-- Today's Agenda: Understanding Your Deployment -->

        <!-- Slide 8: Step 1 - Create Atlas Account -->
        <div class="slide">
            <h1>Step 1: Create MongoDB Atlas Account</h1>

            <div class="deployment-step">
                <h4>1.1 Sign Up for MongoDB Atlas</h4>
                <ul style="font-size: 1.05em;">
                    <li>Go to <strong>https://www.mongodb.com/cloud/atlas/register</strong></li>
                    <li>Sign up with email or Google account</li>
                    <li>Complete email verification</li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>1.2 Choose Free Tier</h4>
                <ul style="font-size: 1.05em;">
                    <li>Select <strong>"Shared"</strong> cluster (M0 - Free)</li>
                    <li>Choose cloud provider: <strong>AWS</strong></li>
                    <li>Choose region: <strong>Closest to you</strong> (e.g., us-east-1)</li>
                    <li>Cluster name: <strong>Cluster0</strong> (default is fine)</li>
                    <li>Click <strong>"Create Cluster"</strong></li>
                </ul>
            </div>

            <div class="checkpoint">
                 CHECKPOINT: Cluster creation begins (takes 3-5 minutes)
            </div>
        </div>

        <!-- Slide 9: Step 2 - Security Setup -->
        <div class="slide">
            <h1>Step 2: Configure Database Security</h1>

            <div class="deployment-step">
                <h4>2.1 Create Database User</h4>
                <p>While cluster is deploying, set up authentication:</p>
                <ul style="font-size: 1.05em;">
                    <li>In "Security Quickstart", create a database user</li>
                    <li><strong>Username:</strong> dbUser (or your choice)</li>
                    <li><strong>Password:</strong> Generate a secure password</li>
                    <li><strong>IMPORTANT:</strong> Copy and save this password securely!</li>
                    <li>Click <strong>"Create User"</strong></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>2.2 Configure Network Access</h4>
                <ul style="font-size: 1.05em;">
                    <li>Click <strong>"Add My Current IP Address"</strong></li>
                    <li>For production, also add <strong>0.0.0.0/0</strong> (allows all IPs)</li>
                    <li>Description: "Allow all IPs for Render deployment"</li>
                    <li>Click <strong>"Add IP Address"</strong></li>
                </ul>
            </div>

            <div class="warning-box">
                <strong>Security Note:</strong> 0.0.0.0/0 allows any IP. This is acceptable for learning, but in production, restrict to your server's IP addresses.
            </div>
        </div>

        <!-- Slide 10: Step 3 - Connection String -->
        <div class="slide">
            <h1>Step 3: Get Connection String</h1>

            <div class="deployment-step">
                <h4>3.1 Navigate to Connect</h4>
                <ul style="font-size: 1.05em;">
                    <li>Wait for cluster to finish deploying (green status)</li>
                    <li>Click <strong>"Connect"</strong> button on your cluster</li>
                    <li>Select <strong>"Connect your application"</strong></li>
                    <li>Driver: <strong>Node.js</strong>, Version: <strong>5.5 or later</strong></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>3.2 Copy Connection String</h4>
                <div class="command-box">
mongodb+srv://dbUser:&lt;password&gt;@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
                </div>
                <ul style="font-size: 1.05em; margin-top: 10px;">
                    <li>Copy this connection string</li>
                    <li>Replace <strong>&lt;password&gt;</strong> with your actual database password</li>
                    <li>Save this modified string - you'll need it soon!</li>
                </ul>
            </div>

            <div class="checkpoint">
                 CHECKPOINT: You have a working connection string with password filled in
            </div>
        </div>

        <!-- Slide 11: Step 4 - Create Database -->
        <div class="slide">
            <h1>Step 4: Create Database & Collection</h1>

            <div class="deployment-step">
                <h4>4.1 Browse Collections</h4>
                <ul style="font-size: 1.05em;">
                    <li>From cluster overview, click <strong>"Browse Collections"</strong></li>
                    <li>Click <strong>"Add My Own Data"</strong></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>4.2 Create Database and Collection</h4>
                <ul style="font-size: 1.05em;">
                    <li><strong>Database Name:</strong> taskmanager</li>
                    <li><strong>Collection Name:</strong> tasks</li>
                    <li>Click <strong>"Create"</strong></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>4.3 Insert Sample Document (Optional but Recommended)</h4>
                <ul style="font-size: 1.05em;">
                    <li>Click on the <strong>tasks</strong> collection</li>
                    <li>Click <strong>"Insert Document"</strong></li>
                    <li>Paste the following:</li>
                </ul>
                <div class="code-example" style="margin-top: 10px;">
{<br>
&nbsp;&nbsp;"title": "Learn MongoDB",<br>
&nbsp;&nbsp;"description": "Complete MERN stack deployment",<br>
&nbsp;&nbsp;"completed": false,<br>
&nbsp;&nbsp;"createdAt": { "$date": "2025-01-15T00:00:00.000Z" }<br>
}
                </div>
            </div>
        </div>

        <!-- PHASE 2: Backend Deployment -->

        <!-- Slide 12: Phase 2 Overview -->
        <div class="slide">
            <h1>Phase 2: Backend Deployment <span class="emoji"></span></h1>
            <h2><span class="timer-badge">30 minutes</span></h2>

            <div class="activity-box">
                <h3>What We'll Do:</h3>
                <ol style="font-size: 1.2em; line-height: 1.8;">
                    <li>Fork the starter Express.js repository</li>
                    <li>Review the backend code (MongoDB queries)</li>
                    <li>Deploy to Render</li>
                    <li>Configure environment variables</li>
                    <li>Test API endpoints</li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Repository to Fork:</h3>
                <div class="command-box">
https://github.com/yourusername/taskmanager-backend
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;"><em>Note: Your instructor will provide the actual repository URL</em></p>
            </div>

            <button data-timer="30">Start 30-Minute Timer</button>
        </div>

        <!-- Slide 13: Backend Code Structure -->
        <div class="slide">
            <h1>Understanding the Backend Code</h1>

            <div class="demo-box">
                <h3>Project Structure:</h3>
                <div class="code-example">
taskmanager-backend/<br>
 server.js          <span class="comment"># Main server file</span><br>
 routes/<br>
    tasks.js       <span class="comment"># Task routes (API endpoints)</span><br>
 models/<br>
    Task.js        <span class="comment"># MongoDB schema</span><br>
 package.json       <span class="comment"># Dependencies</span><br>
 .env.example       <span class="comment"># Environment variables template</span>
                </div>
            </div>

            <div class="demo-box">
                <h3>Key Dependencies:</h3>
                <ul style="font-size: 1.05em;">
                    <li><strong>express</strong> - Web framework</li>
                    <li><strong>mongoose</strong> - MongoDB ODM (Object Data Modeling)</li>
                    <li><strong>cors</strong> - Enable cross-origin requests</li>
                    <li><strong>dotenv</strong> - Environment variables management</li>
                </ul>
            </div>
        </div>

        <!-- Slide 14: MongoDB Connection Code -->
        <div class="slide">
            <h1>MongoDB Connection (server.js)</h1>

            <div class="sql-example" style="background: #1e1e1e; color: #d4d4d4;">
<span class="sql-comment">// Import required packages</span><br>
<span class="sql-keyword">const</span> express = require(<span class="sql-string">'express'</span>);<br>
<span class="sql-keyword">const</span> mongoose = require(<span class="sql-string">'mongoose'</span>);<br>
<span class="sql-keyword">const</span> cors = require(<span class="sql-string">'cors'</span>);<br>
require(<span class="sql-string">'dotenv'</span>).config();<br>
<br>
<span class="sql-comment">// Initialize Express app</span><br>
<span class="sql-keyword">const</span> app = express();<br>
<br>
<span class="sql-comment">// Middleware</span><br>
app.use(cors());<br>
app.use(express.json());<br>
<br>
<span class="sql-comment">// Connect to MongoDB</span><br>
mongoose.connect(process.env.MONGODB_URI)<br>
&nbsp;&nbsp;.then(() => console.log(<span class="sql-string">'MongoDB connected successfully'</span>))<br>
&nbsp;&nbsp;.catch(err => console.error(<span class="sql-string">'MongoDB connection error:'</span>, err));<br>
<br>
<span class="sql-comment">// Import routes</span><br>
<span class="sql-keyword">const</span> taskRoutes = require(<span class="sql-string">'./routes/tasks'</span>);<br>
app.use(<span class="sql-string">'/api/tasks'</span>, taskRoutes);<br>
<br>
<span class="sql-comment">// Start server</span><br>
<span class="sql-keyword">const</span> PORT = process.env.PORT || 5000;<br>
app.listen(PORT, () => console.log(<span class="sql-string">`Server running on port ${PORT}`</span>));
            </div>

            <div class="tip-box">
                <strong>Key Point:</strong> The connection string comes from <code>process.env.MONGODB_URI</code> - we'll set this on Render!
            </div>
        </div>

        <!-- Slide 15: MongoDB Schema Code -->
        <div class="slide">
            <h1>Task Schema (models/Task.js)</h1>

            <div class="sql-example" style="background: #1e1e1e; color: #d4d4d4;">
<span class="sql-keyword">const</span> mongoose = require(<span class="sql-string">'mongoose'</span>);<br>
<br>
<span class="sql-comment">// Define Task schema</span><br>
<span class="sql-keyword">const</span> taskSchema = <span class="sql-keyword">new</span> mongoose.Schema({<br>
&nbsp;&nbsp;title: {<br>
&nbsp;&nbsp;&nbsp;&nbsp;type: String,<br>
&nbsp;&nbsp;&nbsp;&nbsp;required: [<span class="sql-keyword">true</span>, <span class="sql-string">'Title is required'</span>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;trim: <span class="sql-keyword">true</span>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;maxlength: [100, <span class="sql-string">'Title cannot exceed 100 characters'</span>]<br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;description: {<br>
&nbsp;&nbsp;&nbsp;&nbsp;type: String,<br>
&nbsp;&nbsp;&nbsp;&nbsp;trim: <span class="sql-keyword">true</span><br>
&nbsp;&nbsp;},<br>
&nbsp;&nbsp;completed: {<br>
&nbsp;&nbsp;&nbsp;&nbsp;type: Boolean,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">default</span>: <span class="sql-keyword">false</span><br>
&nbsp;&nbsp;}<br>
}, {<br>
&nbsp;&nbsp;timestamps: <span class="sql-keyword">true</span> <span class="sql-comment">// Adds createdAt and updatedAt automatically</span><br>
});<br>
<br>
module.exports = mongoose.model(<span class="sql-string">'Task'</span>, taskSchema);
            </div>

            <div class="success-box">
                <strong>Mongoose Magic:</strong> This schema validates data before saving to MongoDB and provides helpful methods for CRUD operations!
            </div>
        </div>

        <!-- Slide 16: API Routes Code -->
        <div class="slide">
            <h1>CRUD Routes (routes/tasks.js) - Part 1</h1>

            <div class="sql-example" style="background: #1e1e1e; color: #d4d4d4; font-size: 0.9em;">
<span class="sql-keyword">const</span> express = require(<span class="sql-string">'express'</span>);<br>
<span class="sql-keyword">const</span> router = express.Router();<br>
<span class="sql-keyword">const</span> Task = require(<span class="sql-string">'../models/Task'</span>);<br>
<br>
<span class="sql-comment">// GET all tasks</span><br>
router.get(<span class="sql-string">'/'</span>, <span class="sql-keyword">async</span> (req, res) => {<br>
&nbsp;&nbsp;<span class="sql-keyword">try</span> {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">const</span> tasks = <span class="sql-keyword">await</span> Task.find().sort({ createdAt: -1 });<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.json(tasks);<br>
&nbsp;&nbsp;} <span class="sql-keyword">catch</span> (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(500).json({ message: error.message });<br>
&nbsp;&nbsp;}<br>
});<br>
<br>
<span class="sql-comment">// POST create new task</span><br>
router.post(<span class="sql-string">'/'</span>, <span class="sql-keyword">async</span> (req, res) => {<br>
&nbsp;&nbsp;<span class="sql-keyword">const</span> task = <span class="sql-keyword">new</span> Task({<br>
&nbsp;&nbsp;&nbsp;&nbsp;title: req.body.title,<br>
&nbsp;&nbsp;&nbsp;&nbsp;description: req.body.description<br>
&nbsp;&nbsp;});<br>
&nbsp;&nbsp;<span class="sql-keyword">try</span> {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">const</span> newTask = <span class="sql-keyword">await</span> task.save();<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(201).json(newTask);<br>
&nbsp;&nbsp;} <span class="sql-keyword">catch</span> (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(400).json({ message: error.message });<br>
&nbsp;&nbsp;}<br>
});
            </div>
        </div>

        <!-- Slide 17: API Routes Code Part 2 -->
        <div class="slide">
            <h1>CRUD Routes (routes/tasks.js) - Part 2</h1>

            <div class="sql-example" style="background: #1e1e1e; color: #d4d4d4; font-size: 0.85em;">
<span class="sql-comment">// PUT update task</span><br>
router.put(<span class="sql-string">'/:id'</span>, <span class="sql-keyword">async</span> (req, res) => {<br>
&nbsp;&nbsp;<span class="sql-keyword">try</span> {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">const</span> task = <span class="sql-keyword">await</span> Task.findByIdAndUpdate(<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req.params.id,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;req.body,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="sql-keyword">new</span>: <span class="sql-keyword">true</span>, runValidators: <span class="sql-keyword">true</span> }<br>
&nbsp;&nbsp;&nbsp;&nbsp;);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">if</span> (!task) <span class="sql-keyword">return</span> res.status(404).json({ message: <span class="sql-string">'Task not found'</span> });<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.json(task);<br>
&nbsp;&nbsp;} <span class="sql-keyword">catch</span> (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(400).json({ message: error.message });<br>
&nbsp;&nbsp;}<br>
});<br>
<br>
<span class="sql-comment">// DELETE task</span><br>
router.delete(<span class="sql-string">'/:id'</span>, <span class="sql-keyword">async</span> (req, res) => {<br>
&nbsp;&nbsp;<span class="sql-keyword">try</span> {<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">const</span> task = <span class="sql-keyword">await</span> Task.findByIdAndDelete(req.params.id);<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">if</span> (!task) <span class="sql-keyword">return</span> res.status(404).json({ message: <span class="sql-string">'Task not found'</span> });<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.json({ message: <span class="sql-string">'Task deleted successfully'</span> });<br>
&nbsp;&nbsp;} <span class="sql-keyword">catch</span> (error) {<br>
&nbsp;&nbsp;&nbsp;&nbsp;res.status(500).json({ message: error.message });<br>
&nbsp;&nbsp;}<br>
});<br>
<br>
module.exports = router;
            </div>

            <div class="tip-box">
                <strong>Database Operations:</strong> Notice <code>find()</code>, <code>save()</code>, <code>findByIdAndUpdate()</code>, and <code>findByIdAndDelete()</code> - these are Mongoose methods that interact with MongoDB!
            </div>
        </div>

        <!-- Slide 18: Deploy to Render -->
        <div class="slide">
            <h1>Step 5: Deploy Backend to Render</h1>

            <div class="deployment-step">
                <h4>5.1 Fork and Clone Repository</h4>
                <ul style="font-size: 1.05em;">
                    <li>Fork the backend repository on GitHub</li>
                    <li>Your fork: <code>https://github.com/YOUR-USERNAME/taskmanager-backend</code></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>5.2 Create Render Account & New Web Service</h4>
                <ul style="font-size: 1.05em;">
                    <li>Go to <strong>https://render.com</strong> and sign up</li>
                    <li>Click <strong>"New +"</strong>  <strong>"Web Service"</strong></li>
                    <li>Connect your GitHub account</li>
                    <li>Select your forked <strong>taskmanager-backend</strong> repository</li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>5.3 Configure Web Service</h4>
                <ul style="font-size: 1.05em;">
                    <li><strong>Name:</strong> taskmanager-api (or your choice)</li>
                    <li><strong>Environment:</strong> Node</li>
                    <li><strong>Build Command:</strong> <code>npm install</code></li>
                    <li><strong>Start Command:</strong> <code>node server.js</code></li>
                    <li><strong>Plan:</strong> Free</li>
                </ul>
            </div>
        </div>

        <!-- Slide 19: Configure Environment Variables -->
        <div class="slide">
            <h1>Step 6: Set Environment Variables</h1>

            <div class="deployment-step">
                <h4>6.1 Add MongoDB Connection String</h4>
                <p>Before clicking "Create Web Service", scroll to <strong>Environment Variables</strong>:</p>
                <ul style="font-size: 1.05em;">
                    <li>Click <strong>"Add Environment Variable"</strong></li>
                    <li><strong>Key:</strong> <code>MONGODB_URI</code></li>
                    <li><strong>Value:</strong> Paste your MongoDB connection string from Step 3</li>
                </ul>
                <div class="command-box" style="font-size: 0.85em; margin-top: 10px;">
mongodb+srv://dbUser:yourpassword@cluster0.xxxxx.mongodb.net/taskmanager?retryWrites=true&w=majority
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;"><strong>Important:</strong> Add <code>/taskmanager</code> after <code>.net</code> to specify the database name!</p>
            </div>

            <div class="deployment-step">
                <h4>6.2 Create and Deploy</h4>
                <ul style="font-size: 1.05em;">
                    <li>Click <strong>"Create Web Service"</strong></li>
                    <li>Wait 5-10 minutes for initial deployment</li>
                    <li>Watch the logs - look for "MongoDB connected successfully"</li>
                </ul>
            </div>

            <div class="checkpoint">
                 CHECKPOINT: Your API is live! Copy the URL: https://your-api.onrender.com
            </div>
        </div>

        <!-- Slide 20: Test Backend -->
        <div class="slide">
            <h1>Step 7: Test Your API</h1>

            <div class="deployment-step">
                <h4>7.1 Test with Browser</h4>
                <p>Visit your Render URL + <code>/api/tasks</code>:</p>
                <div class="command-box">
https://your-api.onrender.com/api/tasks
                </div>
                <p style="margin-top: 10px;">You should see JSON array with your sample task!</p>
            </div>

            <div class="deployment-step">
                <h4>7.2 Test with Postman or Thunder Client</h4>
                <p><strong>Create a Task (POST Request):</strong></p>
                <ul style="font-size: 1.0em;">
                    <li>URL: <code>https://your-api.onrender.com/api/tasks</code></li>
                    <li>Method: POST</li>
                    <li>Headers: <code>Content-Type: application/json</code></li>
                    <li>Body (JSON):</li>
                </ul>
                <div class="code-example" style="margin-top: 10px;">
{<br>
&nbsp;&nbsp;"title": "Test from Postman",<br>
&nbsp;&nbsp;"description": "Verifying API works!"<br>
}
                </div>
            </div>

            <div class="success-box">
                <strong>Success!</strong> If you get a 201 status with the new task, your backend is fully operational!
            </div>
        </div>

        <!-- PHASE 3: Frontend Deployment -->

        <!-- Slide 21: Phase 3 Overview -->
        <div class="slide">
            <h1>Phase 3: Frontend Deployment <span class="emoji"></span></h1>
            <h2><span class="timer-badge">20 minutes</span></h2>

            <div class="activity-box">
                <h3>What We'll Do:</h3>
                <ol style="font-size: 1.2em; line-height: 1.8;">
                    <li>Fork the React frontend repository</li>
                    <li>Update API URL to point to your Render backend</li>
                    <li>Deploy to Netlify</li>
                    <li>Test the full-stack application</li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Repository to Fork:</h3>
                <div class="command-box">
https://github.com/yourusername/taskmanager-frontend
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;"><em>Note: Your instructor will provide the actual repository URL</em></p>
            </div>

            <button data-timer="20">Start 20-Minute Timer</button>
        </div>

        <!-- Slide 22: Frontend Code Structure -->
        <div class="slide">
            <h1>Understanding the Frontend Code</h1>

            <div class="demo-box">
                <h3>Project Structure:</h3>
                <div class="code-example">
taskmanager-frontend/<br>
 src/<br>
    App.js         <span class="comment"># Main component</span><br>
    components/<br>
       TaskList.js<br>
       TaskForm.js<br>
       TaskItem.js<br>
    api/<br>
       tasks.js   <span class="comment"># API calls (YOU'LL UPDATE THIS!)</span><br>
    index.js<br>
 package.json<br>
 public/
                </div>
            </div>

            <div class="demo-box">
                <h3>Key Dependencies:</h3>
                <ul style="font-size: 1.05em;">
                    <li><strong>react</strong> - UI library</li>
                    <li><strong>axios</strong> - HTTP client for API calls</li>
                </ul>
            </div>
        </div>

        <!-- Slide 23: API Configuration -->
        <div class="slide">
            <h1>Frontend API Configuration (src/api/tasks.js)</h1>

            <div class="sql-example" style="background: #1e1e1e; color: #d4d4d4;">
<span class="sql-keyword">import</span> axios <span class="sql-keyword">from</span> <span class="sql-string">'axios'</span>;<br>
<br>
<span class="sql-comment">// IMPORTANT: Change this to your Render API URL!</span><br>
<span class="sql-keyword">const</span> API_URL = <span class="sql-string">'https://your-api.onrender.com/api/tasks'</span>;<br>
<br>
<span class="sql-comment">// Get all tasks</span><br>
<span class="sql-keyword">export const</span> getTasks = () => axios.get(API_URL);<br>
<br>
<span class="sql-comment">// Create task</span><br>
<span class="sql-keyword">export const</span> createTask = (task) => axios.post(API_URL, task);<br>
<br>
<span class="sql-comment">// Update task</span><br>
<span class="sql-keyword">export const</span> updateTask = (id, task) => <br>
&nbsp;&nbsp;axios.put(<span class="sql-string">`${API_URL}/${id}`</span>, task);<br>
<br>
<span class="sql-comment">// Delete task</span><br>
<span class="sql-keyword">export const</span> deleteTask = (id) => <br>
&nbsp;&nbsp;axios.delete(<span class="sql-string">`${API_URL}/${id}`</span>);
            </div>

            <div class="warning-box">
                <strong>ACTION REQUIRED:</strong> You MUST update <code>API_URL</code> to your actual Render backend URL before deploying!
            </div>
        </div>

        <!-- Slide 24: Deploy to Netlify -->
        <div class="slide">
            <h1>Step 8: Update API URL & Deploy to Netlify</h1>

            <div class="deployment-step">
                <h4>8.1 Fork Repository</h4>
                <ul style="font-size: 1.05em;">
                    <li>Fork the frontend repository on GitHub</li>
                    <li>Your fork: <code>https://github.com/YOUR-USERNAME/taskmanager-frontend</code></li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>8.2 Update API URL</h4>
                <ul style="font-size: 1.05em;">
                    <li>Edit <code>src/api/tasks.js</code> in your forked repo (use GitHub web editor)</li>
                    <li>Replace <code>API_URL</code> with your Render backend URL</li>
                    <li>Commit the change: "Update API URL to Render backend"</li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>8.3 Deploy to Netlify</h4>
                <ul style="font-size: 1.05em;">
                    <li>Go to <strong>https://netlify.com</strong> and sign up</li>
                    <li>Click <strong>"Add new site"</strong>  <strong>"Import an existing project"</strong></li>
                    <li>Connect to GitHub and select <strong>taskmanager-frontend</strong></li>
                    <li><strong>Build command:</strong> <code>npm run build</code></li>
                    <li><strong>Publish directory:</strong> <code>build</code></li>
                    <li>Click <strong>"Deploy site"</strong></li>
                </ul>
            </div>
        </div>

        <!-- Slide 25: Test Full Stack -->
        <div class="slide">
            <h1>Step 9: Test Your Full-Stack App! <span class="emoji"></span></h1>

            <div class="deployment-step">
                <h4>9.1 Open Your Deployed App</h4>
                <ul style="font-size: 1.05em;">
                    <li>Netlify will provide a URL like: <code>https://random-name.netlify.app</code></li>
                    <li>Open this URL in your browser</li>
                </ul>
            </div>

            <div class="deployment-step">
                <h4>9.2 Test All CRUD Operations</h4>
                <ul style="font-size: 1.1em; line-height: 1.7;">
                    <li> <strong>CREATE:</strong> Add a new task using the form</li>
                    <li> <strong>READ:</strong> See all tasks load from MongoDB</li>
                    <li> <strong>UPDATE:</strong> Toggle task completion status</li>
                    <li> <strong>DELETE:</strong> Remove a task</li>
                </ul>
            </div>

            <div class="success-box">
                <h3>Congratulations! Your full-stack MERN application is live!</h3>
                <p style="font-size: 1.1em; margin-top: 10px;">React (Netlify)  Express (Render)  MongoDB (Atlas)</p>
            </div>

            <div class="checkpoint">
                 CHECKPOINT: All three services are connected and working together!
            </div>
        </div>

        <!-- EXERCISE 1: Data Flow Tracing -->

        <!-- Slide 26: Exercise 1 Overview -->
        <div class="slide">
            <h1>Exercise 1: Data Flow Tracing <span class="emoji"></span></h1>
            <h2><span class="timer-badge">30 minutes</span></h2>

            <div class="demo-box">
                <h3>Scenario:</h3>
                <p style="font-size: 1.15em;">You click "Add Task" in your React app. The task appears in the list. Behind the scenes, data flows through THREE separate deployed services before returning to your screen.</p>
            </div>

            <div class="activity-box">
                <h3>Your Task:</h3>
                <p style="font-size: 1.1em;">Trace the complete journey of a single data request from the React frontend through the Express API to MongoDB and back. You must identify:</p>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li>The exact sequence of function calls and HTTP requests</li>
                    <li>Where CORS configuration is critical (and why)</li>
                    <li>Where environment variables are used (and why)</li>
                    <li>The MongoDB operations that execute</li>
                    <li>How the response travels back to the UI</li>
                </ol>
            </div>

            <button data-timer="30">Start 30-Minute Timer</button>
        </div>

        <!-- Slide 27: Exercise 1 Instructions -->
        <div class="slide">
            <h1>Data Flow Tracing Instructions</h1>

            <div class="activity-box">
                <h3>Step-by-Step Tracing (30 minutes):</h3>
                <ol style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Frontend (5 min):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Identify which React component handles the "Add Task" button</li>
                            <li>Find the API function call in <code>src/api/tasks.js</code></li>
                            <li>Note the HTTP method, URL, and request body</li>
                        </ul>
                    </li>
                    <li><strong>CORS Point (5 min):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Where does the browser perform the CORS preflight check?</li>
                            <li>Why is <code>app.use(cors())</code> in server.js necessary?</li>
                            <li>What happens if CORS is misconfigured?</li>
                        </ul>
                    </li>
                    <li><strong>Backend (10 min):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Which Express route handles the incoming request?</li>
                            <li>What middleware processes the request body?</li>
                            <li>How does the Task model validate the data?</li>
                        </ul>
                    </li>
                    <li><strong>Database (5 min):</strong>
                        <ul style="margin-top: 8px;">
                            <li>What MongoDB operation is executed? (insert, find, update, delete?)</li>
                            <li>What collection receives the document?</li>
                            <li>How does Mongoose generate the _id field?</li>
                        </ul>
                    </li>
                    <li><strong>Response Path (5 min):</strong>
                        <ul style="margin-top: 8px;">
                            <li>What does MongoDB return to Mongoose?</li>
                            <li>What does Express send back to the frontend?</li>
                            <li>How does React update the UI with the new task?</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 28: Exercise 1 Solution -->
        <div class="slide">
            <h1>Understanding: Complete Data Flow <span class="emoji"></span></h1>

            <div class="erd-diagram" style="padding: 15px; font-size: 0.85em;">
                <pre>
<strong>1. USER CLICKS "ADD TASK"</strong>
   > TaskForm.js (React Component)
       " User fills form: { title: "Buy groceries", description: "..." }
       " onClick handler calls: createTask(taskData)

<strong>2. FRONTEND API CALL</strong>
   > src/api/tasks.js
       " axios.post(API_URL, taskData)
       " API_URL = "https://your-api.onrender.com/api/tasks"
       " HTTP POST with JSON body

<strong>3. NETWORK REQUEST (CORS Critical Point #1)</strong>
   > Browser sends preflight OPTIONS request
       " Origin: https://your-app.netlify.app
       " Checks if Render backend allows this origin
       " Without CORS, request BLOCKED here!

<strong>4. EXPRESS BACKEND RECEIVES REQUEST</strong>
   > server.js middleware
       " cors() middleware: Allows cross-origin requests
       " express.json() middleware: Parses JSON body
       " Routes to: POST /api/tasks

<strong>5. ROUTE HANDLER EXECUTES</strong>
   > routes/tasks.js
       " Creates: const task = new Task(req.body)
       " Validates against Task schema
       " Calls: await task.save()

<strong>6. MONGOOSE TO MONGODB (Environment Variable Critical Point)</strong>
   > Mongoose uses: process.env.MONGODB_URI
       " Connects to: mongodb+srv://cluster0.xxxxx.mongodb.net/taskmanager
       " Operation: db.tasks.insertOne({ title, description, completed: false })
       " MongoDB generates: _id, createdAt, updatedAt

<strong>7. MONGODB RESPONSE</strong>
   > Returns inserted document with _id
       " { _id: "67a...", title: "Buy groceries", ... }

<strong>8. EXPRESS RESPONSE</strong>
   > res.status(201).json(newTask)
       " HTTP 201 Created
       " JSON body contains complete task document

<strong>9. AXIOS RECEIVES RESPONSE</strong>
   > Frontend API function returns promise
       " .then(response => response.data)

<strong>10. REACT STATE UPDATE</strong>
   > TaskForm/TaskList updates state
       " setTasks([...tasks, newTask])
       " React re-renders  New task appears in UI
                </pre>
            </div>
        </div>

        <!-- Slide 29: CORS Explanation -->
        <div class="slide">
            <h1>Critical Point: CORS Configuration</h1>

            <div class="demo-box">
                <h3>What is CORS?</h3>
                <p style="font-size: 1.05em;">Cross-Origin Resource Sharing (CORS) is a security feature that restricts web pages from making requests to a different domain than the one serving the page.</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="warning-box">
                        <h3>Without CORS:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>Frontend:</strong> netlify.app</li>
                            <li><strong>Backend:</strong> onrender.com</li>
                            <li>L Different domains!</li>
                            <li>L Browser blocks request</li>
                            <li>L Error: "CORS policy"</li>
                        </ul>
                    </div>
                </div>
                <div class="column">
                    <div class="success-box">
                        <h3>With CORS Enabled:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>Backend:</strong> app.use(cors())</li>
                            <li> Sends Access-Control headers</li>
                            <li> Allows netlify.app origin</li>
                            <li> Browser permits request</li>
                            <li> Data flows successfully</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="demo-box">
                <h3>The CORS Code (server.js):</h3>
                <div class="code-example">
<span class="sql-keyword">const</span> cors = require(<span class="sql-string">'cors'</span>);<br>
app.use(cors()); <span class="sql-comment">// Allows ALL origins (development)</span><br>
<br>
<span class="sql-comment">// Production: Restrict to your frontend domain</span><br>
app.use(cors({<br>
&nbsp;&nbsp;origin: <span class="sql-string">'https://your-app.netlify.app'</span><br>
}));
                </div>
            </div>
        </div>

        <!-- Slide 30: Environment Variables Explanation -->
        <div class="slide">
            <h1>Critical Point: Environment Variables</h1>

            <div class="demo-box">
                <h3>Why Environment Variables?</h3>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Security:</strong> Never commit passwords/secrets to Git</li>
                    <li><strong>Flexibility:</strong> Different values for dev/production</li>
                    <li><strong>Separation:</strong> Config separate from code</li>
                </ul>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="warning-box">
                        <h3>L BAD (Hardcoded):</h3>
                        <div class="code-example">
mongoose.connect(<br>
&nbsp;&nbsp;<span class="sql-string">'mongodb+srv://user:pass@...'</span><br>
);<br>
<span class="sql-comment">// Password exposed!</span><br>
<span class="sql-comment">// In Git history forever!</span>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="success-box">
                        <h3> GOOD (Env Variable):</h3>
                        <div class="code-example">
mongoose.connect(<br>
&nbsp;&nbsp;process.env.MONGODB_URI<br>
);<br>
<span class="sql-comment">// Secure!</span><br>
<span class="sql-comment">// Set on Render dashboard</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="demo-box">
                <h3>Where We Used Environment Variables:</h3>
                <ol style="font-size: 1.05em;">
                    <li><strong>Render Backend:</strong> <code>MONGODB_URI</code> - Database connection string</li>
                    <li><strong>MongoDB URI includes:</strong> Username, password, cluster address, database name</li>
                    <li><strong>Local Development:</strong> Stored in <code>.env</code> file (git-ignored)</li>
                    <li><strong>Production:</strong> Set in Render dashboard (secure, encrypted)</li>
                </ol>
            </div>
        </div>

        <!-- EXERCISE 2: Final Review -->

        <!-- Slide 31: Exercise 2 Overview -->
        <div class="slide">
            <h1>Exercise 2: Final Exam Review <span class="emoji"></span></h1>
            <h2><span class="timer-badge">30 minutes</span></h2>

            <div class="demo-box">
                <h3>Purpose:</h3>
                <p style="font-size: 1.15em;">Rapid-fire review of key concepts from the entire course to prepare for the final exam.</p>
            </div>

            <div class="activity-box">
                <h3>Format:</h3>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li>10 conceptual questions covering SQL and NoSQL topics</li>
                    <li>3 minutes per question (discuss in groups of 2-3)</li>
                    <li>Class discussion after each question</li>
                    <li>Focus on understanding, not memorization</li>
                </ul>
            </div>

            <button data-timer="30">Start 30-Minute Timer</button>
        </div>

        <!-- Slide 32: Review Question 1 -->
        <div class="slide">
            <h1>Review Q1: Database Architecture <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">Explain the three levels of the ANSI-SPARC database architecture and how they achieve data independence.</p>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em;">
                    <li>What are the External, Conceptual, and Internal levels?</li>
                    <li>What types of changes can happen at each level without affecting others?</li>
                    <li>How does this relate to our MERN stack separation of concerns?</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Connection to Today:</strong> Just like ANSI-SPARC separates schema levels, MERN separates presentation (React), logic (Express), and storage (MongoDB)!
            </div>
        </div>

        <!-- Slide 33: Review Question 2 -->
        <div class="slide">
            <h1>Review Q2: Relational Model <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What is the difference between a Primary Key and a Foreign Key? Provide an example from a real-world schema.</p>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em;">
                    <li>What constraints does a Primary Key enforce?</li>
                    <li>How does a Foreign Key establish relationships?</li>
                    <li>What happens when you try to delete a row referenced by a foreign key?</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>Comparison:</strong> In MongoDB, we don't have built-in foreign keys. How did we handle relationships in our Task Manager app?
            </div>
        </div>

        <!-- Slide 34: Review Question 3 -->
        <div class="slide">
            <h1>Review Q3: Normalization <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What is Third Normal Form (3NF)? Why is normalization important for relational databases?</p>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em;">
                    <li>What problems does normalization solve? (redundancy, anomalies)</li>
                    <li>What are the requirements for 1NF, 2NF, and 3NF?</li>
                    <li>When might you deliberately denormalize?</li>
                </ul>
            </div>

            <div class="tip-box">
                <strong>NoSQL Contrast:</strong> MongoDB often uses denormalization (embedding). Why is that acceptable in document databases?
            </div>
        </div>

        <!-- Slide 35: Review Question 4 -->
        <div class="slide">
            <h1>Review Q4: Relational Algebra <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What is the difference between the Selection () and Projection () operators in Relational Algebra?</p>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em;">
                    <li> selects rows based on a condition (horizontal subset)</li>
                    <li> selects columns (vertical subset)</li>
                    <li>How do these relate to SQL's WHERE and SELECT clauses?</li>
                </ul>
            </div>

            <div class="demo-box" style="margin-top: 15px;">
                <h3>Example:</h3>
                <p><strong><sub>completed=true</sub>(tasks)</strong>  Get only completed tasks (filter rows)</p>
                <p><strong><sub>title, description</sub>(tasks)</strong>  Get only title and description columns</p>
            </div>
        </div>

        <!-- Slide 36: Review Question 5 -->
        <div class="slide">
            <h1>Review Q5: SQL Joins <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">Explain the difference between INNER JOIN, LEFT JOIN, and FULL OUTER JOIN. When would you use each?</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h4>INNER JOIN</h4>
                        <p style="font-size: 0.95em;">Returns only rows with matches in BOTH tables</p>
                    </div>
                    <div class="demo-box">
                        <h4>LEFT JOIN</h4>
                        <p style="font-size: 0.95em;">Returns ALL rows from left table + matches from right</p>
                    </div>
                </div>
                <div class="column">
                    <div class="demo-box">
                        <h4>RIGHT JOIN</h4>
                        <p style="font-size: 0.95em;">Returns ALL rows from right table + matches from left</p>
                    </div>
                    <div class="demo-box">
                        <h4>FULL OUTER JOIN</h4>
                        <p style="font-size: 0.95em;">Returns ALL rows from BOTH tables</p>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>MongoDB Equivalent:</strong> The $lookup aggregation operator performs a LEFT OUTER JOIN between collections!
            </div>
        </div>

        <!-- Slide 37: Review Question 6 -->
        <div class="slide">
            <h1>Review Q6: SQL Aggregation <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What is the purpose of GROUP BY in SQL? How does it relate to aggregation functions like COUNT, SUM, and AVG?</p>
            </div>

            <div class="demo-box">
                <h3>Example:</h3>
                <div class="sql-example">
<span class="sql-keyword">SELECT</span> user_id, <span class="sql-keyword">COUNT</span>(*) <span class="sql-keyword">as</span> task_count<br>
<span class="sql-keyword">FROM</span> tasks<br>
<span class="sql-keyword">GROUP BY</span> user_id<br>
<span class="sql-keyword">HAVING COUNT</span>(*) > 5;
                </div>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em;">
                    <li>What does GROUP BY do? (Collapses rows with same value into groups)</li>
                    <li>When do you use HAVING vs WHERE?</li>
                    <li>How would you do this in MongoDB? (Hint: Aggregation pipeline)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 38: Review Question 7 -->
        <div class="slide">
            <h1>Review Q7: Transactions <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What are the ACID properties of database transactions? Why are they important?</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h4>A - Atomicity</h4>
                        <p style="font-size: 0.95em;">All or nothing - entire transaction succeeds or fails</p>
                    </div>
                    <div class="demo-box">
                        <h4>C - Consistency</h4>
                        <p style="font-size: 0.95em;">Database goes from one valid state to another</p>
                    </div>
                </div>
                <div class="column">
                    <div class="demo-box">
                        <h4>I - Isolation</h4>
                        <p style="font-size: 0.95em;">Concurrent transactions don't interfere</p>
                    </div>
                    <div class="demo-box">
                        <h4>D - Durability</h4>
                        <p style="font-size: 0.95em;">Committed changes persist even after crashes</p>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>MongoDB:</strong> Supports multi-document ACID transactions since version 4.0! (with replica sets)
            </div>
        </div>

        <!-- Slide 39: Review Question 8 -->
        <div class="slide">
            <h1>Review Q8: Views <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">What is a database VIEW? What are two advantages and one limitation of using views?</p>
            </div>

            <div class="activity-box">
                <h3>Discussion Points:</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>Advantages:</strong>
                        <ul>
                            <li>Security - hide sensitive columns</li>
                            <li>Simplicity - complex query becomes simple table</li>
                        </ul>
                    </li>
                    <li><strong>Limitation:</strong>
                        <ul>
                            <li>View update restrictions (not always writable)</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="demo-box" style="margin-top: 15px;">
                <h3>Example:</h3>
                <div class="sql-example">
<span class="sql-keyword">CREATE VIEW</span> CompletedTasks <span class="sql-keyword">AS</span><br>
<span class="sql-keyword">SELECT</span> title, description, createdAt<br>
<span class="sql-keyword">FROM</span> tasks<br>
<span class="sql-keyword">WHERE</span> completed = <span class="sql-keyword">true</span>;
                </div>
            </div>
        </div>

        <!-- Slide 40: Review Question 9 -->
        <div class="slide">
            <h1>Review Q9: SQL vs NoSQL <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">When would you choose MongoDB (NoSQL) over PostgreSQL (SQL)? Provide a specific use case.</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="success-box">
                        <h3>Choose MongoDB When:</h3>
                        <ul style="font-size: 0.95em;">
                            <li>Flexible/evolving schema</li>
                            <li>Document-oriented data (JSON)</li>
                            <li>Horizontal scaling needed</li>
                            <li>Rapid development cycles</li>
                            <li><strong>Example:</strong> Blog posts, user profiles, product catalogs</li>
                        </ul>
                    </div>
                </div>
                <div class="column">
                    <div class="success-box">
                        <h3>Choose PostgreSQL When:</h3>
                        <ul style="font-size: 0.95em;">
                            <li>Complex relationships</li>
                            <li>ACID guarantees critical</li>
                            <li>Complex queries/joins</li>
                            <li>Data integrity paramount</li>
                            <li><strong>Example:</strong> Banking, inventory, medical records</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Reality Check:</strong> Many modern apps use BOTH - PostgreSQL for transactional data, MongoDB for content/logs!
            </div>
        </div>

        <!-- Slide 41: Review Question 10 -->
        <div class="slide">
            <h1>Review Q10: MongoDB Queries <span class="timer-badge">3 min</span></h1>

            <div class="demo-box">
                <h3>Question:</h3>
                <p style="font-size: 1.2em; line-height: 1.7;">Write a MongoDB query to find all tasks that are incomplete and were created in the last 7 days, sorted by creation date (newest first).</p>
            </div>

            <div class="activity-box">
                <h3>Hint - Required Operators:</h3>
                <ul style="font-size: 1.05em;">
                    <li><code>db.tasks.find()</code> - Query documents</li>
                    <li><code>{ completed: false }</code> - Filter condition</li>
                    <li><code>{ createdAt: { $gte: ... } }</code> - Date comparison</li>
                    <li><code>.sort({ createdAt: -1 })</code> - Descending sort</li>
                </ul>
            </div>

            <div class="demo-box" style="margin-top: 15px;">
                <h3>Solution:</h3>
                <div class="code-example">
<span class="sql-keyword">const</span> sevenDaysAgo = <span class="sql-keyword">new</span> Date();<br>
sevenDaysAgo.setDate(sevenDaysAgo.getDate() - 7);<br>
<br>
db.tasks.find({<br>
&nbsp;&nbsp;completed: <span class="sql-keyword">false</span>,<br>
&nbsp;&nbsp;createdAt: { $gte: sevenDaysAgo }<br>
}).sort({ createdAt: -1 });
                </div>
            </div>
        </div>

        <!-- HOMEWORK SECTION -->

        <!-- Slide 42: Homework Overview -->
        <div class="slide">
            <h1>Homework Assignment <span class="emoji"></span></h1>
            <h2>Week 13: MERN Stack Analysis</h2>

            <div class="demo-box">
                <h3>Assignment Overview</h3>
                <p style="font-size: 1.15em;">This week's homework builds on today's deployment exercise. You'll analyze the CORS configuration and apply course concepts to real-world scenarios.</p>
            </div>

            <div class="warning-box">
                <h3>Due Date: <strong>Before Class Next Week</strong></h3>
                <p>Submit via Commit URL turned into D2L</p>
            </div>

            <div class="activity-box">
                <h3>Assignment Components:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Homework Extension 1:</strong> CORS Configuration Analysis (50 points)</li>
                    <li><strong>Homework Extension 2:</strong> SQL vs NoSQL Practical Examples (50 points)</li>
                </ol>
                <p style="margin-top: 15px; font-size: 1.1em;"><strong>Total Points: 100</strong></p>
            </div>
        </div>

        <!-- Slide 43: Homework Extension 1 -->
        <div class="slide">
            <h1>Homework Extension 1: CORS Analysis</h1>
            <h2>Building on Exercise 1 - Data Flow Tracing</h2>

            <div class="exercise-step">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Based on your deployed MERN application, provide a screenshot of the CORS configuration code in your Express server and explain in 100 words why this specific configuration is necessary for the split Netlify/Render deployment.</p>
            </div>

            <div class="activity-box">
                <h3>Requirements:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Screenshot (20 points):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Capture the CORS configuration in your <code>server.js</code> file</li>
                            <li>Include surrounding context (imports and middleware)</li>
                            <li>Ensure code is readable (proper zoom level)</li>
                        </ul>
                    </li>
                    <li><strong>Written Explanation (30 points):</strong>
                        <p style="margin-top: 8px;">Your 100-word explanation must address:</p>
                        <ul style="margin-top: 8px;">
                            <li>Why CORS is necessary when frontend and backend are on different domains</li>
                            <li>What would happen without CORS (specific error)</li>
                            <li>How the <code>cors()</code> middleware solves this problem</li>
                            <li>Whether <code>app.use(cors())</code> is secure for production (and why/why not)</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 44: Homework Extension 1 - Example -->
        <div class="slide">
            <h1>CORS Analysis - Example Response</h1>

            <div class="demo-box">
                <h3>Example Explanation (100 words):</h3>
                <p style="font-size: 1.0em; line-height: 1.7; background: var(--bg-accent); padding: 15px; border-radius: 5px;">
                    "CORS (Cross-Origin Resource Sharing) is necessary because our React frontend on Netlify (netlify.app) and Express backend on Render (onrender.com) are on different domains. Without CORS, the browser's Same-Origin Policy blocks the API requests, resulting in a 'CORS policy: No Access-Control-Allow-Origin header' error. The <code>app.use(cors())</code> middleware adds the required Access-Control-Allow-Origin header to responses, permitting cross-origin requests. However, <code>cors()</code> with no options allows ALL origins, which is insecure for production. A better approach is <code>cors({ origin: 'https://your-app.netlify.app' })</code> to restrict access to only your frontend domain, preventing unauthorized sites from calling your API."
                </p>
            </div>

            <div class="tip-box">
                <strong>Target Length:</strong> Approximately 100 words (10 words acceptable). Be concise and technical!
            </div>
        </div>

        <!-- Slide 45: Homework Extension 2 -->
        <div class="slide">
            <h1>Homework Extension 2: Practical Examples</h1>
            <h2>Building on Exercise 2 - Final Review</h2>

            <div class="exercise-step">
                <h3>Task:</h3>
                <p style="font-size: 1.15em;">Select TWO concepts from the 10 review questions (one SQL concept and one NoSQL concept) and write a 150-word practical example of when you would use each concept in a capstone project or real-world application.</p>
            </div>

            <div class="activity-box">
                <h3>Requirements:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>Concept Selection (10 points):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Choose ONE SQL concept (e.g., Joins, Normalization, Views, Transactions)</li>
                            <li>Choose ONE NoSQL concept (e.g., MongoDB queries, Document structure, Embedding vs Referencing)</li>
                        </ul>
                    </li>
                    <li><strong>SQL Example (20 points):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Describe a specific application scenario (~150 words)</li>
                            <li>Explain how the SQL concept solves a problem</li>
                            <li>Include a brief code example (SQL query or schema)</li>
                        </ul>
                    </li>
                    <li><strong>NoSQL Example (20 points):</strong>
                        <ul style="margin-top: 8px;">
                            <li>Describe a specific application scenario (~150 words)</li>
                            <li>Explain how the NoSQL concept provides an advantage</li>
                            <li>Include a brief code example (MongoDB query or document structure)</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>

        <!-- Slide 46: Homework Extension 2 - Example -->
        <div class="slide">
            <h1>Practical Examples - Sample Response</h1>

            <div class="demo-box">
                <h3>Example SQL Concept: INNER JOIN</h3>
                <p style="font-size: 0.95em; line-height: 1.6; background: var(--bg-accent); padding: 12px; border-radius: 5px;">
                    "For a university course registration system capstone project, INNER JOINs are essential for displaying student enrollment data. When showing a student's schedule, I need to combine data from three tables: Students, Enrollments, and Courses. The Students table contains demographic info, Enrollments tracks which courses each student is taking, and Courses holds course details (title, credits, instructor). An INNER JOIN returns only the rows where matches exist in all three tables - meaning only enrolled students with valid courses appear. The query would be: <code>SELECT s.name, c.title, c.credits FROM Students s INNER JOIN Enrollments e ON s.student_id = e.student_id INNER JOIN Courses c ON e.course_id = c.course_id WHERE s.student_id = 12345;</code> This ensures data integrity by excluding orphaned enrollments referencing deleted courses."
                </p>
            </div>

            <div class="demo-box" style="margin-top: 15px;">
                <h3>Example NoSQL Concept: Embedding Documents</h3>
                <p style="font-size: 0.95em; line-height: 1.6; background: var(--bg-accent); padding: 12px; border-radius: 5px;">
                    "For a blog platform capstone project, MongoDB's document embedding is ideal for storing blog posts with comments. Instead of separate collections requiring joins, I can embed comments directly within each post document. This provides faster reads (one query instead of two) and maintains comment context with the post. Example document: <code>{ _id: ObjectId("..."), title: "Intro to MERN", content: "...", comments: [ { author: "Alice", text: "Great post!", date: ISODate("...") }, { author: "Bob", text: "Very helpful", date: ISODate("...") } ] }</code>. This denormalized structure makes sense because comments are always displayed with their parent post, rarely queried independently. The trade-off is larger document size, but MongoDB handles this efficiently for typical blog use cases."
                </p>
            </div>
        </div>

        <!-- Slide 47: Submission Requirements -->
        <div class="slide">
            <h1>Submission Requirements <span class="emoji"></span></h1>

            <div class="demo-box">
                <h3>Format & Submission:</h3>
                <ul style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>File Format:</strong> Markdown document (.md)</li>
                    <li><strong>File Naming:</strong> LastName_FirstName_Week13_Homework.md</li>
                    <li><strong>Screenshot:</strong> Embed in markdown using <code>![CORS Config](./cors-screenshot.png)</code></li>
                    <li><strong>Repository:</strong> Create file in your GitHub homework repository</li>
                    <li><strong>Submission Platform:</strong> Submit commit URL to D2L</li>
                    <li><strong>Due Date:</strong> Before class begins next week</li>
                </ul>
            </div>

            <div class="activity-box">
                <h3>Document Structure:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Cover Page:</strong> Your name, date, course number, "Week 13 Homework"</li>
                    <li><strong>Page 2:</strong> Extension 1 - CORS screenshot and explanation</li>
                    <li><strong>Pages 3-4:</strong> Extension 2 - SQL and NoSQL practical examples</li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Grading Criteria:</h3>
                <table class="table-schema" style="font-size: 0.95em;">
                    <tr>
                        <th>Component</th>
                        <th>Points</th>
                        <th>Key Criteria</th>
                    </tr>
                    <tr>
                        <td><strong>CORS Analysis</strong></td>
                        <td>50</td>
                        <td>Screenshot quality (20), Technical accuracy (20), Clarity (10)</td>
                    </tr>
                    <tr>
                        <td><strong>Practical Examples</strong></td>
                        <td>50</td>
                        <td>Concept selection (10), SQL example (20), NoSQL example (20)</td>
                    </tr>
                </table>
            </div>
        </div>

        <!-- Slide 48: Troubleshooting Tips -->
        <div class="slide">
            <h1>Common Deployment Issues <span class="emoji"></span></h1>

            <div class="warning-box">
                <h3>Issue 1: "Cannot connect to MongoDB"</h3>
                <ul style="font-size: 1.0em;">
                    <li><strong>Cause:</strong> Incorrect connection string or password</li>
                    <li><strong>Fix:</strong> Check MONGODB_URI in Render env vars, ensure password is correct</li>
                    <li><strong>Fix:</strong> Verify network access in Atlas allows 0.0.0.0/0</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>Issue 2: "CORS policy error"</h3>
                <ul style="font-size: 1.0em;">
                    <li><strong>Cause:</strong> CORS not configured in backend</li>
                    <li><strong>Fix:</strong> Ensure <code>app.use(cors())</code> is BEFORE routes in server.js</li>
                    <li><strong>Fix:</strong> Check Render logs for errors</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>Issue 3: "API returns 404"</h3>
                <ul style="font-size: 1.0em;">
                    <li><strong>Cause:</strong> Incorrect API URL in frontend</li>
                    <li><strong>Fix:</strong> Verify API_URL in src/api/tasks.js matches your Render URL exactly</li>
                    <li><strong>Fix:</strong> Ensure route is <code>/api/tasks</code> not <code>/tasks</code></li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>Issue 4: "Render service won't start"</h3>
                <ul style="font-size: 1.0em;">
                    <li><strong>Cause:</strong> Build or start command incorrect</li>
                    <li><strong>Fix:</strong> Build: <code>npm install</code>, Start: <code>node server.js</code></li>
                    <li><strong>Fix:</strong> Check Render logs for specific error messages</li>
                </ul>
            </div>
        </div>

        <!-- Slide 49: Summary -->
        <div class="slide">
            <h1>Today's Takeaways <span class="emoji"></span></h1>
            <h2>You Can Now:</h2>
            <ul style="font-size: 1.2em; line-height: 1.8;">
                <li> Set up and deploy a cloud MongoDB database with Atlas</li>
                <li> Deploy an Express.js backend with database connections to Render</li>
                <li> Deploy a React frontend to Netlify</li>
                <li> Configure CORS for cross-origin API requests</li>
                <li> Manage environment variables securely in production</li>
                <li> Trace full-stack data flow from UI to database and back</li>
                <li> Understand when to use SQL vs NoSQL databases</li>
                <li> Perform CRUD operations with MongoDB and Mongoose</li>
            </ul>

            <div class="success-box" style="margin-top: 30px;">
                <p style="font-size: 1.3em;"><strong>Congratulations!</strong> You've deployed a production-ready full-stack application with MongoDB!</p>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <p><strong>Next Week:</strong> Student Project Presentations</p>
                <p><strong>Homework:</strong> CORS analysis & practical SQL/NoSQL examples (due next week)</p>
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">49</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // Note: Code example animations now handled by presentation.js

        // Lecture-specific: Console hints
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Lecture 13: MERN Stack Deployment loaded');
            console.log('Use arrow keys or buttons to navigate');
            console.log('Press F for fullscreen mode');
        });
    </script>
</body>
</html>
