<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecture 03 - Database Architecture - CSCI 5603</title>
    
    <!-- Database Design Presentation Styles with Theme Support -->
    <link rel="stylesheet" href="../../styles/presentation.css">
    <link rel="icon" type="image/x-icon" href="/images/favicon.png">
    
    <!-- Import Courier Prime for analog feel -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Courier+Prime:wght@400;700&family=IBM+Plex+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lecture-Specific Styles -->
    <style>
        /* Override font for analog feel */
        body, .slide, h1, h2, h3, p, li {
            font-family: 'Courier Prime', 'IBM Plex Mono', 'Courier New', monospace !important;
        }
        
        /* Database-specific styling */
        .erd-diagram {
            background: var(--bg-accent);
            border: 2px solid var(--border-color);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier Prime', monospace;
        }

        /* SQL syntax highlighting classes now in presentation.css */

        .table-schema {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
            font-family: 'IBM Plex Mono', monospace;
        }
        
        .table-schema th {
            background: var(--ocu-true-blue);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }
        
        .table-schema td {
            border: 1px solid var(--border-color);
            padding: 10px;
            background: var(--bg-secondary);
        }
        
        .table-schema tr:nth-child(even) td {
            background: var(--bg-accent);
        }

        /* JSON and XML syntax highlighting classes now in presentation.css */
    </style>
</head>
<body>
    <!-- Theme toggle will be automatically added by JavaScript -->
    
    <div class="presentation-container">
        <!-- Timer display -->
        <div class="timer-display" id="timer-display">
            <span id="timer-text">Lecture 03 - Database Architecture
                 <button class="home"><a href="../../index.html">Home</a></button>
            </span>
        </div>

        <!-- Slide 1: Title -->
        <div class="slide active">
            <h1>Database Architecture</h1>
            <h2>Understanding DBMS Structure <span class="emoji">🏗️</span></h2>
            <p style="font-size: 1.5em; margin-top: 40px;">CSCI 5603 - Database Design</p>
            <p style="font-size: 1.3em;">Week 2, Lecture 3</p>
            <p style="margin-top: auto; font-style: italic;">Building robust database foundations for tomorrow's applications!</p>
        </div>

        <!-- Slide 2: Learning Objectives -->
        <div class="slide">
            <h1>Today's Learning Objectives</h1>
            <ul style="font-size: 1.4em; line-height: 2;">
                <li>🎯 Master the ANSI-SPARC three-level database architecture</li>
                <li>🎯 Understand DBMS controlled access features (security, integrity, concurrency, recovery)</li>
                <li>🎯 Analyze three-tier application architecture components</li>
                <li>🎯 Compare centralized vs. distributed database architectures</li>
                <li>🎯 Explore modern cloud and microservices database patterns</li>
                <li>🎯 Apply architectural principles to system design scenarios</li>
            </ul>
        </div>

        <!-- Slide 3: Historical Context -->
        <div class="slide">
            <h1>Historical Context <span class="emoji">📜</span></h1>
            <h2>Before the Relational Era</h2>

            <div class="concept-box">
                <h3>Pre-Relational Models (1960s)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">Before the relational model, the <strong>Hierarchical Model</strong> (exemplified by IBM's IMS) and the <strong>Network Model</strong> (CODASYL) were the dominant database architectures. These systems enforced both fixed schemas and rigid access paths, making structural changes extremely difficult and limiting flexibility.</p>
            </div>

            <div class="concept-box">
                <h3>The Three-Schema Architecture (1970s)</h3>
                <p style="font-size: 1.15em; line-height: 1.7;">The concept of the three-schema architecture (External, Conceptual, Internal) was developed in the 1970s as a foundational framework to achieve <strong>data independence</strong>—a key architectural goal for modern DBMS. This separation of concerns allowed changes at one level without impacting others.</p>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> The evolution from hierarchical/network models to the three-schema architecture laid the groundwork for the flexibility we expect from modern databases.
            </div>
        </div>

        <!-- Slide 4: Quick Recap from Last Week -->
        <div class="slide">
            <h1>Quick Recap: Last Week's Foundations <span class="emoji">📚</span></h1>

            <div class="demo-box">
                <h3>What We Learned in Lecture 2:</h3>
                <ul style="font-size: 1.2em; line-height: 1.8;">
                    <li><strong>File-Based Systems:</strong> Separate programs managing their own data (CSV, XML, JSON)</li>
                    <li><strong>Five Key Limitations:</strong> Data separation, duplication, dependence, incompatible formats, fixed queries</li>
                    <li><strong>The Database Solution:</strong> Shared collection of logically related data + DBMS</li>
                    <li><strong>Database Languages:</strong> DDL (define structure) and DML (manipulate data)</li>
                    <li><strong>Database Roles:</strong> DA, DBA, Designers, Programmers, End Users</li>
                </ul>
            </div>

            <div class="success-box">
                <h3>Key Takeaway:</h3>
                <p style="font-size: 1.2em;">Databases emerged to solve file-based system problems through centralization, data independence, and controlled access.</p>
            </div>
        </div>

        <!-- Slide 5: Today's Focus -->
        <div class="slide">
            <h1>Today's Focus: Database Architecture <span class="emoji">🏗️</span></h1>

            <div class="demo-box">
                <h3>From "Why Databases?" to "How Databases Work"</h3>
                <p style="font-size: 1.2em;">Last week we learned <strong>why</strong> databases are better than file systems. Today we'll explore <strong>how</strong> databases are actually structured and organized.</p>
            </div>

            <div class="erd-diagram" style="padding: 30px;">
                <pre style="text-align: center; font-size: 1.0em;">
    Today's Architectural Journey:

    ┌─────────────────────────────────┐
    │   ANSI-SPARC Three-Level Arch   │ ← How DBMS separates concerns
    └─────────────────────────────────┘
                  ↓
    ┌─────────────────────────────────┐
    │   Three-Tier Application Arch   │ ← How apps connect to databases
    └─────────────────────────────────┘
                  ↓
    ┌─────────────────────────────────┐
    │  Centralized vs. Distributed    │ ← How databases scale globally
    └─────────────────────────────────┘
                </pre>
            </div>

            <div class="tip-box">
                <strong>Learning Goal:</strong> Understand the architectural decisions that make modern database systems powerful, scalable, and secure.
            </div>
        </div>

        <!-- Slide 6: Controlled Access Features -->
        <div class="slide">
            <h1>Database Controlled Access</h1>
            <p>DBMS provides comprehensive control mechanisms:</p>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h3>🔒 Security System</h3>
                        <ul>
                            <li>User authentication</li>
                            <li>Access control lists</li>
                            <li>Role-based permissions</li>
                            <li>Encryption support</li>
                        </ul>
                    </div>
                    
                    <div class="demo-box">
                        <h3>✓ Integrity System</h3>
                        <ul>
                            <li>Data validation rules</li>
                            <li>Referential integrity</li>
                            <li>Business rule enforcement</li>
                            <li>Constraint checking</li>
                        </ul>
                    </div>
                </div>
                
                <div class="column">
                    <div class="demo-box">
                        <h3>🔄 Concurrency Control</h3>
                        <ul>
                            <li>Multiple user access</li>
                            <li>Transaction management</li>
                            <li>Lock mechanisms</li>
                            <li>Deadlock prevention</li>
                        </ul>
                    </div>
                    
                    <div class="demo-box">
                        <h3>💾 Recovery Control</h3>
                        <ul>
                            <li>Backup mechanisms</li>
                            <li>Transaction logs</li>
                            <li>Point-in-time recovery</li>
                            <li>Disaster recovery</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="demo-box" style="margin-top: 20px;">
                <h3>📚 User-Accessible Catalog</h3>
                <p>Metadata repository containing descriptions of data structures, constraints, users, and applications.</p>
            </div>
        </div>

        <!-- Slide 15: Three-Level Architecture -->
        <div class="slide">
            <h1>ANSI-SPARC Three-Level Architecture</h1>
            <p>Standard architecture for database systems:</p>

            <div class="erd-diagram" style="padding: 30px;">
                <pre style="text-align: center; font-size: 1.1em;">
    ┌─────────────────────────┐
    │    External Level       │ ← User Views
    │  (Individual User Views)│
    └────────────┬────────────┘
                 │ External/Conceptual Mapping
                 ▼
    ┌─────────────────────────┐
    │   Conceptual Level      │ ← Logical Structure
    │  (Community User View)  │
    └────────────┬────────────┘
                 │ Conceptual/Internal Mapping
                 ▼
    ┌─────────────────────────┐
    │    Internal Level       │ ← Physical Storage
    │  (Storage Structure)    │
    └─────────────────────────┘
                </pre>
            </div>

            <div class="tip-box">
                <strong>Key Benefit:</strong> Data independence - changes at one level don't affect other levels.
            </div>
        </div>

        <!-- Slide 16: Architecture Levels Explained -->
        <div class="slide">
            <h1>Understanding Architecture Levels</h1>

            <div class="demo-box">
                <h3>1. External Level (View Level)</h3>
                <ul>
                    <li>Individual user views of the database</li>
                    <li>Different views for different user groups</li>
                    <li>Security through view restrictions</li>
                    <li>Customized data presentation</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>2. Conceptual Level (Logical Level)</h3>
                <ul>
                    <li>Community view of entire database</li>
                    <li>Describes what data is stored</li>
                    <li>Relationships between data</li>
                    <li>Constraints and security rules</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>3. Internal Level (Physical Level)</h3>
                <ul>
                    <li>Physical storage structures</li>
                    <li>File organizations and indexes</li>
                    <li>Storage allocation</li>
                    <li>Data compression and encryption</li>
                </ul>
            </div>
        </div>

        <!-- Slide 17: Database Views -->
        <div class="slide">
            <h1>Database Views</h1>
            <p>Virtual tables based on database queries:</p>

            <div class="demo-box">
                <h3>Benefits of Views:</h3>
                <ul style="font-size: 1.2em; line-height: 1.8;">
                    <li>✓ Reduce complexity for users</li>
                    <li>✓ Provide security through restricted access</li>
                    <li>✓ Customize data appearance per user needs</li>
                    <li>✓ Present consistent picture despite schema changes</li>
                </ul>
            </div>

            <div class="sql-example">
                <span class="sql-comment">-- Creating a view for available movies from movie_rental_db</span><br>
                <span class="sql-keyword">CREATE VIEW</span> AvailableMovies <span class="sql-keyword">AS</span><br>
                <span class="sql-keyword">SELECT</span> movie_id, title, director, genre<br>
                <span class="sql-keyword">FROM</span> Movies<br>
                <span class="sql-keyword">WHERE</span> available = <span class="sql-keyword">TRUE</span><br>
                &nbsp;&nbsp;<span class="sql-keyword">AND</span> release_year >= <span class="sql-string">2020</span>;
            </div>

            <div class="tip-box">
                <strong>Design Principle:</strong> Views act as a window into your data, showing only what users need to see.
            </div>
        </div>

        <!-- Slide 18: History of Database Systems -->
        <div class="slide">
            <h1>Evolution of Database Systems</h1>

            <div class="demo-box">
                <h3>First Generation (1960s-1970s)</h3>
                <ul>
                    <li><strong>Hierarchical Model:</strong> Tree-like structure (IBM's IMS)</li>
                    <li><strong>Network Model:</strong> Graph structure (CODASYL)</li>
                    <li>Navigational access to data</li>
                    <li>Complex programming required</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Second Generation (1970s-1990s)</h3>
                <ul>
                    <li><strong>Relational Model:</strong> Tables with rows and columns</li>
                    <li>SQL as standard query language</li>
                    <li>Data independence achieved</li>
                    <li>Examples: Oracle, DB2, SQL Server</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Third Generation (1990s-Present)</h3>
                <ul>
                    <li><strong>Object-Relational:</strong> Objects + Relations</li>
                    <li><strong>Object-Oriented:</strong> Pure OO databases</li>
                    <li><strong>NoSQL:</strong> Document, Key-Value, Graph databases</li>
                    <li><strong>NewSQL:</strong> Scalable SQL databases</li>
                </ul>
            </div>
        </div>

        <!-- Slide 20: Practice Activity 1 -->
        <div class="slide">
            <h1>Design Challenge <span class="emoji">🏗️</span></h1>
            <h2>Extend Your Movie Rental Database</h2>

            <div class="demo-box">
                <h3>Scenario:</h3>
                <p>Extend your movie_rental_db with new features to support a growing rental business:</p>
                <ul>
                    <li>Add Reviews table: Members can rate and review movies</li>
                    <li>Add Employees table: Track staff who process rentals</li>
                    <li>Add Inventory table: Support multiple copies of each movie</li>
                    <li>Consider: Late fees, membership tiers, reservation system</li>
                </ul>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <h3>Architectural Decisions:</h3>
                    <ul>
                        <li>New entities needed</li>
                        <li>Relationships to existing tables</li>
                        <li>Constraints and keys</li>
                        <li>Data types for new fields</li>
                    </ul>
                </div>
                <div class="column">
                    <h3>Consider:</h3>
                    <ul>
                        <li>Different user access levels</li>
                        <li>Rating validation (1-5 stars)</li>
                        <li>Inventory tracking accuracy</li>
                        <li>Query performance</li>
                    </ul>
                </div>
            </div>

            <div class="tip-box">
                <strong>Discussion:</strong> How do these extensions fit into the three-level architecture? (10 minutes)
            </div>
        </div>

        <!-- Slide 21: Real-World Example -->
        <div class="slide">
            <h1>Your Movie Rental Database</h1>
            <h2>What You Built in Lecture 2 <span class="emoji">🎬</span></h2>

            <div class="erd-diagram">
                <pre>
┌──────────────┐         ┌──────────────┐         ┌──────────────┐
│   STUDIOS    │         │    MOVIES    │         │   MEMBERS    │
├──────────────┤         ├──────────────┤         ├──────────────┤
│ studio_id PK │◄────┐   │ movie_id  PK │   ┌────►│ member_id PK │
│ name         │     │   │ title        │   │     │ name         │
│ country      │     │   │ director     │   │     │ email        │
│ founded_year │     └───│ studio_id FK │   │     │ join_date    │
└──────────────┘         │ release_year │   │     └──────────────┘
                         │ genre        │   │
                         │ rating       │   │
                         │ available    │   │
                         └──────┬───────┘   │
                                │ 1:N       │ 1:N
                                │           │
                                └─────┬─────┘
                                      │
                                      ▼
                               ┌──────────────┐
                               │   RENTALS    │
                               ├──────────────┤
                               │ rental_id PK │
                               │ movie_id  FK │
                               │ member_id FK │
                               │ rental_date  │
                               │ return_date  │
                               └──────────────┘
                </pre>
            </div>

            <div class="demo-box">
                <h3>Architecture Considerations:</h3>
                <ul>
                    <li><strong>External Level:</strong> Different views for members, employees, managers</li>
                    <li><strong>Conceptual Level:</strong> 4 entities with clear relationships</li>
                    <li><strong>Internal Level:</strong> Indexed on frequently searched fields (genre, studio)</li>
                    <li><strong>Scalability:</strong> Ready to add Reviews, Inventory, Employees</li>
                </ul>
            </div>
        </div>

        <!-- Slide 22: DBMS Components -->
        <div class="slide">
            <h1>Major DBMS Components</h1>

            <div class="erd-diagram" style="padding: 20px;">
                <pre style="text-align: center;">
                    ┌──────────────────────┐
                    │   Query Processor    │
                    ├──────────────────────┤
                    │ • Parser             │
                    │ • Optimizer          │
                    │ • Executor           │
                    └──────────┬───────────┘
                              │
                    ┌──────────▼───────────┐
                    │  Storage Manager     │
                    ├──────────────────────┤
                    │ • Buffer Manager     │
                    │ • File Manager       │
                    │ • Index Manager      │
                    └──────────┬───────────┘
                              │
                    ┌──────────▼───────────┐
                    │  Transaction Manager │
                    ├──────────────────────┤
                    │ • Concurrency Control│
                    │ • Recovery Manager   │
                    │ • Lock Manager       │
                    └──────────────────────┘
                </pre>
            </div>
        </div>

        <!-- Slide 23: Practice Activity 2 -->
        <div class="slide">
            <h1>Group Exercise: Architecture Design</h1>

            <div class="demo-box">
                <h3>Task: Design Views for Different Users</h3>
                <p>For your movie_rental_db, create appropriate views for each user role:</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h4>👔 Managers</h4>
                        <ul>
                            <li>Revenue analytics by movie/genre</li>
                            <li>Member statistics and trends</li>
                            <li>Inventory and availability reports</li>
                            <li>Employee performance metrics</li>
                        </ul>
                    </div>

                    <div class="demo-box">
                        <h4>👨‍💼 Employees</h4>
                        <ul>
                            <li>Current rental transactions</li>
                            <li>Member contact information</li>
                            <li>Movie availability status</li>
                            <li>Overdue rentals to follow up</li>
                        </ul>
                    </div>
                </div>

                <div class="column">
                    <div class="demo-box">
                        <h4>🎬 Members (Logged In)</h4>
                        <ul>
                            <li>Their rental history</li>
                            <li>Available movies to rent</li>
                            <li>Movie ratings and reviews</li>
                            <li>Their account details</li>
                        </ul>
                    </div>

                    <div class="demo-box">
                        <h4>👤 Guests (Public)</h4>
                        <ul>
                            <li>Browse available movies (no prices)</li>
                            <li>Movie titles, genres, ratings</li>
                            <li>Studio information</li>
                            <li>Join membership link</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Consider:</strong> What data should be hidden from each user group? How do we protect member privacy and business data?
            </div>
        </div>

        <!-- Slide 24: Modern Database Architectures -->
        <div class="slide">
            <h1>Modern Database Architectures</h1>

            <div class="demo-box">
                <h3>Cloud-Based Architectures</h3>
                <ul>
                    <li><strong>SaaS:</strong> Software as a Service (Salesforce)</li>
                    <li><strong>PaaS:</strong> Platform as a Service (Azure SQL)</li>
                    <li><strong>DBaaS:</strong> Database as a Service (AWS RDS)</li>
                    <li>Elastic scaling and pay-per-use models</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Distributed Architectures</h3>
                <ul>
                    <li><strong>Sharding:</strong> Horizontal partitioning</li>
                    <li><strong>Replication:</strong> Multiple copies for availability</li>
                    <li><strong>Federation:</strong> Split databases by function</li>
                    <li><strong>CAP Theorem:</strong> Consistency, Availability, Partition tolerance</li>
                </ul>
            </div>

            <div class="demo-box">
                <h3>Microservices Architecture</h3>
                <ul>
                    <li>Database per service pattern</li>
                    <li>Event sourcing and CQRS</li>
                    <li>Polyglot persistence</li>
                </ul>
            </div>
        </div>

        <!-- IN-CLASS EXERCISES SECTION -->

        <!-- Slide 26: Exercise Overview -->
        <div class="slide">
            <h1>In-Class Exercises <span class="emoji">🏗️</span></h1>
            <h2>Architecture Mapping & Debate <span class="timer-badge">40 minutes</span></h2>

            <div class="demo-box">
                <h3>Exercise Overview</h3>
                <p style="font-size: 1.2em;">Today, you'll apply your understanding of database architecture through two practical exercises. You'll map system components and debate architectural trade-offs for real-world scenarios.</p>
            </div>

            <div class="activity-box">
                <h3>Learning Objectives</h3>
                <ul style="font-size: 1.15em;">
                    <li>✅ Label and explain components within a three-tier architecture</li>
                    <li>✅ Understand the role and function of the DBMS in system architecture</li>
                    <li>✅ Compare centralized vs. distributed database architectures</li>
                    <li>✅ Analyze performance and maintenance trade-offs</li>
                    <li>✅ Justify architectural decisions based on requirements</li>
                </ul>
            </div>

            <button data-timer="40">Start 40-Minute Timer</button>
        </div>

        <!-- Slide 27: Exercise 1 - System Component Mapping -->
        <div class="slide">
            <h1>Exercise 1: System Component Mapping <span class="timer-badge">20 min</span></h1>
            <h2>Individual Exercise: Three-Tier Architecture</h2>

            <div class="exercise-step">
                <h3>Scenario:</h3>
                <p style="font-size: 1.1em;">You are a database architect presenting a system design to stakeholders. You need to clearly explain how data flows through a three-tier web application architecture.</p>
            </div>

            <div class="demo-box">
                <h3>The Three-Tier Architecture Diagram:</h3>
                <div class="erd-diagram" style="font-size: 0.9em;">
                    <pre>
┌────────────────────────────────────────────────────┐
│              Tier 1: Presentation                  │
│  ┌──────────────────────────────────────────────┐  │
│  │         Web Browser (Client)                 │  │
│  │  • HTML/CSS/JavaScript                       │  │
│  │  • User Interface                            │  │
│  │  • ???  (Label A - What happens here?)       │  │
│  └──────────────┬───────────────────────────────┘  │
└─────────────────┼───────────────────────────────────┘
                  │ HTTP/HTTPS Requests
                  ▼
┌────────────────────────────────────────────────────┐
│           Tier 2: Application Server               │
│  ┌──────────────────────────────────────────────┐  │
│  │   Application Server (Node.js/Java/Python)   │  │
│  │  • Business Logic                            │  │
│  │  • ???  (Label B - What component?)          │  │
│  │  • Session Management                        │  │
│  │  • ???  (Label C - What happens here?)       │  │
│  └──────────────┬───────────────────────────────┘  │
└─────────────────┼───────────────────────────────────┘
                  │ SQL Queries
                  ▼
┌────────────────────────────────────────────────────┐
│           Tier 3: Database Server                  │
│  ┌──────────────────────────────────────────────┐  │
│  │          DBMS (MySQL/PostgreSQL)             │  │
│  │  • ???  (Label D - Core function?)           │  │
│  │  • Transaction Management                    │  │
│  │  • Security & Access Control                 │  │
│  └──────────────┬───────────────────────────────┘  │
│                 │                                   │
│  ┌──────────────▼───────────────────────────────┐  │
│  │         Physical Database Files              │  │
│  │  • ???  (Label E - What's stored here?)      │  │
│  └──────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────┘
                    </pre>
                </div>
            </div>
        </div>

        <!-- Slide 28: Exercise 1 - Instructions -->
        <div class="slide">
            <h1>Exercise 1: Labeling Instructions</h1>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Label Each Component (10 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li><strong>Label A:</strong> What happens in the browser related to data?</li>
                            <li><strong>Label B:</strong> What key component sits in the application server?</li>
                            <li><strong>Label C:</strong> What processing occurs before sending queries to the database?</li>
                            <li><strong>Label D:</strong> What is the core function of the DBMS?</li>
                            <li><strong>Label E:</strong> What exactly is stored in physical database files?</li>
                        </ul>
                    </li>
                    <li><strong>Explain the DBMS Role (10 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>Write 2-3 sentences explaining how the DBMS acts as an intermediary between the application server and the physical data</li>
                            <li>Describe at least two specific functions the DBMS performs (e.g., query optimization, concurrency control)</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="tip-box">
                <strong>Hint:</strong> Think about data flow - how does a user's request transform as it moves from browser to database and back?
            </div>
        </div>

        <!-- Slide 29: Understanding Exercise 1 -->
        <div class="slide">
            <h1>Understanding: Three-Tier Architecture <span class="emoji">🔍</span></h1>

            <div class="demo-box">
                <h3>Expected Labels:</h3>
                <table class="table-schema" style="font-size: 0.95em;">
                    <tr>
                        <th>Label</th>
                        <th>Component</th>
                        <th>Function</th>
                    </tr>
                    <tr>
                        <td><strong>A</strong></td>
                        <td>Render UI & Capture Input</td>
                        <td>Display data to user, capture form submissions and clicks</td>
                    </tr>
                    <tr>
                        <td><strong>B</strong></td>
                        <td>API/Web Framework</td>
                        <td>RESTful APIs, routing, request handling</td>
                    </tr>
                    <tr>
                        <td><strong>C</strong></td>
                        <td>Data Validation & Business Rules</td>
                        <td>Validate input, apply business logic before querying DB</td>
                    </tr>
                    <tr>
                        <td><strong>D</strong></td>
                        <td>Query Processing & Execution</td>
                        <td>Parse SQL, optimize queries, execute against physical storage</td>
                    </tr>
                    <tr>
                        <td><strong>E</strong></td>
                        <td>Tables, Indexes, Logs</td>
                        <td>Physical storage of data structures, indexes for fast lookup</td>
                    </tr>
                </table>
            </div>

            <div class="demo-box">
                <h3>The DBMS Role:</h3>
                <p style="font-size: 1.05em;">The DBMS serves as a <strong>sophisticated intermediary</strong> that:</p>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li>Translates high-level SQL queries into low-level file operations</li>
                    <li>Optimizes query execution paths for performance</li>
                    <li>Manages concurrent access from multiple application server instances</li>
                    <li>Enforces data integrity constraints and security policies</li>
                    <li>Provides transaction guarantees (ACID properties)</li>
                </ul>
            </div>
        </div>

        <!-- Slide 29b: Real-World Three-Tier Examples -->
        <div class="slide">
            <h1>Real-World Example: Movie Rental Web App <span class="emoji">🌐</span></h1>
            <h2>Three-Tier Architecture in Action</h2>

            <div class="demo-box">
                <h3>Tier 1: Presentation Layer (Browser)</h3>
                <div class="code-example" style="font-size: 0.85em; margin-top: 10px;">
<span class="sql-comment">// React component displaying available movies</span><br>
function MovieCatalog() {<br>
&nbsp;&nbsp;const [movies, setMovies] = useState([]);<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;// Fetch data from application server<br>
&nbsp;&nbsp;fetch('/api/movies/available')<br>
&nbsp;&nbsp;&nbsp;&nbsp;.then(response => response.json())<br>
&nbsp;&nbsp;&nbsp;&nbsp;.then(data => setMovies(data));<br>
}
                </div>
            </div>

            <div class="demo-box">
                <h3>Tier 2: Application Server (Node.js/Express)</h3>
                <div class="code-example" style="font-size: 0.85em; margin-top: 10px;">
<span class="sql-comment">// API endpoint with business logic</span><br>
app.get('/api/movies/available', async (req, res) => {<br>
&nbsp;&nbsp;// Validate user session<br>
&nbsp;&nbsp;if (!req.session.userId) return res.status(401);<br>
&nbsp;&nbsp;<br>
&nbsp;&nbsp;// Query database<br>
&nbsp;&nbsp;const movies = await db.query(<br>
&nbsp;&nbsp;&nbsp;&nbsp;'SELECT * FROM Movies WHERE available = TRUE'<br>
&nbsp;&nbsp;);<br>
&nbsp;&nbsp;res.json(movies);<br>
});
                </div>
            </div>

            <div class="demo-box">
                <h3>Tier 3: Database (PostgreSQL)</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li><strong>DBMS parses</strong> the SQL query</li>
                    <li><strong>Query optimizer</strong> decides to use index on 'available' column</li>
                    <li><strong>Execution engine</strong> retrieves rows from physical storage</li>
                    <li><strong>Returns result set</strong> to application server</li>
                </ul>
            </div>
        </div>

        <!-- Slide 30: Exercise 2 - Centralized vs Distributed Debate -->
        <div class="slide">
            <h1>Exercise 2: Architecture Debate <span class="timer-badge">20 min</span></h1>
            <h2>Group Exercise: Scaling Your Movie Rental Database</h2>

            <div class="warning-box">
                <h3>Your Assignment:</h3>
                <p style="font-size: 1.15em;">Your group will be assigned either <strong>Centralized Architecture</strong> or <strong>Distributed Architecture</strong>. You must defend your assigned architecture for scaling <strong>movie_rental_db nationwide</strong>.</p>
            </div>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h3>🏢 Centralized Architecture</h3>
                        <p><strong>Definition:</strong> Single movie_rental_db instance serving all rental locations, hosted in one data center</p>
                        <div class="erd-diagram" style="font-size: 0.8em; padding: 15px;">
                            <pre>
   All Stores
     │││
     ▼▼▼
┌──────────────┐
│   Single     │
│ movie_rental │
│   _db        │
└──────────────┘
                            </pre>
                        </div>
                    </div>
                </div>
                <div class="column">
                    <div class="demo-box">
                        <h3>🌐 Distributed Architecture</h3>
                        <p><strong>Definition:</strong> Multiple movie_rental_db instances across regions, data partitioned or replicated</p>
                        <div class="erd-diagram" style="font-size: 0.8em; padding: 15px;">
                            <pre>
  West     Central    East
Stores    Stores    Stores
  │││      │││      │││
  ▼▼▼      ▼▼▼      ▼▼▼
┌──────┐ ┌──────┐ ┌──────┐
│ DB1  │ │ DB2  │ │ DB3  │
│ West │ │Central│ │ East │
└───┬──┘ └──┬───┘ └──┬───┘
    └────┬─────┬──────┘
       Sync/Replication
                            </pre>
                        </div>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Context:</strong> Your movie rental chain is expanding from 5 local stores to 200+ stores nationwide. Consider rental transactions, inventory tracking, member accounts across locations!
            </div>
        </div>

        <!-- Slide 31: Exercise 2 - Debate Instructions -->
        <div class="slide">
            <h1>Exercise 2: Debate Preparation</h1>

            <div class="activity-box">
                <h3>Your Task (20 minutes):</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li><strong>Identify THREE PROS of your assigned architecture (8 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>Focus on performance benefits (response time, throughput, scalability)</li>
                            <li>Focus on maintenance advantages (updates, backups, consistency)</li>
                            <li>Provide specific examples for the movie rental expansion</li>
                        </ul>
                    </li>
                    <li><strong>Identify THREE CONS of your assigned architecture (8 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>Be honest about performance limitations</li>
                            <li>Acknowledge maintenance challenges</li>
                            <li>Consider cost implications</li>
                        </ul>
                    </li>
                    <li><strong>Justify Your Position (4 min):</strong>
                        <ul style="margin-top: 10px;">
                            <li>Despite the cons, why is your architecture still the better choice?</li>
                            <li>What mitigation strategies can address the drawbacks?</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="tip-box">
                <strong>Pro Tip:</strong> Think about real movie rental scenarios - member renting at different locations, inventory transfers between stores, checking movie availability across regions, analyzing rental trends.
            </div>
        </div>

        <!-- Slide 32: Understanding Exercise 2 -->
        <div class="slide">
            <h1>Understanding: Architecture Trade-offs <span class="emoji">🔍</span></h1>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h3>✅ Centralized Pros:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>Data Consistency:</strong> Real-time inventory across all stores</li>
                            <li><strong>Simpler Maintenance:</strong> One database to update/backup</li>
                            <li><strong>Lower Cost:</strong> Single infrastructure, easier management</li>
                        </ul>
                        <h3>❌ Centralized Cons:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>Single Point of Failure:</strong> Outage shuts down all stores</li>
                            <li><strong>Latency Issues:</strong> East coast stores slow if server is west</li>
                            <li><strong>Scaling Limits:</strong> Peak hours (Friday night) may overwhelm</li>
                        </ul>
                    </div>
                </div>
                <div class="column">
                    <div class="demo-box">
                        <h3>✅ Distributed Pros:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>High Availability:</strong> West coast outage doesn't affect East</li>
                            <li><strong>Low Latency:</strong> Each region has local database access</li>
                            <li><strong>Horizontal Scaling:</strong> Add regional nodes for new stores</li>
                        </ul>
                        <h3>❌ Distributed Cons:</h3>
                        <ul style="font-size: 0.95em;">
                            <li><strong>Inventory Sync Issues:</strong> Member rents same movie twice?</li>
                            <li><strong>Complex Maintenance:</strong> Updates across multiple databases</li>
                            <li><strong>Higher Cost:</strong> Multiple servers and sync infrastructure</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Real-World Insight:</strong> Netflix uses a hybrid approach - centralized user profiles for consistency, distributed content delivery (CDN) for low-latency streaming.
            </div>
        </div>

        <!-- ALTERNATIVE: Hands-On DBMS Exploration Exercise -->

        <!-- Slide 33a: Alternative Exercise - DBMS Internals -->
        <div class="slide">
            <h1>Alternative Exercise: Explore DBMS Internals <span class="timer-badge">20 min</span></h1>
            <h2>Individual Hands-On: See Behind the Scenes</h2>

            <div class="demo-box">
                <h3>Why This Exercise?</h3>
                <p style="font-size: 1.1em;">Instead of debating theoretical concepts, let's <strong>directly interact</strong> with the DBMS to see how it actually works under the hood. You'll explore the mechanisms that make database architecture possible.</p>
            </div>

            <div class="activity-box">
                <h3>What You'll Discover:</h3>
                <ul style="font-size: 1.1em; line-height: 1.8;">
                    <li>🔍 <strong>System Catalog:</strong> How the DBMS stores metadata about your database</li>
                    <li>🔒 <strong>Locks & Concurrency:</strong> How the DBMS prevents data conflicts</li>
                    <li>📊 <strong>Transaction Management:</strong> How ACID properties work in practice</li>
                    <li>⚡ <strong>Query Execution:</strong> How the DBMS processes your queries internally</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>Tools Needed:</h3>
                <p>DataGrip connected to your movie_rental_db, or PostgreSQL CLI (psql)</p>
            </div>

            <button data-timer="20">Start 20-Minute Timer</button>
        </div>

        <!-- Slide 33b: Part 1 - System Catalog Exploration -->
        <div class="slide">
            <h1>Part 1: System Catalog Exploration <span class="emoji">🔍</span></h1>
            <h2>How Does the DBMS Know About Your Tables?</h2>

            <div class="demo-box">
                <h3>The System Catalog</h3>
                <p style="font-size: 1.05em;">Every DBMS maintains internal tables (metadata) describing your database structure. PostgreSQL stores this in the <code>pg_catalog</code> schema.</p>
            </div>

            <div class="activity-box">
                <h3>Task 1: Explore Your Database Metadata (5 minutes)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Run these queries to see what the DBMS knows about your movie_rental_db:</p>

                <div class="sql-example" style="font-size: 0.85em; margin-top: 10px;">
<span class="sql-comment">-- Query 1: List all tables in your database</span><br>
<span class="sql-keyword">SELECT</span> tablename, schemaname<br>
<span class="sql-keyword">FROM</span> pg_tables<br>
<span class="sql-keyword">WHERE</span> schemaname = <span class="sql-string">'public'</span>;
                </div>

                <div class="sql-example" style="font-size: 0.85em; margin-top: 15px;">
<span class="sql-comment">-- Query 2: View columns for Movies table</span><br>
<span class="sql-keyword">SELECT</span> column_name, data_type, is_nullable, column_default<br>
<span class="sql-keyword">FROM</span> information_schema.columns<br>
<span class="sql-keyword">WHERE</span> table_name = <span class="sql-string">'movies'</span>;
                </div>

                <div class="sql-example" style="font-size: 0.85em; margin-top: 15px;">
<span class="sql-comment">-- Query 3: List all indexes on your tables</span><br>
<span class="sql-keyword">SELECT</span> tablename, indexname, indexdef<br>
<span class="sql-keyword">FROM</span> pg_indexes<br>
<span class="sql-keyword">WHERE</span> schemaname = <span class="sql-string">'public'</span>;
                </div>
            </div>

            <div class="tip-box">
                <strong>Key Insight:</strong> The DBMS stores metadata about YOUR data! This is how it enforces constraints and optimizes queries.
            </div>
        </div>

        <!-- Slide 33c: Part 2 - Transaction Management -->
        <div class="slide">
            <h1>Part 2: Transaction Management <span class="emoji">🔄</span></h1>
            <h2>Experience ACID Properties in Action</h2>

            <div class="demo-box">
                <h3>What is a Transaction?</h3>
                <p style="font-size: 1.05em;">A transaction is a logical unit of work that must be completed entirely or not at all (Atomicity). Let's see this in action!</p>
            </div>

            <div class="activity-box">
                <h3>Task 2: Test Transaction Rollback (5 minutes)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Simulate a failed rental transaction:</p>

                <div class="sql-example" style="font-size: 0.8em; margin-top: 10px;">
<span class="sql-comment">-- Start a transaction block</span><br>
<span class="sql-keyword">BEGIN</span>;<br><br>

<span class="sql-comment">-- Attempt to rent a movie (update inventory)</span><br>
<span class="sql-keyword">UPDATE</span> Movies<br>
<span class="sql-keyword">SET</span> available = <span class="sql-keyword">FALSE</span><br>
<span class="sql-keyword">WHERE</span> movie_id = <span class="sql-string">1</span>;<br><br>

<span class="sql-comment">-- Check current state (movie should be unavailable)</span><br>
<span class="sql-keyword">SELECT</span> movie_id, title, available<br>
<span class="sql-keyword">FROM</span> Movies<br>
<span class="sql-keyword">WHERE</span> movie_id = <span class="sql-string">1</span>;<br><br>

<span class="sql-comment">-- Oops! Customer's credit card declined - ROLLBACK</span><br>
<span class="sql-keyword">ROLLBACK</span>;<br><br>

<span class="sql-comment">-- Check state again (movie should be available again!)</span><br>
<span class="sql-keyword">SELECT</span> movie_id, title, available<br>
<span class="sql-keyword">FROM</span> Movies<br>
<span class="sql-keyword">WHERE</span> movie_id = <span class="sql-string">1</span>;
                </div>
            </div>

            <div class="success-box">
                <h3>What Happened?</h3>
                <p style="font-size: 1.0em;">The DBMS <strong>undid</strong> your changes! This is the "Atomicity" in ACID - all or nothing.</p>
            </div>
        </div>

        <!-- Slide 33d: Part 3 - Concurrency & Locks -->
        <div class="slide">
            <h1>Part 3: Concurrency & Locks <span class="emoji">🔒</span></h1>
            <h2>How Does the DBMS Handle Multiple Users?</h2>

            <div class="demo-box">
                <h3>The Concurrency Challenge</h3>
                <p style="font-size: 1.05em;">When two customers try to rent the last copy of a movie simultaneously, how does the DBMS prevent conflicts?</p>
            </div>

            <div class="activity-box">
                <h3>Task 3: View Active Locks (5 minutes)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Open TWO DataGrip console windows (or two psql sessions):</p>

                <div class="comparison-table">
                    <div class="column">
                        <div class="demo-box">
                            <h4>Session 1 (Window 1):</h4>
                            <div class="code-example" style="font-size: 0.75em;">
<span class="sql-comment">-- Start transaction</span><br>
<span class="sql-keyword">BEGIN</span>;<br><br>

<span class="sql-comment">-- Update a movie</span><br>
<span class="sql-keyword">UPDATE</span> Movies<br>
<span class="sql-keyword">SET</span> available = <span class="sql-keyword">FALSE</span><br>
<span class="sql-keyword">WHERE</span> movie_id = <span class="sql-string">1</span>;<br><br>

<span class="sql-comment">-- DON'T COMMIT YET!</span><br>
<span class="sql-comment">-- Leave transaction open</span>
                            </div>
                        </div>
                    </div>

                    <div class="column">
                        <div class="demo-box">
                            <h4>Session 2 (Window 2):</h4>
                            <div class="code-example" style="font-size: 0.75em;">
<span class="sql-comment">-- View current locks</span><br>
<span class="sql-keyword">SELECT</span><br>
&nbsp;&nbsp;locktype,<br>
&nbsp;&nbsp;relation::regclass,<br>
&nbsp;&nbsp;mode,<br>
&nbsp;&nbsp;granted<br>
<span class="sql-keyword">FROM</span> pg_locks<br>
<span class="sql-keyword">WHERE</span> relation::regclass::text<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="sql-string">'movies'</span>;
                            </div>
                        </div>
                    </div>
                </div>

                <p style="font-size: 0.95em; margin-top: 15px;"><strong>What you'll see:</strong> Session 1 holds a lock on the Movies table! This prevents other transactions from interfering.</p>
            </div>

            <div class="tip-box">
                <strong>Remember:</strong> Run COMMIT or ROLLBACK in Session 1 to release the lock when done!
            </div>
        </div>

        <!-- Slide 33e: Part 4 - Query Processing -->
        <div class="slide">
            <h1>Part 4: Query Processing Internals <span class="emoji">⚡</span></h1>
            <h2>How Does the DBMS Execute Your Queries?</h2>

            <div class="demo-box">
                <h3>Behind Every Query</h3>
                <p style="font-size: 1.05em;">When you run a SQL query, the DBMS performs multiple steps: parsing, planning, optimization, and execution.</p>
            </div>

            <div class="activity-box">
                <h3>Task 4: View Query Execution Statistics (5 minutes)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">PostgreSQL tracks statistics about query execution:</p>

                <div class="sql-example" style="font-size: 0.8em; margin-top: 10px;">
<span class="sql-comment">-- View query statistics for Movies table</span><br>
<span class="sql-keyword">SELECT</span><br>
&nbsp;&nbsp;schemaname,<br>
&nbsp;&nbsp;tablename,<br>
&nbsp;&nbsp;seq_scan <span class="sql-keyword">AS</span> sequential_scans,<br>
&nbsp;&nbsp;seq_tup_read <span class="sql-keyword">AS</span> rows_read_seq,<br>
&nbsp;&nbsp;idx_scan <span class="sql-keyword">AS</span> index_scans,<br>
&nbsp;&nbsp;idx_tup_fetch <span class="sql-keyword">AS</span> rows_fetched_idx,<br>
&nbsp;&nbsp;n_tup_ins <span class="sql-keyword">AS</span> inserts,<br>
&nbsp;&nbsp;n_tup_upd <span class="sql-keyword">AS</span> updates,<br>
&nbsp;&nbsp;n_tup_del <span class="sql-keyword">AS</span> deletes<br>
<span class="sql-keyword">FROM</span> pg_stat_user_tables<br>
<span class="sql-keyword">WHERE</span> tablename = <span class="sql-string">'movies'</span>;
                </div>

                <div class="sql-example" style="font-size: 0.8em; margin-top: 15px;">
<span class="sql-comment">-- See how many times each index has been used</span><br>
<span class="sql-keyword">SELECT</span><br>
&nbsp;&nbsp;indexrelname <span class="sql-keyword">AS</span> index_name,<br>
&nbsp;&nbsp;idx_scan <span class="sql-keyword">AS</span> times_used,<br>
&nbsp;&nbsp;idx_tup_read <span class="sql-keyword">AS</span> tuples_read,<br>
&nbsp;&nbsp;idx_tup_fetch <span class="sql-keyword">AS</span> tuples_fetched<br>
<span class="sql-keyword">FROM</span> pg_stat_user_indexes<br>
<span class="sql-keyword">WHERE</span> schemaname = <span class="sql-string">'public'</span>;
                </div>
            </div>

            <div class="success-box">
                <h3>Key Insight:</h3>
                <p style="font-size: 1.0em;">The DBMS tracks EVERY operation! This data helps it optimize future queries and helps DBAs tune performance.</p>
            </div>
        </div>

        <!-- Slide 33f: DBMS Exploration Summary -->
        <div class="slide">
            <h1>DBMS Internals: What You Discovered <span class="emoji">🎯</span></h1>

            <div class="comparison-table">
                <div class="column">
                    <div class="demo-box">
                        <h3>System Catalog</h3>
                        <ul style="font-size: 0.95em; line-height: 1.6;">
                            <li>DBMS stores metadata about tables, columns, indexes</li>
                            <li>You can query this metadata like any other data</li>
                            <li>This enables dynamic schema inspection</li>
                        </ul>
                    </div>

                    <div class="demo-box">
                        <h3>Transactions</h3>
                        <ul style="font-size: 0.95em; line-height: 1.6;">
                            <li>BEGIN, COMMIT, ROLLBACK control transaction boundaries</li>
                            <li>Atomicity ensures all-or-nothing execution</li>
                            <li>Protects data integrity during failures</li>
                        </ul>
                    </div>
                </div>

                <div class="column">
                    <div class="demo-box">
                        <h3>Concurrency Control</h3>
                        <ul style="font-size: 0.95em; line-height: 1.6;">
                            <li>DBMS uses locks to prevent conflicts</li>
                            <li>You can view active locks in pg_locks</li>
                            <li>Isolation ensures transactions don't interfere</li>
                        </ul>
                    </div>

                    <div class="demo-box">
                        <h3>Query Processing</h3>
                        <ul style="font-size: 0.95em; line-height: 1.6;">
                            <li>DBMS tracks execution statistics</li>
                            <li>Helps optimize query performance</li>
                            <li>Shows which indexes are actually used</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tip-box">
                <strong>Architecture Connection:</strong> These mechanisms implement the DBMS controlled access features we discussed earlier - security, integrity, concurrency, and recovery!
            </div>
        </div>

        <!-- HOMEWORK SECTION -->

        <!-- Slide 33: Homework Overview -->
        <div class="slide">
            <h1>Homework Assignment <span class="emoji">🛠️</span></h1>
            <h2>Week 3: Hands-On Database Architecture</h2>

            <div class="demo-box">
                <h3>Assignment Overview</h3>
                <p style="font-size: 1.15em;">This week's homework is <strong>100% hands-on work in DataGrip</strong>. You'll explore database architecture, implement multi-schema designs, and analyze query performance—all practical skills used by real database architects.</p>
            </div>

            <div class="success-box">
                <h3>🎯 What You'll Learn:</h3>
                <ul style="font-size: 1.05em; line-height: 1.7;">
                    <li>Document physical database architecture using DataGrip's tools</li>
                    <li>Implement architectural layers using PostgreSQL schemas</li>
                    <li>Analyze query execution plans and optimization strategies</li>
                    <li>Understand security architecture through role-based access control</li>
                </ul>
            </div>

            <div class="warning-box">
                <h3>Due Date: <strong>Before Class Next Week</strong></h3>
                <p>Submit screenshots + SQL scripts via GitHub commit URL to D2L</p>
            </div>

            <div class="activity-box">
                <h3>Assignment Components:</h3>
                <ol style="font-size: 1.15em; line-height: 1.8;">
                    <li><strong>Part 1:</strong> Architecture Discovery & Documentation (40 points)</li>
                    <li><strong>Part 2:</strong> Multi-Schema Architecture Implementation (40 points)</li>
                    <li><strong>Part 3:</strong> Query Performance Analysis (20 points)</li>
                </ol>
                <p style="margin-top: 15px; font-size: 1.1em;"><strong>Total Points: 100</strong></p>
            </div>

            <div class="tip-box">
                <strong>No Writing Required!</strong> This assignment is all practical SQL and DataGrip work with screenshot documentation.
            </div>
        </div>

        <!-- Slide 34: Part 1 - Architecture Discovery -->
        <div class="slide">
            <h1>Part 1: Architecture Discovery (40 pts)</h1>
            <h2>Explore Your Movie Rental Database in DataGrip</h2>

            <div class="exercise-step">
                <h3>Task Overview:</h3>
                <p style="font-size: 1.15em;">Use DataGrip to thoroughly document the <strong>physical and logical architecture</strong> of your movie_rental_db from Lecture 2. You'll extract information that database architects use daily.</p>
            </div>

            <div class="activity-box">
                <h3>Step 1: Generate Database Documentation (10 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">In DataGrip, right-click your movie_rental_db database:</p>
                <ol style="font-size: 1.0em; line-height: 1.7;">
                    <li>Select <strong>Diagrams → Show Visualization</strong></li>
                    <li>Arrange tables to show relationships clearly</li>
                    <li>Export diagram as PNG: <code>movie_rental_erd_diagram.png</code></li>
                    <li><strong>Required:</strong> Diagram must show all tables, PKs, FKs, and relationships</li>
                </ol>
            </div>

            <div class="activity-box">
                <h3>Step 2: Extract Physical Schema (15 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Document the complete DDL (Data Definition Language):</p>
                <ol style="font-size: 1.0em; line-height: 1.7;">
                    <li>In DataGrip, select all your tables (Movies, Members, Rentals, Studios)</li>
                    <li>Right-click → SQL Scripts → DDL</li>
                    <li>Copy the complete CREATE TABLE statements</li>
                    <li>Save to file: <code>movie_rental_schema.sql</code></li>
                    <li><strong>Include:</strong> All constraints (PRIMARY KEY, FOREIGN KEY, NOT NULL, UNIQUE)</li>
                </ol>
            </div>

            <div class="activity-box">
                <h3>Step 3: Analyze Data Types & Constraints (15 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Create a documentation table:</p>
                <div class="sql-example" style="font-size: 0.8em; margin-top: 10px;">
<span class="sql-comment">-- Create this table in your database and populate it</span><br>
<span class="sql-keyword">CREATE TABLE</span> architecture_analysis (<br>
&nbsp;&nbsp;table_name <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;column_name <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;data_type <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;constraint_type <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;architectural_purpose <span class="sql-keyword">TEXT</span><br>
);
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;">For each column in your tables, document WHY that data type and constraint were chosen from an architecture perspective.</p>
            </div>

            <div class="tip-box">
                <strong>Screenshot Required:</strong> Capture DataGrip showing your ER diagram with all relationships visible
            </div>
        </div>

        <!-- Slide 35: Part 2 - Multi-Schema Architecture -->
        <div class="slide">
            <h1>Part 2: Multi-Schema Architecture (40 pts)</h1>
            <h2>Implement Architectural Layers</h2>

            <div class="exercise-step">
                <h3>Task Overview:</h3>
                <p style="font-size: 1.15em;">Create a <strong>multi-schema architecture</strong> that simulates how real applications separate concerns across different architectural layers. You'll use PostgreSQL schemas to represent staging, production, and reporting tiers.</p>
            </div>

            <div class="activity-box">
                <h3>Step 1: Create Architectural Schemas (10 pts)</h3>
                <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-comment">-- Create three schemas representing different architectural layers</span><br>
<span class="sql-keyword">CREATE SCHEMA</span> staging;<br>
<span class="sql-keyword">CREATE SCHEMA</span> production;<br>
<span class="sql-keyword">CREATE SCHEMA</span> reporting;
                </div>
                <p style="font-size: 1.0em; margin-top: 10px;">Each schema serves a different architectural purpose:</p>
                <ul style="font-size: 0.95em; line-height: 1.6;">
                    <li><strong>staging:</strong> Data validation and transformation layer</li>
                    <li><strong>production:</strong> Live operational data</li>
                    <li><strong>reporting:</strong> Read-only views for analytics</li>
                </ul>
            </div>

            <div class="activity-box">
                <h3>Step 2: Implement Tables in Each Layer (15 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Recreate your Movies and Members tables in each schema:</p>
                <div class="sql-example" style="font-size: 0.8em;">
<span class="sql-keyword">CREATE TABLE</span> staging.movies (<br>
&nbsp;&nbsp;movie_id <span class="sql-keyword">SERIAL PRIMARY KEY</span>,<br>
&nbsp;&nbsp;title <span class="sql-keyword">VARCHAR</span>(200),<br>
&nbsp;&nbsp;director <span class="sql-keyword">VARCHAR</span>(100),<br>
&nbsp;&nbsp;data_quality_flag <span class="sql-keyword">VARCHAR</span>(20), <span class="sql-comment">-- NEW: Track validation status</span><br>
&nbsp;&nbsp;import_timestamp <span class="sql-keyword">TIMESTAMP DEFAULT CURRENT_TIMESTAMP</span><br>
);<br><br>

<span class="sql-keyword">CREATE TABLE</span> production.movies (<br>
&nbsp;&nbsp;movie_id <span class="sql-keyword">SERIAL PRIMARY KEY</span>,<br>
&nbsp;&nbsp;title <span class="sql-keyword">VARCHAR</span>(200) <span class="sql-keyword">NOT NULL</span>,<br>
&nbsp;&nbsp;director <span class="sql-keyword">VARCHAR</span>(100) <span class="sql-keyword">NOT NULL</span>,<br>
&nbsp;&nbsp;genre <span class="sql-keyword">VARCHAR</span>(50) <span class="sql-keyword">NOT NULL</span><br>
);
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;"><strong>Note:</strong> Staging has relaxed constraints; Production enforces strict rules</p>
            </div>

            <div class="activity-box">
                <h3>Step 3: Create Reporting Views (15 pts)</h3>
                <div class="sql-example" style="font-size: 0.8em;">
<span class="sql-comment">-- Create abstraction layer for reporting tier</span><br>
<span class="sql-keyword">CREATE VIEW</span> reporting.movie_summary <span class="sql-keyword">AS</span><br>
<span class="sql-keyword">SELECT</span><br>
&nbsp;&nbsp;m.title,<br>
&nbsp;&nbsp;m.director,<br>
&nbsp;&nbsp;<span class="sql-keyword">COUNT</span>(r.rental_id) <span class="sql-keyword">AS</span> times_rented<br>
<span class="sql-keyword">FROM</span> production.movies m<br>
<span class="sql-keyword">LEFT JOIN</span> production.rentals r <span class="sql-keyword">ON</span> m.movie_id = r.movie_id<br>
<span class="sql-keyword">GROUP BY</span> m.title, m.director;
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;">Create 2 additional views that represent different "presentation layer" perspectives</p>
            </div>

            <div class="tip-box">
                <strong>Screenshot Required:</strong> DataGrip sidebar showing all three schemas with their objects
            </div>
        </div>

        <!-- Slide 36: Part 3 - Query Performance Analysis -->
        <div class="slide">
            <h1>Part 3: Query Performance Analysis (20 pts)</h1>
            <h2>Understand Query Optimization Architecture</h2>

            <div class="exercise-step">
                <h3>Task Overview:</h3>
                <p style="font-size: 1.15em;">Use PostgreSQL's <strong>EXPLAIN ANALYZE</strong> to understand how the DBMS makes architectural decisions about query execution. You'll compare performance with and without indexes—a key architectural optimization.</p>
            </div>

            <div class="activity-box">
                <h3>Step 1: Baseline Query Performance (5 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">First, add test data to production.movies (at least 1000 rows):</p>
                <div class="sql-example" style="font-size: 0.75em;">
<span class="sql-comment">-- Generate test data using a loop</span><br>
<span class="sql-keyword">DO</span> $$<br>
<span class="sql-keyword">BEGIN</span><br>
&nbsp;&nbsp;<span class="sql-keyword">FOR</span> i <span class="sql-keyword">IN</span> 1..1000 <span class="sql-keyword">LOOP</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">INSERT INTO</span> production.movies (title, director, genre)<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-keyword">VALUES</span> (<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-string">'Movie '</span> || i,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-string">'Director '</span> || (i % 100),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="sql-string">'Genre '</span> || (i % 10)<br>
&nbsp;&nbsp;&nbsp;&nbsp;);<br>
&nbsp;&nbsp;<span class="sql-keyword">END LOOP</span>;<br>
<span class="sql-keyword">END</span> $$;
                </div>
                <p style="font-size: 1.0em; margin-top: 10px;">Run EXPLAIN ANALYZE on this query:</p>
                <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-keyword">EXPLAIN ANALYZE</span><br>
<span class="sql-keyword">SELECT</span> * <span class="sql-keyword">FROM</span> production.movies <span class="sql-keyword">WHERE</span> director = <span class="sql-string">'Director 42'</span>;
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;"><strong>Screenshot:</strong> Capture the query plan showing "Seq Scan" (Sequential Scan)</p>
            </div>

            <div class="activity-box">
                <h3>Step 2: Create Architectural Optimization (10 pts)</h3>
                <div class="sql-example" style="font-size: 0.85em;">
<span class="sql-comment">-- Add index: architectural decision for performance</span><br>
<span class="sql-keyword">CREATE INDEX</span> idx_movies_director <span class="sql-keyword">ON</span> production.movies(director);
                </div>
                <p style="font-size: 1.0em; margin-top: 10px;">Run the same query again with EXPLAIN ANALYZE</p>
                <p style="font-size: 0.95em;"><strong>Screenshot:</strong> Capture showing "Index Scan" and compare execution time</p>
            </div>

            <div class="activity-box">
                <h3>Step 3: Document Architectural Impact (5 pts)</h3>
                <p style="font-size: 1.0em; margin-bottom: 10px;">Create a comparison table in your database:</p>
                <div class="sql-example" style="font-size: 0.8em;">
<span class="sql-keyword">CREATE TABLE</span> performance_analysis (<br>
&nbsp;&nbsp;test_name <span class="sql-keyword">VARCHAR</span>(100),<br>
&nbsp;&nbsp;execution_time_ms <span class="sql-keyword">NUMERIC</span>,<br>
&nbsp;&nbsp;scan_type <span class="sql-keyword">VARCHAR</span>(50),<br>
&nbsp;&nbsp;rows_scanned <span class="sql-keyword">INTEGER</span>,<br>
&nbsp;&nbsp;architectural_notes <span class="sql-keyword">TEXT</span><br>
);
                </div>
                <p style="font-size: 0.95em; margin-top: 10px;">Insert your findings comparing both query executions. Explain the architectural trade-off: indexes improve read performance but add storage overhead and slow down writes.</p>
            </div>

            <div class="tip-box">
                <strong>Key Learning:</strong> This demonstrates how the DBMS architecture makes query optimization decisions
            </div>
        </div>

        <!-- Slide 37: Submission Requirements -->
        <div class="slide">
            <h1>Submission Requirements <span class="emoji">📤</span></h1>

            <div class="warning-box">
                <h3>⚠️ Required Deliverables:</h3>
                <ol style="font-size: 1.05em; line-height: 1.8;">
                    <li><strong>SQL Script File:</strong> <code>LastName_FirstName_Week3_Architecture.sql</code>
                        <ul style="margin-top: 8px;">
                            <li>All CREATE SCHEMA statements</li>
                            <li>All CREATE TABLE statements (staging, production)</li>
                            <li>All CREATE VIEW statements (reporting)</li>
                            <li>All CREATE INDEX statements</li>
                            <li>Sample data population queries</li>
                            <li>EXPLAIN ANALYZE queries with comments</li>
                        </ul>
                    </li>
                    <li><strong>Screenshots Folder:</strong> <code>Week3_Screenshots/</code>
                        <ul style="margin-top: 8px;">
                            <li><code>1_movie_rental_erd_diagram.png</code> - ER diagram from DataGrip</li>
                            <li><code>2_multi_schema.png</code> - DataGrip sidebar showing all schemas</li>
                            <li><code>3_query_plan_before.png</code> - EXPLAIN ANALYZE without index</li>
                            <li><code>4_query_plan_after.png</code> - EXPLAIN ANALYZE with index</li>
                            <li><code>5_performance_results.png</code> - SELECT from performance_analysis table</li>
                        </ul>
                    </li>
                    <li><strong>README.md:</strong> Brief description of your architectural decisions
                        <ul style="margin-top: 8px;">
                            <li>Why you chose specific data types</li>
                            <li>How schemas represent different tiers</li>
                            <li>Performance improvements observed</li>
                        </ul>
                    </li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Submission Steps:</h3>
                <ol style="font-size: 1.1em; line-height: 1.8;">
                    <li>Create folder in your homework repository: <code>Week3_Architecture/</code></li>
                    <li>Add all SQL files, screenshots, and README</li>
                    <li>Commit with message: "Week 3: Database Architecture Implementation"</li>
                    <li>Submit commit URL to D2L</li>
                    <li><strong>Due:</strong> Before class next week</li>
                </ol>
            </div>

            <div class="demo-box">
                <h3>Grading Rubric (100 points):</h3>
                <table class="table-schema" style="font-size: 0.9em;">
                    <tr>
                        <th>Component</th>
                        <th>Points</th>
                        <th>Criteria</th>
                    </tr>
                    <tr>
                        <td><strong>Part 1: Discovery</strong></td>
                        <td>40</td>
                        <td>ER diagram quality (10), DDL completeness (15), Architecture analysis table (15)</td>
                    </tr>
                    <tr>
                        <td><strong>Part 2: Multi-Schema</strong></td>
                        <td>40</td>
                        <td>Schema creation (10), Tables with proper constraints (15), Views functionality (15)</td>
                    </tr>
                    <tr>
                        <td><strong>Part 3: Performance</strong></td>
                        <td>20</td>
                        <td>EXPLAIN ANALYZE screenshots (10), Performance documentation (10)</td>
                    </tr>
                </table>
            </div>

            <div class="tip-box">
                <strong>Pro Tip:</strong> Export your SQL from DataGrip using right-click → SQL Scripts → DDL for perfect formatting!
            </div>
        </div>

        <!-- Slide 38: Summary -->
        <div class="slide">
            <h1>Today's Takeaways <span class="emoji">🎓</span></h1>
            <h2>You Can Now:</h2>
            <ul style="font-size: 1.2em; line-height: 1.8;">
                <li>✅ Explain the ANSI-SPARC three-level architecture and data independence</li>
                <li>✅ Describe DBMS controlled access features (security, integrity, concurrency, recovery)</li>
                <li>✅ Analyze three-tier application architecture components and data flow</li>
                <li>✅ Compare centralized vs. distributed database architectures</li>
                <li>✅ Identify trade-offs in architectural decisions</li>
                <li>✅ Understand modern cloud and microservices database patterns</li>
                <li>✅ Design appropriate architectural views for different stakeholders</li>
            </ul>

            <div class="demo-box" style="margin-top: 30px;">
                <p><strong>Next Lecture:</strong> Entity-Relationship Modeling</p>
                <p><strong>Homework:</strong> Hands-on DataGrip architecture implementation - multi-schema design, ER diagrams, and query performance analysis (due next week)</p>
                <p><strong>Reading:</strong> Chapter 2 - Database System Concepts and Architecture</p>
            </div>
        </div>

        <!-- Navigation Controls -->
        <div class="navigation">
            <button id="prevBtn">Previous</button>
            <span class="slide-counter">
                <span id="currentSlide">1</span> / <span id="totalSlides">28</span>
            </span>
            <button id="nextBtn">Next</button>
        </div>
    </div>

    <!-- Shared Presentation JavaScript -->
    <script src="../../js/presentation.js"></script>

    <!-- Lecture-Specific JavaScript -->
    <script>
        // Database architecture specific interactions
        document.addEventListener('slidechange', (e) => {
            console.log(`Slide ${e.detail.currentSlide + 1} of ${e.detail.totalSlides}`);
            
            // Add any architecture-specific animations or interactions here
            const currentSlideElement = document.querySelectorAll('.slide')[e.detail.currentSlide];
            
            // Animate diagrams when they appear
            const diagrams = currentSlideElement.querySelectorAll('.erd-diagram pre');
            diagrams.forEach((diagram, index) => {
                setTimeout(() => {
                    diagram.style.opacity = '0';
                    diagram.style.transform = 'translateY(20px)';
                    diagram.style.transition = 'all 0.5s ease';
                    
                    setTimeout(() => {
                        diagram.style.opacity = '1';
                        diagram.style.transform = 'translateY(0)';
                    }, 100);
                }, index * 200);
            });
        });

        // Add keyboard navigation hints
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Lecture 03: Database Architecture loaded');
            console.log('Use arrow keys or buttons to navigate');
            console.log('Press F for fullscreen mode');
        });
    </script>
</body>
</html>